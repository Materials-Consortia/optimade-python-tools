<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Documentation for the OPTIMADE Python tools"><link href=https://www.optimade.org/optimade-python-tools/0.12.7/api_reference/models/structures/ rel=canonical><link rel=icon href=../../../images/favicon.png><meta name=generator content="mkdocs-1.2.3, mkdocs-material-7.3.3"><title>structures - OPTIMADE Python tools</title><link rel=stylesheet href=../../../assets/stylesheets/main.5143246d.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.3f5d1f46.min.css><meta name=theme-color content=#000000><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style><link rel=stylesheet href=../../../assets/_mkdocstrings.css><link rel=stylesheet href=../../../css/reference.css></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=black data-md-color-accent=red> <script>function __prefix(e){return new URL("../../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#structures class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../.. title="OPTIMADE Python tools" class="md-header__button md-logo" aria-label="OPTIMADE Python tools" data-md-component=logo> <img src=../../../images/optimade_logo_180x180.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> OPTIMADE Python tools </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> structures </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/Materials-Consortia/optimade-python-tools title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> optimade-python-tools </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title="OPTIMADE Python tools" class="md-nav__button md-logo" aria-label="OPTIMADE Python tools" data-md-component=logo> <img src=../../../images/optimade_logo_180x180.svg alt=logo> </a> OPTIMADE Python tools </label> <div class=md-nav__source> <a href=https://github.com/Materials-Consortia/optimade-python-tools title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> optimade-python-tools </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. class=md-nav__link> Home </a> </li> <li class=md-nav__item> <a href=../../../INSTALL/ class=md-nav__link> Installation </a> </li> <li class=md-nav__item> <a href=../../../configuration/ class=md-nav__link> Configuration </a> </li> <li class=md-nav__item> <a href=../../../CONTRIBUTING/ class=md-nav__link> Contributing </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5 type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5> Use Cases <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Use Cases" data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Use Cases </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../use_cases/single_db/ class=md-nav__link> A single database </a> </li> <li class=md-nav__item> <a href=../../../use_cases/multi_db/ class=md-nav__link> Multiple databases </a> </li> <li class=md-nav__item> <a href=../../../use_cases/dynamic_db/ class=md-nav__link> Dynamic databases </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../CHANGELOG/ class=md-nav__link> Changelog </a> </li> <li class=md-nav__item> <a href=../../../all_models/ class=md-nav__link> All models </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_8 type=checkbox id=__nav_8 checked> <label class=md-nav__link for=__nav_8> API Reference <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="API Reference" data-md-level=1> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> API Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_8_1 type=checkbox id=__nav_8_1> <label class=md-nav__link for=__nav_8_1> adapters <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=adapters data-md-level=2> <label class=md-nav__title for=__nav_8_1> <span class="md-nav__icon md-icon"></span> adapters </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../adapters/base/ class=md-nav__link> base </a> </li> <li class=md-nav__item> <a href=../../adapters/exceptions/ class=md-nav__link> exceptions </a> </li> <li class=md-nav__item> <a href=../../adapters/logger/ class=md-nav__link> logger </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_8_1_4 type=checkbox id=__nav_8_1_4> <label class=md-nav__link for=__nav_8_1_4> references <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=references data-md-level=3> <label class=md-nav__title for=__nav_8_1_4> <span class="md-nav__icon md-icon"></span> references </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../adapters/references/adapter/ class=md-nav__link> adapter </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_8_1_5 type=checkbox id=__nav_8_1_5> <label class=md-nav__link for=__nav_8_1_5> structures <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=structures data-md-level=3> <label class=md-nav__title for=__nav_8_1_5> <span class="md-nav__icon md-icon"></span> structures </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../adapters/structures/adapter/ class=md-nav__link> adapter </a> </li> <li class=md-nav__item> <a href=../../adapters/structures/aiida/ class=md-nav__link> aiida </a> </li> <li class=md-nav__item> <a href=../../adapters/structures/ase/ class=md-nav__link> ase </a> </li> <li class=md-nav__item> <a href=../../adapters/structures/cif/ class=md-nav__link> cif </a> </li> <li class=md-nav__item> <a href=../../adapters/structures/jarvis/ class=md-nav__link> jarvis </a> </li> <li class=md-nav__item> <a href=../../adapters/structures/proteindatabank/ class=md-nav__link> proteindatabank </a> </li> <li class=md-nav__item> <a href=../../adapters/structures/pymatgen/ class=md-nav__link> pymatgen </a> </li> <li class=md-nav__item> <a href=../../adapters/structures/utils/ class=md-nav__link> utils </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_8_2 type=checkbox id=__nav_8_2> <label class=md-nav__link for=__nav_8_2> filterparser <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=filterparser data-md-level=2> <label class=md-nav__title for=__nav_8_2> <span class="md-nav__icon md-icon"></span> filterparser </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../filterparser/lark_parser/ class=md-nav__link> lark_parser </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_8_3 type=checkbox id=__nav_8_3> <label class=md-nav__link for=__nav_8_3> filtertransformers <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=filtertransformers data-md-level=2> <label class=md-nav__title for=__nav_8_3> <span class="md-nav__icon md-icon"></span> filtertransformers </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../filtertransformers/base_transformer/ class=md-nav__link> base_transformer </a> </li> <li class=md-nav__item> <a href=../../filtertransformers/django/ class=md-nav__link> django </a> </li> <li class=md-nav__item> <a href=../../filtertransformers/elasticsearch/ class=md-nav__link> elasticsearch </a> </li> <li class=md-nav__item> <a href=../../filtertransformers/mongo/ class=md-nav__link> mongo </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_8_4 type=checkbox id=__nav_8_4 checked> <label class=md-nav__link for=__nav_8_4> models <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=models data-md-level=2> <label class=md-nav__title for=__nav_8_4> <span class="md-nav__icon md-icon"></span> models </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../baseinfo/ class=md-nav__link> baseinfo </a> </li> <li class=md-nav__item> <a href=../entries/ class=md-nav__link> entries </a> </li> <li class=md-nav__item> <a href=../index_metadb/ class=md-nav__link> index_metadb </a> </li> <li class=md-nav__item> <a href=../jsonapi/ class=md-nav__link> jsonapi </a> </li> <li class=md-nav__item> <a href=../links/ class=md-nav__link> links </a> </li> <li class=md-nav__item> <a href=../optimade_json/ class=md-nav__link> optimade_json </a> </li> <li class=md-nav__item> <a href=../references/ class=md-nav__link> references </a> </li> <li class=md-nav__item> <a href=../responses/ class=md-nav__link> responses </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> structures <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> structures </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#optimade.models.structures class=md-nav__link> optimade.models.structures </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.CORRELATED_STRUCTURE_FIELDS class=md-nav__link> CORRELATED_STRUCTURE_FIELDS </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.EPS class=md-nav__link> EPS </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.EXTENDED_CHEMICAL_SYMBOLS class=md-nav__link> EXTENDED_CHEMICAL_SYMBOLS </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.Vector3D class=md-nav__link> Vector3D </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.Vector3D_unknown class=md-nav__link> Vector3D_unknown </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.Assembly class=md-nav__link> Assembly </a> <nav class=md-nav aria-label=Assembly> <ul class=md-nav__list> <li class=md-nav__item> <a href=#optimade.models.structures.Assembly.group_probabilities class=md-nav__link> group_probabilities </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.Assembly.sites_in_groups class=md-nav__link> sites_in_groups </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.Assembly.check_self_consistency class=md-nav__link> check_self_consistency() </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.Assembly.validate_sites_in_groups class=md-nav__link> validate_sites_in_groups() </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#optimade.models.structures.Periodicity class=md-nav__link> Periodicity </a> <nav class=md-nav aria-label=Periodicity> <ul class=md-nav__list> <li class=md-nav__item> <a href=#optimade.models.structures.Periodicity.APERIODIC class=md-nav__link> APERIODIC </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.Periodicity.PERIODIC class=md-nav__link> PERIODIC </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#optimade.models.structures.Species class=md-nav__link> Species </a> <nav class=md-nav aria-label=Species> <ul class=md-nav__list> <li class=md-nav__item> <a href=#optimade.models.structures.Species.attached class=md-nav__link> attached </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.Species.chemical_symbols class=md-nav__link> chemical_symbols </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.Species.concentration class=md-nav__link> concentration </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.Species.mass class=md-nav__link> mass </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.Species.name class=md-nav__link> name </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.Species.nattached class=md-nav__link> nattached </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.Species.original_name class=md-nav__link> original_name </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.Species.attached_nattached_mutually_exclusive class=md-nav__link> attached_nattached_mutually_exclusive() </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.Species.validate_chemical_symbols class=md-nav__link> validate_chemical_symbols() </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.Species.validate_concentration class=md-nav__link> validate_concentration() </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.Species.validate_minimum_list_length class=md-nav__link> validate_minimum_list_length() </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureFeatures class=md-nav__link> StructureFeatures </a> <nav class=md-nav aria-label=StructureFeatures> <ul class=md-nav__list> <li class=md-nav__item> <a href=#optimade.models.structures.StructureFeatures.ASSEMBLIES class=md-nav__link> ASSEMBLIES </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureFeatures.DISORDER class=md-nav__link> DISORDER </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureFeatures.IMPLICIT_ATOMS class=md-nav__link> IMPLICIT_ATOMS </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureFeatures.SITE_ATTACHMENTS class=md-nav__link> SITE_ATTACHMENTS </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResource class=md-nav__link> StructureResource </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResourceAttributes class=md-nav__link> StructureResourceAttributes </a> <nav class=md-nav aria-label=StructureResourceAttributes> <ul class=md-nav__list> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResourceAttributes.assemblies class=md-nav__link> assemblies </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResourceAttributes.cartesian_site_positions class=md-nav__link> cartesian_site_positions </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResourceAttributes.chemical_formula_anonymous class=md-nav__link> chemical_formula_anonymous </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResourceAttributes.chemical_formula_descriptive class=md-nav__link> chemical_formula_descriptive </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResourceAttributes.chemical_formula_hill class=md-nav__link> chemical_formula_hill </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResourceAttributes.chemical_formula_reduced class=md-nav__link> chemical_formula_reduced </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResourceAttributes.dimension_types class=md-nav__link> dimension_types </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResourceAttributes.elements class=md-nav__link> elements </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResourceAttributes.elements_ratios class=md-nav__link> elements_ratios </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResourceAttributes.lattice_vectors class=md-nav__link> lattice_vectors </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResourceAttributes.nelements class=md-nav__link> nelements </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResourceAttributes.nperiodic_dimensions class=md-nav__link> nperiodic_dimensions </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResourceAttributes.nsites class=md-nav__link> nsites </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResourceAttributes.species class=md-nav__link> species </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResourceAttributes.species_at_sites class=md-nav__link> species_at_sites </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResourceAttributes.structure_features class=md-nav__link> structure_features </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResourceAttributes.Config class=md-nav__link> Config </a> <nav class=md-nav aria-label=Config> <ul class=md-nav__list> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResourceAttributes.Config.schema_extra class=md-nav__link> schema_extra() </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResourceAttributes.check_anonymous_formula class=md-nav__link> check_anonymous_formula() </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResourceAttributes.check_ordered_formula class=md-nav__link> check_ordered_formula() </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResourceAttributes.check_periodic_dimensions class=md-nav__link> check_periodic_dimensions() </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResourceAttributes.element_must_be_chemical_symbol class=md-nav__link> element_must_be_chemical_symbol() </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResourceAttributes.elements_must_be_alphabetical class=md-nav__link> elements_must_be_alphabetical() </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResourceAttributes.null_values_for_whole_vector class=md-nav__link> null_values_for_whole_vector() </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResourceAttributes.ratios_must_sum_to_one class=md-nav__link> ratios_must_sum_to_one() </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResourceAttributes.required_if_dimension_types_has_one class=md-nav__link> required_if_dimension_types_has_one() </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResourceAttributes.validate_nsites class=md-nav__link> validate_nsites() </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResourceAttributes.validate_species class=md-nav__link> validate_species() </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResourceAttributes.validate_species_at_sites class=md-nav__link> validate_species_at_sites() </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResourceAttributes.validate_structure_features class=md-nav__link> validate_structure_features() </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResourceAttributes.warn_on_missing_correlated_fields class=md-nav__link> warn_on_missing_correlated_fields() </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../utils/ class=md-nav__link> utils </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_8_5 type=checkbox id=__nav_8_5> <label class=md-nav__link for=__nav_8_5> server <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=server data-md-level=2> <label class=md-nav__title for=__nav_8_5> <span class="md-nav__icon md-icon"></span> server </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../server/config/ class=md-nav__link> config </a> </li> <li class=md-nav__item> <a href=../../server/exception_handlers/ class=md-nav__link> exception_handlers </a> </li> <li class=md-nav__item> <a href=../../server/exceptions/ class=md-nav__link> exceptions </a> </li> <li class=md-nav__item> <a href=../../server/logger/ class=md-nav__link> logger </a> </li> <li class=md-nav__item> <a href=../../server/main/ class=md-nav__link> main </a> </li> <li class=md-nav__item> <a href=../../server/main_index/ class=md-nav__link> main_index </a> </li> <li class=md-nav__item> <a href=../../server/middleware/ class=md-nav__link> middleware </a> </li> <li class=md-nav__item> <a href=../../server/query_params/ class=md-nav__link> query_params </a> </li> <li class=md-nav__item> <a href=../../server/schemas/ class=md-nav__link> schemas </a> </li> <li class=md-nav__item> <a href=../../server/warnings/ class=md-nav__link> warnings </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_8_5_11 type=checkbox id=__nav_8_5_11> <label class=md-nav__link for=__nav_8_5_11> entry_collections <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=entry_collections data-md-level=3> <label class=md-nav__title for=__nav_8_5_11> <span class="md-nav__icon md-icon"></span> entry_collections </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../server/entry_collections/entry_collections/ class=md-nav__link> entry_collections </a> </li> <li class=md-nav__item> <a href=../../server/entry_collections/mongo/ class=md-nav__link> mongo </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_8_5_12 type=checkbox id=__nav_8_5_12> <label class=md-nav__link for=__nav_8_5_12> mappers <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=mappers data-md-level=3> <label class=md-nav__title for=__nav_8_5_12> <span class="md-nav__icon md-icon"></span> mappers </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../server/mappers/entries/ class=md-nav__link> entries </a> </li> <li class=md-nav__item> <a href=../../server/mappers/links/ class=md-nav__link> links </a> </li> <li class=md-nav__item> <a href=../../server/mappers/references/ class=md-nav__link> references </a> </li> <li class=md-nav__item> <a href=../../server/mappers/structures/ class=md-nav__link> structures </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_8_5_13 type=checkbox id=__nav_8_5_13> <label class=md-nav__link for=__nav_8_5_13> routers <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=routers data-md-level=3> <label class=md-nav__title for=__nav_8_5_13> <span class="md-nav__icon md-icon"></span> routers </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../server/routers/index_info/ class=md-nav__link> index_info </a> </li> <li class=md-nav__item> <a href=../../server/routers/info/ class=md-nav__link> info </a> </li> <li class=md-nav__item> <a href=../../server/routers/landing/ class=md-nav__link> landing </a> </li> <li class=md-nav__item> <a href=../../server/routers/links/ class=md-nav__link> links </a> </li> <li class=md-nav__item> <a href=../../server/routers/references/ class=md-nav__link> references </a> </li> <li class=md-nav__item> <a href=../../server/routers/structures/ class=md-nav__link> structures </a> </li> <li class=md-nav__item> <a href=../../server/routers/utils/ class=md-nav__link> utils </a> </li> <li class=md-nav__item> <a href=../../server/routers/versions/ class=md-nav__link> versions </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_8_6 type=checkbox id=__nav_8_6> <label class=md-nav__link for=__nav_8_6> validator <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=validator data-md-level=2> <label class=md-nav__title for=__nav_8_6> <span class="md-nav__icon md-icon"></span> validator </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../validator/config/ class=md-nav__link> config </a> </li> <li class=md-nav__item> <a href=../../validator/utils/ class=md-nav__link> utils </a> </li> <li class=md-nav__item> <a href=../../validator/validator/ class=md-nav__link> validator </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#optimade.models.structures class=md-nav__link> optimade.models.structures </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.CORRELATED_STRUCTURE_FIELDS class=md-nav__link> CORRELATED_STRUCTURE_FIELDS </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.EPS class=md-nav__link> EPS </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.EXTENDED_CHEMICAL_SYMBOLS class=md-nav__link> EXTENDED_CHEMICAL_SYMBOLS </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.Vector3D class=md-nav__link> Vector3D </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.Vector3D_unknown class=md-nav__link> Vector3D_unknown </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.Assembly class=md-nav__link> Assembly </a> <nav class=md-nav aria-label=Assembly> <ul class=md-nav__list> <li class=md-nav__item> <a href=#optimade.models.structures.Assembly.group_probabilities class=md-nav__link> group_probabilities </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.Assembly.sites_in_groups class=md-nav__link> sites_in_groups </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.Assembly.check_self_consistency class=md-nav__link> check_self_consistency() </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.Assembly.validate_sites_in_groups class=md-nav__link> validate_sites_in_groups() </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#optimade.models.structures.Periodicity class=md-nav__link> Periodicity </a> <nav class=md-nav aria-label=Periodicity> <ul class=md-nav__list> <li class=md-nav__item> <a href=#optimade.models.structures.Periodicity.APERIODIC class=md-nav__link> APERIODIC </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.Periodicity.PERIODIC class=md-nav__link> PERIODIC </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#optimade.models.structures.Species class=md-nav__link> Species </a> <nav class=md-nav aria-label=Species> <ul class=md-nav__list> <li class=md-nav__item> <a href=#optimade.models.structures.Species.attached class=md-nav__link> attached </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.Species.chemical_symbols class=md-nav__link> chemical_symbols </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.Species.concentration class=md-nav__link> concentration </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.Species.mass class=md-nav__link> mass </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.Species.name class=md-nav__link> name </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.Species.nattached class=md-nav__link> nattached </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.Species.original_name class=md-nav__link> original_name </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.Species.attached_nattached_mutually_exclusive class=md-nav__link> attached_nattached_mutually_exclusive() </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.Species.validate_chemical_symbols class=md-nav__link> validate_chemical_symbols() </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.Species.validate_concentration class=md-nav__link> validate_concentration() </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.Species.validate_minimum_list_length class=md-nav__link> validate_minimum_list_length() </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureFeatures class=md-nav__link> StructureFeatures </a> <nav class=md-nav aria-label=StructureFeatures> <ul class=md-nav__list> <li class=md-nav__item> <a href=#optimade.models.structures.StructureFeatures.ASSEMBLIES class=md-nav__link> ASSEMBLIES </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureFeatures.DISORDER class=md-nav__link> DISORDER </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureFeatures.IMPLICIT_ATOMS class=md-nav__link> IMPLICIT_ATOMS </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureFeatures.SITE_ATTACHMENTS class=md-nav__link> SITE_ATTACHMENTS </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResource class=md-nav__link> StructureResource </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResourceAttributes class=md-nav__link> StructureResourceAttributes </a> <nav class=md-nav aria-label=StructureResourceAttributes> <ul class=md-nav__list> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResourceAttributes.assemblies class=md-nav__link> assemblies </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResourceAttributes.cartesian_site_positions class=md-nav__link> cartesian_site_positions </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResourceAttributes.chemical_formula_anonymous class=md-nav__link> chemical_formula_anonymous </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResourceAttributes.chemical_formula_descriptive class=md-nav__link> chemical_formula_descriptive </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResourceAttributes.chemical_formula_hill class=md-nav__link> chemical_formula_hill </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResourceAttributes.chemical_formula_reduced class=md-nav__link> chemical_formula_reduced </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResourceAttributes.dimension_types class=md-nav__link> dimension_types </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResourceAttributes.elements class=md-nav__link> elements </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResourceAttributes.elements_ratios class=md-nav__link> elements_ratios </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResourceAttributes.lattice_vectors class=md-nav__link> lattice_vectors </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResourceAttributes.nelements class=md-nav__link> nelements </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResourceAttributes.nperiodic_dimensions class=md-nav__link> nperiodic_dimensions </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResourceAttributes.nsites class=md-nav__link> nsites </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResourceAttributes.species class=md-nav__link> species </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResourceAttributes.species_at_sites class=md-nav__link> species_at_sites </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResourceAttributes.structure_features class=md-nav__link> structure_features </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResourceAttributes.Config class=md-nav__link> Config </a> <nav class=md-nav aria-label=Config> <ul class=md-nav__list> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResourceAttributes.Config.schema_extra class=md-nav__link> schema_extra() </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResourceAttributes.check_anonymous_formula class=md-nav__link> check_anonymous_formula() </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResourceAttributes.check_ordered_formula class=md-nav__link> check_ordered_formula() </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResourceAttributes.check_periodic_dimensions class=md-nav__link> check_periodic_dimensions() </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResourceAttributes.element_must_be_chemical_symbol class=md-nav__link> element_must_be_chemical_symbol() </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResourceAttributes.elements_must_be_alphabetical class=md-nav__link> elements_must_be_alphabetical() </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResourceAttributes.null_values_for_whole_vector class=md-nav__link> null_values_for_whole_vector() </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResourceAttributes.ratios_must_sum_to_one class=md-nav__link> ratios_must_sum_to_one() </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResourceAttributes.required_if_dimension_types_has_one class=md-nav__link> required_if_dimension_types_has_one() </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResourceAttributes.validate_nsites class=md-nav__link> validate_nsites() </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResourceAttributes.validate_species class=md-nav__link> validate_species() </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResourceAttributes.validate_species_at_sites class=md-nav__link> validate_species_at_sites() </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResourceAttributes.validate_structure_features class=md-nav__link> validate_structure_features() </a> </li> <li class=md-nav__item> <a href=#optimade.models.structures.StructureResourceAttributes.warn_on_missing_correlated_fields class=md-nav__link> warn_on_missing_correlated_fields() </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=structures>structures<a class=headerlink href=#structures title="Permanent link">&para;</a></h1> <div class="doc doc-object doc-module"> <a id=optimade.models.structures></a> <div class="doc doc-contents first"> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h2 id=optimade.models.structures.CORRELATED_STRUCTURE_FIELDS class="doc doc-heading"> <code class="highlight language-python"><span class=n>CORRELATED_STRUCTURE_FIELDS</span></code> <a href=#optimade.models.structures.CORRELATED_STRUCTURE_FIELDS class=headerlink title="Permanent link">&para;</a></h2> <div class="doc doc-contents "> </div> </div> <div class="doc doc-object doc-attribute"> <h2 id=optimade.models.structures.EPS class="doc doc-heading"> <code class="highlight language-python"><span class=n>EPS</span></code> <a href=#optimade.models.structures.EPS class=headerlink title="Permanent link">&para;</a></h2> <div class="doc doc-contents "> </div> </div> <div class="doc doc-object doc-attribute"> <h2 id=optimade.models.structures.EXTENDED_CHEMICAL_SYMBOLS class="doc doc-heading"> <code class="highlight language-python"><span class=n>EXTENDED_CHEMICAL_SYMBOLS</span></code> <a href=#optimade.models.structures.EXTENDED_CHEMICAL_SYMBOLS class=headerlink title="Permanent link">&para;</a></h2> <div class="doc doc-contents "> </div> </div> <div class="doc doc-object doc-attribute"> <h2 id=optimade.models.structures.Vector3D class="doc doc-heading"> <code class="highlight language-python"><span class=n>Vector3D</span></code> <a href=#optimade.models.structures.Vector3D class=headerlink title="Permanent link">&para;</a></h2> <div class="doc doc-contents "> </div> </div> <div class="doc doc-object doc-attribute"> <h2 id=optimade.models.structures.Vector3D_unknown class="doc doc-heading"> <code class="highlight language-python"><span class=n>Vector3D_unknown</span></code> <a href=#optimade.models.structures.Vector3D_unknown class=headerlink title="Permanent link">&para;</a></h2> <div class="doc doc-contents "> </div> </div> <div class="doc doc-object doc-class"> <h2 id=optimade.models.structures.Assembly class="doc doc-heading"> <code> Assembly (<span title="pydantic.main.BaseModel">BaseModel</span>) </code> <span class="doc doc-properties"> <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small> </span> <a href=#optimade.models.structures.Assembly class=headerlink title="Permanent link">&para;</a></h2> <div class="doc doc-contents "> <p>A description of groups of sites that are statistically correlated.</p> <ul> <li><strong>Examples</strong> (for each entry of the assemblies list):<ul> <li><code>{"sites_in_groups": [[0], [1]], "group_probabilities: [0.3, 0.7]}</code>: the first site and the second site never occur at the same time in the unit cell. Statistically, 30 % of the times the first site is present, while 70 % of the times the second site is present.</li> <li><code>{"sites_in_groups": [[1,2], [3]], "group_probabilities: [0.3, 0.7]}</code>: the second and third site are either present together or not present; they form the first group of atoms for this assembly. The second group is formed by the fourth site. Sites of the first group (the second and the third) are never present at the same time as the fourth site. 30 % of times sites 1 and 2 are present (and site 3 is absent); 70 % of times site 3 is present (and sites 1 and 2 are absent).</li> </ul> </li> </ul> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h3 id=optimade.models.structures.Assembly.group_probabilities class="doc doc-heading"> <code class="highlight language-python"><span class=n>group_probabilities</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>float</span><span class=p>]</span></code> <span class="doc doc-properties"> <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small> <small class="doc doc-property doc-property-required"><code>required</code></small> </span> <a href=#optimade.models.structures.Assembly.group_probabilities class=headerlink title="Permanent link">&para;</a></h3> <div class="doc doc-contents "> <p>Statistical probability of each group. It MUST have the same length as <code>sites_in_groups</code>. It SHOULD sum to one. See below for examples of how to specify the probability of the occurrence of a vacancy. The possible reasons for the values not to sum to one are the same as already specified above for the <code>concentration</code> of each <code>species</code>.</p> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=optimade.models.structures.Assembly.sites_in_groups class="doc doc-heading"> <code class="highlight language-python"><span class=n>sites_in_groups</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=n>List</span><span class=p>[</span><span class=nb>int</span><span class=p>]]</span></code> <span class="doc doc-properties"> <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small> <small class="doc doc-property doc-property-required"><code>required</code></small> </span> <a href=#optimade.models.structures.Assembly.sites_in_groups class=headerlink title="Permanent link">&para;</a></h3> <div class="doc doc-contents "> <p>Index of the sites (0-based) that belong to each group for each assembly.</p> <ul> <li><strong>Examples</strong>:<ul> <li><code>[[1], [2]]</code>: two groups, one with the second site, one with the third.</li> <li><code>[[1,2], [3]]</code>: one group with the second and third site, one with the fourth.</li> </ul> </li> </ul> </div> </div> <div class="doc doc-object doc-method"> <h3 id=optimade.models.structures.Assembly.check_self_consistency class="doc doc-heading"> <code class="highlight language-python"><span class=n>check_self_consistency</span><span class=p>(</span><span class=n>v</span><span class=p>,</span> <span class=n>values</span><span class=p>)</span></code> <span class="doc doc-properties"> <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small> </span> <a href=#optimade.models.structures.Assembly.check_self_consistency class=headerlink title="Permanent link">&para;</a></h3> <div class="doc doc-contents "> <details class=quote> <summary>Source code in <code>optimade/models/structures.py</code></summary> <div class=highlight><pre><span></span><code><span class=nd>@validator</span><span class=p>(</span><span class=s2>&quot;group_probabilities&quot;</span><span class=p>)</span>
<span class=k>def</span> <span class=nf>check_self_consistency</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>v</span><span class=p>,</span> <span class=n>values</span><span class=p>):</span>
    <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>v</span><span class=p>)</span> <span class=o>!=</span> <span class=nb>len</span><span class=p>(</span><span class=n>values</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;sites_in_groups&quot;</span><span class=p>,</span> <span class=p>[])):</span>
        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
            <span class=sa>f</span><span class=s2>&quot;sites_in_groups and group_probabilities MUST be of same length, &quot;</span>
            <span class=sa>f</span><span class=s2>&quot;but are </span><span class=si>{</span><span class=nb>len</span><span class=p>(</span><span class=n>values</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;sites_in_groups&#39;</span><span class=p>,</span> <span class=p>[]))</span><span class=si>}</span><span class=s2> and </span><span class=si>{</span><span class=nb>len</span><span class=p>(</span><span class=n>v</span><span class=p>)</span><span class=si>}</span><span class=s2>, respectively&quot;</span>
        <span class=p>)</span>
    <span class=k>return</span> <span class=n>v</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-method"> <h3 id=optimade.models.structures.Assembly.validate_sites_in_groups class="doc doc-heading"> <code class="highlight language-python"><span class=n>validate_sites_in_groups</span><span class=p>(</span><span class=n>v</span><span class=p>)</span></code> <span class="doc doc-properties"> <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small> </span> <a href=#optimade.models.structures.Assembly.validate_sites_in_groups class=headerlink title="Permanent link">&para;</a></h3> <div class="doc doc-contents "> <details class=quote> <summary>Source code in <code>optimade/models/structures.py</code></summary> <div class=highlight><pre><span></span><code><span class=nd>@validator</span><span class=p>(</span><span class=s2>&quot;sites_in_groups&quot;</span><span class=p>)</span>
<span class=k>def</span> <span class=nf>validate_sites_in_groups</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>v</span><span class=p>):</span>
    <span class=n>sites</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=k>for</span> <span class=n>group</span> <span class=ow>in</span> <span class=n>v</span><span class=p>:</span>
        <span class=n>sites</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span><span class=n>group</span><span class=p>)</span>
    <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=nb>set</span><span class=p>(</span><span class=n>sites</span><span class=p>))</span> <span class=o>!=</span> <span class=nb>len</span><span class=p>(</span><span class=n>sites</span><span class=p>):</span>
        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
            <span class=sa>f</span><span class=s2>&quot;A site MUST NOT appear in more than one group. Given value: </span><span class=si>{</span><span class=n>v</span><span class=si>}</span><span class=s2>&quot;</span>
        <span class=p>)</span>
    <span class=k>return</span> <span class=n>v</span>
</code></pre></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=optimade.models.structures.Periodicity class="doc doc-heading"> <code> Periodicity (<span title="enum.IntEnum">IntEnum</span>) </code> <a href=#optimade.models.structures.Periodicity class=headerlink title="Permanent link">&para;</a></h2> <div class="doc doc-contents "> <p>An enumeration.</p> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h3 id=optimade.models.structures.Periodicity.APERIODIC class="doc doc-heading"> <code class="highlight language-python"><span class=n>APERIODIC</span></code> <a href=#optimade.models.structures.Periodicity.APERIODIC class=headerlink title="Permanent link">&para;</a></h3> <div class="doc doc-contents "> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=optimade.models.structures.Periodicity.PERIODIC class="doc doc-heading"> <code class="highlight language-python"><span class=n>PERIODIC</span></code> <a href=#optimade.models.structures.Periodicity.PERIODIC class=headerlink title="Permanent link">&para;</a></h3> <div class="doc doc-contents "> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=optimade.models.structures.Species class="doc doc-heading"> <code> Species (<span title="pydantic.main.BaseModel">BaseModel</span>) </code> <span class="doc doc-properties"> <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small> </span> <a href=#optimade.models.structures.Species class=headerlink title="Permanent link">&para;</a></h2> <div class="doc doc-contents "> <p>A list describing the species of the sites of this structure.</p> <p>Species can represent pure chemical elements, virtual-crystal atoms representing a statistical occupation of a given site by multiple chemical elements, and/or a location to which there are attached atoms, i.e., atoms whose precise location are unknown beyond that they are attached to that position (frequently used to indicate hydrogen atoms attached to another element, e.g., a carbon with three attached hydrogens might represent a methyl group, -CH3).</p> <ul> <li><strong>Examples</strong>:<ul> <li><code>[ {"name": "Ti", "chemical_symbols": ["Ti"], "concentration": [1.0]} ]</code>: any site with this species is occupied by a Ti atom.</li> <li><code>[ {"name": "Ti", "chemical_symbols": ["Ti", "vacancy"], "concentration": [0.9, 0.1]} ]</code>: any site with this species is occupied by a Ti atom with 90 % probability, and has a vacancy with 10 % probability.</li> <li><code>[ {"name": "BaCa", "chemical_symbols": ["vacancy", "Ba", "Ca"], "concentration": [0.05, 0.45, 0.5], "mass": 88.5} ]</code>: any site with this species is occupied by a Ba atom with 45 % probability, a Ca atom with 50 % probability, and by a vacancy with 5 % probability. The mass of this site is (on average) 88.5 a.m.u.</li> <li><code>[ {"name": "C12", "chemical_symbols": ["C"], "concentration": [1.0], "mass": 12.0} ]</code>: any site with this species is occupied by a carbon isotope with mass 12.</li> <li><code>[ {"name": "C13", "chemical_symbols": ["C"], "concentration": [1.0], "mass": 13.0} ]</code>: any site with this species is occupied by a carbon isotope with mass 13.</li> <li><code>[ {"name": "CH3", "chemical_symbols": ["C"], "concentration": [1.0], "attached": ["H"], "nattached": [3]} ]</code>: any site with this species is occupied by a methyl group, -CH3, which is represented without specifying precise positions of the hydrogen atoms.</li> </ul> </li> </ul> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h3 id=optimade.models.structures.Species.attached class="doc doc-heading"> <code class="highlight language-python"><span class=n>attached</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span></code> <span class="doc doc-properties"> <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small> </span> <a href=#optimade.models.structures.Species.attached class=headerlink title="Permanent link">&para;</a></h3> <div class="doc doc-contents "> <p>If provided MUST be a list of length 1 or more of strings of chemical symbols for the elements attached to this site, or "X" for a non-chemical element.</p> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=optimade.models.structures.Species.chemical_symbols class="doc doc-heading"> <code class="highlight language-python"><span class=n>chemical_symbols</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span></code> <span class="doc doc-properties"> <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small> <small class="doc doc-property doc-property-required"><code>required</code></small> </span> <a href=#optimade.models.structures.Species.chemical_symbols class=headerlink title="Permanent link">&para;</a></h3> <div class="doc doc-contents "> <p>MUST be a list of strings of all chemical elements composing this species. Each item of the list MUST be one of the following:</p> <ul> <li>a valid chemical-element name, or</li> <li>the special value <code>"X"</code> to represent a non-chemical element, or</li> <li>the special value <code>"vacancy"</code> to represent that this site has a non-zero probability of having a vacancy (the respective probability is indicated in the <code>concentration</code> list, see below).</li> </ul> <p>If any one entry in the <code>species</code> list has a <code>chemical_symbols</code> list that is longer than 1 element, the correct flag MUST be set in the list <code>structure_features</code>.</p> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=optimade.models.structures.Species.concentration class="doc doc-heading"> <code class="highlight language-python"><span class=n>concentration</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>float</span><span class=p>]</span></code> <span class="doc doc-properties"> <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small> <small class="doc doc-property doc-property-required"><code>required</code></small> </span> <a href=#optimade.models.structures.Species.concentration class=headerlink title="Permanent link">&para;</a></h3> <div class="doc doc-contents "> <p>MUST be a list of floats, with same length as <code>chemical_symbols</code>. The numbers represent the relative concentration of the corresponding chemical symbol in this species. The numbers SHOULD sum to one. Cases in which the numbers do not sum to one typically fall only in the following two categories:</p> <ul> <li>Numerical errors when representing float numbers in fixed precision, e.g. for two chemical symbols with concentrations <code>1/3</code> and <code>2/3</code>, the concentration might look something like <code>[0.33333333333, 0.66666666666]</code>. If the client is aware that the sum is not one because of numerical precision, it can renormalize the values so that the sum is exactly one.</li> <li>Experimental errors in the data present in the database. In this case, it is the responsibility of the client to decide how to process the data.</li> </ul> <p>Note that concentrations are uncorrelated between different site (even of the same species).</p> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=optimade.models.structures.Species.mass class="doc doc-heading"> <code class="highlight language-python"><span class=n>mass</span><span class=p>:</span> <span class=nb>float</span></code> <span class="doc doc-properties"> <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small> </span> <a href=#optimade.models.structures.Species.mass class=headerlink title="Permanent link">&para;</a></h3> <div class="doc doc-contents "> <p>If present MUST be a float expressed in a.m.u.</p> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=optimade.models.structures.Species.name class="doc doc-heading"> <code class="highlight language-python"><span class=n>name</span><span class=p>:</span> <span class=nb>str</span></code> <span class="doc doc-properties"> <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small> <small class="doc doc-property doc-property-required"><code>required</code></small> </span> <a href=#optimade.models.structures.Species.name class=headerlink title="Permanent link">&para;</a></h3> <div class="doc doc-contents "> <p>Gives the name of the species; the <strong>name</strong> value MUST be unique in the <code>species</code> list.</p> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=optimade.models.structures.Species.nattached class="doc doc-heading"> <code class="highlight language-python"><span class=n>nattached</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>int</span><span class=p>]</span></code> <span class="doc doc-properties"> <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small> </span> <a href=#optimade.models.structures.Species.nattached class=headerlink title="Permanent link">&para;</a></h3> <div class="doc doc-contents "> <p>If provided MUST be a list of length 1 or more of integers indicating the number of attached atoms of the kind specified in the value of the :field:<code>attached</code> key.</p> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=optimade.models.structures.Species.original_name class="doc doc-heading"> <code class="highlight language-python"><span class=n>original_name</span><span class=p>:</span> <span class=nb>str</span></code> <span class="doc doc-properties"> <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small> </span> <a href=#optimade.models.structures.Species.original_name class=headerlink title="Permanent link">&para;</a></h3> <div class="doc doc-contents "> <p>Can be any valid Unicode string, and SHOULD contain (if specified) the name of the species that is used internally in the source database.</p> <p>Note: With regards to "source database", we refer to the immediate source being queried via the OPTIMADE API implementation.</p> </div> </div> <div class="doc doc-object doc-method"> <h3 id=optimade.models.structures.Species.attached_nattached_mutually_exclusive class="doc doc-heading"> <code class="highlight language-python"><span class=n>attached_nattached_mutually_exclusive</span><span class=p>(</span><span class=n>values</span><span class=p>)</span></code> <span class="doc doc-properties"> <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small> </span> <a href=#optimade.models.structures.Species.attached_nattached_mutually_exclusive class=headerlink title="Permanent link">&para;</a></h3> <div class="doc doc-contents "> <details class=quote> <summary>Source code in <code>optimade/models/structures.py</code></summary> <div class=highlight><pre><span></span><code><span class=nd>@root_validator</span>
<span class=k>def</span> <span class=nf>attached_nattached_mutually_exclusive</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>values</span><span class=p>):</span>
    <span class=n>attached</span><span class=p>,</span> <span class=n>nattached</span> <span class=o>=</span> <span class=p>(</span>
        <span class=n>values</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;attached&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>),</span>
        <span class=n>values</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;nattached&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>),</span>
    <span class=p>)</span>
    <span class=k>if</span> <span class=p>(</span><span class=n>attached</span> <span class=ow>is</span> <span class=kc>None</span> <span class=ow>and</span> <span class=n>nattached</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>)</span> <span class=ow>or</span> <span class=p>(</span>
        <span class=n>attached</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span> <span class=ow>and</span> <span class=n>nattached</span> <span class=ow>is</span> <span class=kc>None</span>
    <span class=p>):</span>
        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
            <span class=sa>f</span><span class=s2>&quot;Either both or none of attached (</span><span class=si>{</span><span class=n>attached</span><span class=si>}</span><span class=s2>) and nattached (</span><span class=si>{</span><span class=n>nattached</span><span class=si>}</span><span class=s2>) MUST be set.&quot;</span>
        <span class=p>)</span>

    <span class=k>if</span> <span class=p>(</span>
        <span class=n>attached</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span>
        <span class=ow>and</span> <span class=n>nattached</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span>
        <span class=ow>and</span> <span class=nb>len</span><span class=p>(</span><span class=n>attached</span><span class=p>)</span> <span class=o>!=</span> <span class=nb>len</span><span class=p>(</span><span class=n>nattached</span><span class=p>)</span>
    <span class=p>):</span>
        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
            <span class=sa>f</span><span class=s2>&quot;attached (</span><span class=si>{</span><span class=n>attached</span><span class=si>}</span><span class=s2>) and nattached (</span><span class=si>{</span><span class=n>nattached</span><span class=si>}</span><span class=s2>) MUST be lists of equal length.&quot;</span>
        <span class=p>)</span>

    <span class=k>return</span> <span class=n>values</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-method"> <h3 id=optimade.models.structures.Species.validate_chemical_symbols class="doc doc-heading"> <code class="highlight language-python"><span class=n>validate_chemical_symbols</span><span class=p>(</span><span class=n>v</span><span class=p>)</span></code> <span class="doc doc-properties"> <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small> </span> <a href=#optimade.models.structures.Species.validate_chemical_symbols class=headerlink title="Permanent link">&para;</a></h3> <div class="doc doc-contents "> <details class=quote> <summary>Source code in <code>optimade/models/structures.py</code></summary> <div class=highlight><pre><span></span><code><span class=nd>@validator</span><span class=p>(</span><span class=s2>&quot;chemical_symbols&quot;</span><span class=p>,</span> <span class=n>each_item</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<span class=k>def</span> <span class=nf>validate_chemical_symbols</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>v</span><span class=p>):</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=p>(</span><span class=n>v</span> <span class=ow>in</span> <span class=n>EXTENDED_CHEMICAL_SYMBOLS</span><span class=p>):</span>
        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>v</span><span class=si>}</span><span class=s2> MUST be in </span><span class=si>{</span><span class=n>EXTENDED_CHEMICAL_SYMBOLS</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>v</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-method"> <h3 id=optimade.models.structures.Species.validate_concentration class="doc doc-heading"> <code class="highlight language-python"><span class=n>validate_concentration</span><span class=p>(</span><span class=n>v</span><span class=p>,</span> <span class=n>values</span><span class=p>)</span></code> <span class="doc doc-properties"> <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small> </span> <a href=#optimade.models.structures.Species.validate_concentration class=headerlink title="Permanent link">&para;</a></h3> <div class="doc doc-contents "> <details class=quote> <summary>Source code in <code>optimade/models/structures.py</code></summary> <div class=highlight><pre><span></span><code><span class=nd>@validator</span><span class=p>(</span><span class=s2>&quot;concentration&quot;</span><span class=p>)</span>
<span class=k>def</span> <span class=nf>validate_concentration</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>v</span><span class=p>,</span> <span class=n>values</span><span class=p>):</span>
    <span class=k>if</span> <span class=n>values</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;chemical_symbols&quot;</span><span class=p>):</span>
        <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>v</span><span class=p>)</span> <span class=o>!=</span> <span class=nb>len</span><span class=p>(</span><span class=n>values</span><span class=p>[</span><span class=s2>&quot;chemical_symbols&quot;</span><span class=p>]):</span>
            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
                <span class=sa>f</span><span class=s2>&quot;Length of concentration (</span><span class=si>{</span><span class=nb>len</span><span class=p>(</span><span class=n>v</span><span class=p>)</span><span class=si>}</span><span class=s2>) MUST equal length of chemical_symbols &quot;</span>
                <span class=sa>f</span><span class=s2>&quot;(</span><span class=si>{</span><span class=nb>len</span><span class=p>(</span><span class=n>values</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;chemical_symbols&#39;</span><span class=p>,</span> <span class=p>[]))</span><span class=si>}</span><span class=s2>)&quot;</span>
            <span class=p>)</span>
        <span class=k>return</span> <span class=n>v</span>

    <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
        <span class=s2>&quot;Could not validate concentration as &#39;chemical_symbols&#39; is missing/invalid.&quot;</span>
    <span class=p>)</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-method"> <h3 id=optimade.models.structures.Species.validate_minimum_list_length class="doc doc-heading"> <code class="highlight language-python"><span class=n>validate_minimum_list_length</span><span class=p>(</span><span class=n>v</span><span class=p>)</span></code> <span class="doc doc-properties"> <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small> </span> <a href=#optimade.models.structures.Species.validate_minimum_list_length class=headerlink title="Permanent link">&para;</a></h3> <div class="doc doc-contents "> <details class=quote> <summary>Source code in <code>optimade/models/structures.py</code></summary> <div class=highlight><pre><span></span><code><span class=nd>@validator</span><span class=p>(</span><span class=s2>&quot;attached&quot;</span><span class=p>,</span> <span class=s2>&quot;nattached&quot;</span><span class=p>)</span>
<span class=k>def</span> <span class=nf>validate_minimum_list_length</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>v</span><span class=p>):</span>
    <span class=k>if</span> <span class=n>v</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span> <span class=ow>and</span> <span class=nb>len</span><span class=p>(</span><span class=n>v</span><span class=p>)</span> <span class=o>&lt;</span> <span class=mi>1</span><span class=p>:</span>
        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
            <span class=sa>f</span><span class=s2>&quot;The list&#39;s length MUST be 1 or more, instead it was found to be </span><span class=si>{</span><span class=nb>len</span><span class=p>(</span><span class=n>v</span><span class=p>)</span><span class=si>}</span><span class=s2>&quot;</span>
        <span class=p>)</span>
    <span class=k>return</span> <span class=n>v</span>
</code></pre></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=optimade.models.structures.StructureFeatures class="doc doc-heading"> <code> StructureFeatures (<span title="enum.Enum">Enum</span>) </code> <a href=#optimade.models.structures.StructureFeatures class=headerlink title="Permanent link">&para;</a></h2> <div class="doc doc-contents "> <p>Enumeration of structure_features values</p> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h3 id=optimade.models.structures.StructureFeatures.ASSEMBLIES class="doc doc-heading"> <code class="highlight language-python"><span class=n>ASSEMBLIES</span></code> <a href=#optimade.models.structures.StructureFeatures.ASSEMBLIES class=headerlink title="Permanent link">&para;</a></h3> <div class="doc doc-contents "> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=optimade.models.structures.StructureFeatures.DISORDER class="doc doc-heading"> <code class="highlight language-python"><span class=n>DISORDER</span></code> <a href=#optimade.models.structures.StructureFeatures.DISORDER class=headerlink title="Permanent link">&para;</a></h3> <div class="doc doc-contents "> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=optimade.models.structures.StructureFeatures.IMPLICIT_ATOMS class="doc doc-heading"> <code class="highlight language-python"><span class=n>IMPLICIT_ATOMS</span></code> <a href=#optimade.models.structures.StructureFeatures.IMPLICIT_ATOMS class=headerlink title="Permanent link">&para;</a></h3> <div class="doc doc-contents "> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=optimade.models.structures.StructureFeatures.SITE_ATTACHMENTS class="doc doc-heading"> <code class="highlight language-python"><span class=n>SITE_ATTACHMENTS</span></code> <a href=#optimade.models.structures.StructureFeatures.SITE_ATTACHMENTS class=headerlink title="Permanent link">&para;</a></h3> <div class="doc doc-contents "> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=optimade.models.structures.StructureResource class="doc doc-heading"> <code> StructureResource (<a title="optimade.models.entries.EntryResource" href="../entries/#optimade.models.entries.EntryResource">EntryResource</a>) </code> <span class="doc doc-properties"> <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small> </span> <a href=#optimade.models.structures.StructureResource class=headerlink title="Permanent link">&para;</a></h2> <div class="doc doc-contents "> <p>Representing a structure.</p> </div> </div> <div class="doc doc-object doc-class"> <h2 id=optimade.models.structures.StructureResourceAttributes class="doc doc-heading"> <code> StructureResourceAttributes (<a title="optimade.models.entries.EntryResourceAttributes" href="../entries/#optimade.models.entries.EntryResourceAttributes">EntryResourceAttributes</a>) </code> <span class="doc doc-properties"> <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small> </span> <a href=#optimade.models.structures.StructureResourceAttributes class=headerlink title="Permanent link">&para;</a></h2> <div class="doc doc-contents "> <p>This class contains the Field for the attributes used to represent a structure, e.g. unit cell, atoms, positions.</p> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h3 id=optimade.models.structures.StructureResourceAttributes.assemblies class="doc doc-heading"> <code class="highlight language-python"><span class=n>assemblies</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=n>optimade</span><span class=o>.</span><span class=n>models</span><span class=o>.</span><span class=n>structures</span><span class=o>.</span><span class=n>Assembly</span><span class=p>]</span></code> <span class="doc doc-properties"> <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small> </span> <a href=#optimade.models.structures.StructureResourceAttributes.assemblies class=headerlink title="Permanent link">&para;</a></h3> <div class="doc doc-contents "> <p>A description of groups of sites that are statistically correlated.</p> <ul> <li> <p><strong>Type</strong>: list of dictionary with keys:</p> <ul> <li><code>sites_in_groups</code>: list of list of integers (REQUIRED)</li> <li><code>group_probabilities</code>: list of floats (REQUIRED)</li> </ul> </li> <li> <p><strong>Requirements/Conventions</strong>:</p> <ul> <li><strong>Support</strong>: OPTIONAL support in implementations, i.e., MAY be <code>null</code>.</li> <li><strong>Query</strong>: Support for queries on this property is OPTIONAL. If supported, filters MAY support only a subset of comparison operators.</li> <li>The property SHOULD be <code>null</code> for entries that have no partial occupancies.</li> <li>If present, the correct flag MUST be set in the list <code>structure_features</code>.</li> <li>Client implementations MUST check its presence (as its presence changes the interpretation of the structure).</li> <li> <p>If present, it MUST be a list of dictionaries, each of which represents an assembly and MUST have the following two keys:</p> <ul> <li> <p><strong>sites_in_groups</strong>: Index of the sites (0-based) that belong to each group for each assembly.</p> <p>Example: <code>[[1], [2]]</code>: two groups, one with the second site, one with the third. Example: <code>[[1,2], [3]]</code>: one group with the second and third site, one with the fourth.</p> </li> <li> <p><strong>group_probabilities</strong>: Statistical probability of each group. It MUST have the same length as <code>sites_in_groups</code>. It SHOULD sum to one. See below for examples of how to specify the probability of the occurrence of a vacancy. The possible reasons for the values not to sum to one are the same as already specified above for the <code>concentration</code> of each <code>species</code>.</p> </li> </ul> </li> <li> <p>If a site is not present in any group, it means that it is present with 100 % probability (as if no assembly was specified).</p> </li> <li>A site MUST NOT appear in more than one group.</li> </ul> </li> <li> <p><strong>Examples</strong> (for each entry of the assemblies list):</p> <ul> <li><code>{"sites_in_groups": [[0], [1]], "group_probabilities: [0.3, 0.7]}</code>: the first site and the second site never occur at the same time in the unit cell. Statistically, 30 % of the times the first site is present, while 70 % of the times the second site is present.</li> <li><code>{"sites_in_groups": [[1,2], [3]], "group_probabilities: [0.3, 0.7]}</code>: the second and third site are either present together or not present; they form the first group of atoms for this assembly. The second group is formed by the fourth site. Sites of the first group (the second and the third) are never present at the same time as the fourth site. 30 % of times sites 1 and 2 are present (and site 3 is absent); 70 % of times site 3 is present (and sites 1 and 2 are absent).</li> </ul> </li> <li> <p><strong>Notes</strong>:</p> <ul> <li> <p>Assemblies are essential to represent, for instance, the situation where an atom can statistically occupy two different positions (sites).</p> </li> <li> <p>By defining groups, it is possible to represent, e.g., the case where a functional molecule (and not just one atom) is either present or absent (or the case where it it is present in two conformations)</p> </li> <li> <p>Considerations on virtual alloys and on vacancies: In the special case of a virtual alloy, these specifications allow two different, equivalent ways of specifying them. For instance, for a site at the origin with 30 % probability of being occupied by Si, 50 % probability of being occupied by Ge, and 20 % of being a vacancy, the following two representations are possible:</p> <ul> <li> <p>Using a single species: <div class=highlight><pre><span></span><code><span class=p>{</span>
  <span class=nt>&quot;cartesian_site_positions&quot;</span><span class=p>:</span> <span class=p>[[</span><span class=mi>0</span><span class=p>,</span><span class=mi>0</span><span class=p>,</span><span class=mi>0</span><span class=p>]],</span>
  <span class=nt>&quot;species_at_sites&quot;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&quot;SiGe-vac&quot;</span><span class=p>],</span>
  <span class=nt>&quot;species&quot;</span><span class=p>:</span> <span class=p>[</span>
  <span class=p>{</span>
    <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;SiGe-vac&quot;</span><span class=p>,</span>
    <span class=nt>&quot;chemical_symbols&quot;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&quot;Si&quot;</span><span class=p>,</span> <span class=s2>&quot;Ge&quot;</span><span class=p>,</span> <span class=s2>&quot;vacancy&quot;</span><span class=p>],</span>
    <span class=nt>&quot;concentration&quot;</span><span class=p>:</span> <span class=p>[</span><span class=mf>0.3</span><span class=p>,</span> <span class=mf>0.5</span><span class=p>,</span> <span class=mf>0.2</span><span class=p>]</span>
  <span class=p>}</span>
  <span class=p>]</span>
  <span class=err>//</span> <span class=err>...</span>
<span class=p>}</span>
</code></pre></div></p> </li> <li> <p>Using multiple species and the assemblies: <div class=highlight><pre><span></span><code><span class=p>{</span>
  <span class=nt>&quot;cartesian_site_positions&quot;</span><span class=p>:</span> <span class=p>[</span> <span class=p>[</span><span class=mi>0</span><span class=p>,</span><span class=mi>0</span><span class=p>,</span><span class=mi>0</span><span class=p>],</span> <span class=p>[</span><span class=mi>0</span><span class=p>,</span><span class=mi>0</span><span class=p>,</span><span class=mi>0</span><span class=p>],</span> <span class=p>[</span><span class=mi>0</span><span class=p>,</span><span class=mi>0</span><span class=p>,</span><span class=mi>0</span><span class=p>]</span> <span class=p>],</span>
  <span class=nt>&quot;species_at_sites&quot;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&quot;Si&quot;</span><span class=p>,</span> <span class=s2>&quot;Ge&quot;</span><span class=p>,</span> <span class=s2>&quot;vac&quot;</span><span class=p>],</span>
  <span class=nt>&quot;species&quot;</span><span class=p>:</span> <span class=p>[</span>
    <span class=p>{</span> <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;Si&quot;</span><span class=p>,</span> <span class=nt>&quot;chemical_symbols&quot;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&quot;Si&quot;</span><span class=p>],</span> <span class=nt>&quot;concentration&quot;</span><span class=p>:</span> <span class=p>[</span><span class=mf>1.0</span><span class=p>]</span> <span class=p>},</span>
    <span class=p>{</span> <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;Ge&quot;</span><span class=p>,</span> <span class=nt>&quot;chemical_symbols&quot;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&quot;Ge&quot;</span><span class=p>],</span> <span class=nt>&quot;concentration&quot;</span><span class=p>:</span> <span class=p>[</span><span class=mf>1.0</span><span class=p>]</span> <span class=p>},</span>
    <span class=p>{</span> <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;vac&quot;</span><span class=p>,</span> <span class=nt>&quot;chemical_symbols&quot;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&quot;vacancy&quot;</span><span class=p>],</span> <span class=nt>&quot;concentration&quot;</span><span class=p>:</span> <span class=p>[</span><span class=mf>1.0</span><span class=p>]</span> <span class=p>}</span>
  <span class=p>},</span>
  <span class=nt>&quot;assemblies&quot;</span><span class=p>:</span> <span class=p>[</span>
    <span class=p>{</span>
  <span class=nt>&quot;sites_in_groups&quot;</span><span class=p>:</span> <span class=p>[</span> <span class=p>[</span><span class=mi>0</span><span class=p>],</span> <span class=p>[</span><span class=mi>1</span><span class=p>],</span> <span class=p>[</span><span class=mi>2</span><span class=p>]</span> <span class=p>],</span>
  <span class=nt>&quot;group_probabilities&quot;</span><span class=p>:</span> <span class=p>[</span><span class=mf>0.3</span><span class=p>,</span> <span class=mf>0.5</span><span class=p>,</span> <span class=mf>0.2</span><span class=p>]</span>
    <span class=p>}</span>
  <span class=p>]</span>
  <span class=err>//</span> <span class=err>...</span>
<span class=p>}</span>
</code></pre></div></p> </li> </ul> </li> <li> <p>It is up to the database provider to decide which representation to use, typically depending on the internal format in which the structure is stored. However, given a structure identified by a unique ID, the API implementation MUST always provide the same representation for it.</p> </li> <li> <p>The probabilities of occurrence of different assemblies are uncorrelated. So, for instance in the following case with two assemblies: <div class=highlight><pre><span></span><code><span class=p>{</span>
  <span class=nt>&quot;assemblies&quot;</span><span class=p>:</span> <span class=p>[</span>
    <span class=p>{</span>
      <span class=nt>&quot;sites_in_groups&quot;</span><span class=p>:</span> <span class=p>[</span> <span class=p>[</span><span class=mi>0</span><span class=p>],</span> <span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=p>],</span>
      <span class=nt>&quot;group_probabilities&quot;</span><span class=p>:</span> <span class=p>[</span><span class=mf>0.2</span><span class=p>,</span> <span class=mf>0.8</span><span class=p>],</span>
    <span class=p>},</span>
    <span class=p>{</span>
      <span class=nt>&quot;sites_in_groups&quot;</span><span class=p>:</span> <span class=p>[</span> <span class=p>[</span><span class=mi>2</span><span class=p>],</span> <span class=p>[</span><span class=mi>3</span><span class=p>]</span> <span class=p>],</span>
      <span class=nt>&quot;group_probabilities&quot;</span><span class=p>:</span> <span class=p>[</span><span class=mf>0.3</span><span class=p>,</span> <span class=mf>0.7</span><span class=p>]</span>
    <span class=p>}</span>
  <span class=p>]</span>
<span class=p>}</span>
</code></pre></div></p> <p>Site 0 is present with a probability of 20 % and site 1 with a probability of 80 %. These two sites are correlated (either site 0 or 1 is present). Similarly, site 2 is present with a probability of 30 % and site 3 with a probability of 70 %. These two sites are correlated (either site 2 or 3 is present). However, the presence or absence of sites 0 and 1 is not correlated with the presence or absence of sites 2 and 3 (in the specific example, the pair of sites (0, 2) can occur with 0.2<em>0.3 = 6 % probability; the pair (0, 3) with 0.2</em>0.7 = 14 % probability; the pair (1, 2) with 0.8<em>0.3 = 24 % probability; and the pair (1, 3) with 0.8</em>0.7 = 56 % probability).</p> </li> </ul> </li> </ul> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=optimade.models.structures.StructureResourceAttributes.cartesian_site_positions class="doc doc-heading"> <code class="highlight language-python"><span class=n>cartesian_site_positions</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=n>types</span><span class=o>.</span><span class=n>ConstrainedListValue</span><span class=p>]</span></code> <span class="doc doc-properties"> <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small> <small class="doc doc-property doc-property-required"><code>required</code></small> </span> <a href=#optimade.models.structures.StructureResourceAttributes.cartesian_site_positions class=headerlink title="Permanent link">&para;</a></h3> <div class="doc doc-contents "> <p>Cartesian positions of each site in the structure. A site is usually used to describe positions of atoms; what atoms can be encountered at a given site is conveyed by the <code>species_at_sites</code> property, and the species themselves are described in the <code>species</code> property.</p> <ul> <li> <p><strong>Type</strong>: list of list of floats</p> </li> <li> <p><strong>Requirements/Conventions</strong>:</p> <ul> <li><strong>Support</strong>: SHOULD be supported by all implementations, i.e., SHOULD NOT be <code>null</code>.</li> <li><strong>Query</strong>: Support for queries on this property is OPTIONAL. If supported, filters MAY support only a subset of comparison operators.</li> <li>It MUST be a list of length equal to the number of sites in the structure, where every element is a list of the three Cartesian coordinates of a site expressed as float values in the unit angstrom (Å).</li> <li>An entry MAY have multiple sites at the same Cartesian position (for a relevant use of this, see e.g., the property <code>assemblies</code>).</li> </ul> </li> <li> <p><strong>Examples</strong>:</p> <ul> <li><code>[[0,0,0],[0,0,2]]</code> indicates a structure with two sites, one sitting at the origin and one along the (positive) <em>z</em>-axis, 2 Å away from the origin.</li> </ul> </li> </ul> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=optimade.models.structures.StructureResourceAttributes.chemical_formula_anonymous class="doc doc-heading"> <code class="highlight language-python"><span class=n>chemical_formula_anonymous</span><span class=p>:</span> <span class=n>ConstrainedStrValue</span></code> <span class="doc doc-properties"> <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small> <small class="doc doc-property doc-property-required"><code>required</code></small> </span> <a href=#optimade.models.structures.StructureResourceAttributes.chemical_formula_anonymous class=headerlink title="Permanent link">&para;</a></h3> <div class="doc doc-contents "> <p>The anonymous formula is the <code>chemical_formula_reduced</code>, but where the elements are instead first ordered by their chemical proportion number, and then, in order left to right, replaced by anonymous symbols A, B, C, ..., Z, Aa, Ba, ..., Za, Ab, Bb, ... and so on.</p> <ul> <li> <p><strong>Type</strong>: string</p> </li> <li> <p><strong>Requirements/Conventions</strong>:</p> <ul> <li><strong>Support</strong>: SHOULD be supported by all implementations, i.e., SHOULD NOT be <code>null</code>.</li> <li><strong>Query</strong>: MUST be a queryable property. However, support for filters using partial string matching with this property is OPTIONAL (i.e., BEGINS WITH, ENDS WITH, and CONTAINS).</li> </ul> </li> <li> <p><strong>Examples</strong>:</p> <ul> <li><code>"A2B"</code></li> <li><code>"A42B42C16D12E10F9G5"</code></li> </ul> </li> <li> <p><strong>Querying</strong>:</p> <ul> <li>A filter that matches an exactly given formula is <code>chemical_formula_anonymous="A2B"</code>.</li> </ul> </li> </ul> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=optimade.models.structures.StructureResourceAttributes.chemical_formula_descriptive class="doc doc-heading"> <code class="highlight language-python"><span class=n>chemical_formula_descriptive</span><span class=p>:</span> <span class=nb>str</span></code> <span class="doc doc-properties"> <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small> <small class="doc doc-property doc-property-required"><code>required</code></small> </span> <a href=#optimade.models.structures.StructureResourceAttributes.chemical_formula_descriptive class=headerlink title="Permanent link">&para;</a></h3> <div class="doc doc-contents "> <p>The chemical formula for a structure as a string in a form chosen by the API implementation.</p> <ul> <li> <p><strong>Type</strong>: string</p> </li> <li> <p><strong>Requirements/Conventions</strong>:</p> <ul> <li><strong>Support</strong>: SHOULD be supported by all implementations, i.e., SHOULD NOT be <code>null</code>.</li> <li><strong>Query</strong>: MUST be a queryable property with support for all mandatory filter features.</li> <li>The chemical formula is given as a string consisting of properly capitalized element symbols followed by integers or decimal numbers, balanced parentheses, square, and curly brackets <code>(</code>,<code>)</code>, <code>[</code>,<code>]</code>, <code>{</code>, <code>}</code>, commas, the <code>+</code>, <code>-</code>, <code>:</code> and <code>=</code> symbols. The parentheses are allowed to be followed by a number. Spaces are allowed anywhere except within chemical symbols. The order of elements and any groupings indicated by parentheses or brackets are chosen freely by the API implementation.</li> <li>The string SHOULD be arithmetically consistent with the element ratios in the <code>chemical_formula_reduced</code> property.</li> <li>It is RECOMMENDED, but not mandatory, that symbols, parentheses and brackets, if used, are used with the meanings prescribed by <a href=https://www.qmul.ac.uk/sbcs/iupac/bibliog/blue.html>IUPAC's Nomenclature of Organic Chemistry</a>.</li> </ul> </li> <li> <p><strong>Examples</strong>:</p> <ul> <li><code>"(H2O)2 Na"</code></li> <li><code>"NaCl"</code></li> <li><code>"CaCO3"</code></li> <li><code>"CCaO3"</code></li> <li><code>"(CH3)3N+ - [CH2]2-OH = Me3N+ - CH2 - CH2OH"</code></li> </ul> </li> <li> <p><strong>Query examples</strong>:</p> <ul> <li>Note: the free-form nature of this property is likely to make queries on it across different databases inconsistent.</li> <li>A filter that matches an exactly given formula: <code>chemical_formula_descriptive="(H2O)2 Na"</code>.</li> <li>A filter that does a partial match: <code>chemical_formula_descriptive CONTAINS "H2O"</code>.</li> </ul> </li> </ul> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=optimade.models.structures.StructureResourceAttributes.chemical_formula_hill class="doc doc-heading"> <code class="highlight language-python"><span class=n>chemical_formula_hill</span><span class=p>:</span> <span class=n>ConstrainedStrValue</span></code> <span class="doc doc-properties"> <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small> </span> <a href=#optimade.models.structures.StructureResourceAttributes.chemical_formula_hill class=headerlink title="Permanent link">&para;</a></h3> <div class="doc doc-contents "> <p>The chemical formula for a structure in <a href=https://dx.doi.org/10.1021/ja02046a005>Hill form</a> with element symbols followed by integer chemical proportion numbers. The proportion number MUST be omitted if it is 1.</p> <ul> <li> <p><strong>Type</strong>: string</p> </li> <li> <p><strong>Requirements/Conventions</strong>:</p> <ul> <li><strong>Support</strong>: OPTIONAL support in implementations, i.e., MAY be <code>null</code>.</li> <li><strong>Query</strong>: Support for queries on this property is OPTIONAL. If supported, only a subset of the filter features MAY be supported.</li> <li>The overall scale factor of the chemical proportions is chosen such that the resulting values are integers that indicate the most chemically relevant unit of which the system is composed. For example, if the structure is a repeating unit cell with four hydrogens and four oxygens that represents two hydroperoxide molecules, <code>chemical_formula_hill</code> is <code>"H2O2"</code> (i.e., not <code>"HO"</code>, nor <code>"H4O4"</code>).</li> <li>If the chemical insight needed to ascribe a Hill formula to the system is not present, the property MUST be handled as unset.</li> <li>Element names MUST have proper capitalization (e.g., <code>"Si"</code>, not <code>"SI"</code> for "silicon").</li> <li>Elements MUST be placed in <a href=https://dx.doi.org/10.1021/ja02046a005>Hill order</a>, followed by their integer chemical proportion number. Hill order means: if carbon is present, it is placed first, and if also present, hydrogen is placed second. After that, all other elements are ordered alphabetically. If carbon is not present, all elements are ordered alphabetically.</li> <li>If the system has sites with partial occupation and the total occupations of each element do not all sum up to integers, then the Hill formula SHOULD be handled as unset.</li> <li>No spaces or separators are allowed.</li> </ul> </li> <li> <p><strong>Examples</strong>:</p> <ul> <li><code>"H2O2"</code></li> </ul> </li> <li> <p><strong>Query examples</strong>:</p> <ul> <li>A filter that matches an exactly given formula is <code>chemical_formula_hill="H2O2"</code>.</li> </ul> </li> </ul> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=optimade.models.structures.StructureResourceAttributes.chemical_formula_reduced class="doc doc-heading"> <code class="highlight language-python"><span class=n>chemical_formula_reduced</span><span class=p>:</span> <span class=n>ConstrainedStrValue</span></code> <span class="doc doc-properties"> <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small> <small class="doc doc-property doc-property-required"><code>required</code></small> </span> <a href=#optimade.models.structures.StructureResourceAttributes.chemical_formula_reduced class=headerlink title="Permanent link">&para;</a></h3> <div class="doc doc-contents "> <p>The reduced chemical formula for a structure as a string with element symbols and integer chemical proportion numbers. The proportion number MUST be omitted if it is 1.</p> <ul> <li> <p><strong>Type</strong>: string</p> </li> <li> <p><strong>Requirements/Conventions</strong>:</p> <ul> <li><strong>Support</strong>: SHOULD be supported by all implementations, i.e., SHOULD NOT be <code>null</code>.</li> <li><strong>Query</strong>: MUST be a queryable property. However, support for filters using partial string matching with this property is OPTIONAL (i.e., BEGINS WITH, ENDS WITH, and CONTAINS). Intricate queries on formula components are instead suggested to be formulated using set-type filter operators on the multi valued <code>elements</code> and <code>elements_ratios</code> properties.</li> <li>Element names MUST have proper capitalization (e.g., <code>"Si"</code>, not <code>"SI"</code> for "silicon").</li> <li>Elements MUST be placed in alphabetical order, followed by their integer chemical proportion number.</li> <li>For structures with no partial occupation, the chemical proportion numbers are the smallest integers for which the chemical proportion is exactly correct.</li> <li>For structures with partial occupation, the chemical proportion numbers are integers that within reasonable approximation indicate the correct chemical proportions. The precise details of how to perform the rounding is chosen by the API implementation.</li> <li>No spaces or separators are allowed.</li> </ul> </li> <li> <p><strong>Examples</strong>:</p> <ul> <li><code>"H2NaO"</code></li> <li><code>"ClNa"</code></li> <li><code>"CCaO3"</code></li> </ul> </li> <li> <p><strong>Query examples</strong>:</p> <ul> <li>A filter that matches an exactly given formula is <code>chemical_formula_reduced="H2NaO"</code>.</li> </ul> </li> </ul> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=optimade.models.structures.StructureResourceAttributes.dimension_types class="doc doc-heading"> <code class="highlight language-python"><span class=n>dimension_types</span><span class=p>:</span> <span class=n>ConstrainedListValue</span></code> <span class="doc doc-properties"> <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small> </span> <a href=#optimade.models.structures.StructureResourceAttributes.dimension_types class=headerlink title="Permanent link">&para;</a></h3> <div class="doc doc-contents "> <p>List of three integers. For each of the three directions indicated by the three lattice vectors (see property <code>lattice_vectors</code>), this list indicates if the direction is periodic (value <code>1</code>) or non-periodic (value <code>0</code>). Note: the elements in this list each refer to the direction of the corresponding entry in <code>lattice_vectors</code> and <em>not</em> the Cartesian x, y, z directions.</p> <ul> <li> <p><strong>Type</strong>: list of integers.</p> </li> <li> <p><strong>Requirements/Conventions</strong>:</p> <ul> <li><strong>Support</strong>: SHOULD be supported by all implementations, i.e., SHOULD NOT be <code>null</code>.</li> <li><strong>Query</strong>: Support for queries on this property is OPTIONAL.</li> <li>MUST be a list of length 3.</li> <li>Each integer element MUST assume only the value 0 or 1.</li> </ul> </li> <li> <p><strong>Examples</strong>:</p> <ul> <li>For a molecule: <code>[0, 0, 0]</code></li> <li>For a wire along the direction specified by the third lattice vector: <code>[0, 0, 1]</code></li> <li>For a 2D surface/slab, periodic on the plane defined by the first and third lattice vectors: <code>[1, 0, 1]</code></li> <li>For a bulk 3D system: <code>[1, 1, 1]</code></li> </ul> </li> </ul> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=optimade.models.structures.StructureResourceAttributes.elements class="doc doc-heading"> <code class="highlight language-python"><span class=n>elements</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span></code> <span class="doc doc-properties"> <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small> <small class="doc doc-property doc-property-required"><code>required</code></small> </span> <a href=#optimade.models.structures.StructureResourceAttributes.elements class=headerlink title="Permanent link">&para;</a></h3> <div class="doc doc-contents "> <p>Names of the different elements present in the structure.</p> <ul> <li> <p><strong>Type</strong>: list of strings.</p> </li> <li> <p><strong>Requirements/Conventions</strong>:</p> <ul> <li><strong>Support</strong>: SHOULD be supported by all implementations, i.e., SHOULD NOT be <code>null</code>.</li> <li><strong>Query</strong>: MUST be a queryable property with support for all mandatory filter features.</li> <li>The strings are the chemical symbols, i.e., either a single uppercase letter or an uppercase letter followed by a number of lowercase letters.</li> <li>The order MUST be alphabetical.</li> <li>Note: This property SHOULD NOT contain the string "X" to indicate non-chemical elements or "vacancy" to indicate vacancies (in contrast to the field <code>chemical_symbols</code> for the <code>species</code> property).</li> </ul> </li> <li> <p><strong>Examples</strong>:</p> <ul> <li><code>["Si"]</code></li> <li><code>["Al","O","Si"]</code></li> </ul> </li> <li> <p><strong>Query examples</strong>:</p> <ul> <li>A filter that matches all records of structures that contain Si, Al <strong>and</strong> O, and possibly other elements: <code>elements HAS ALL "Si", "Al", "O"</code>.</li> <li>To match structures with exactly these three elements, use <code>elements HAS ALL "Si", "Al", "O" AND elements LENGTH 3</code>.</li> </ul> </li> </ul> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=optimade.models.structures.StructureResourceAttributes.elements_ratios class="doc doc-heading"> <code class="highlight language-python"><span class=n>elements_ratios</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>float</span><span class=p>]</span></code> <span class="doc doc-properties"> <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small> <small class="doc doc-property doc-property-required"><code>required</code></small> </span> <a href=#optimade.models.structures.StructureResourceAttributes.elements_ratios class=headerlink title="Permanent link">&para;</a></h3> <div class="doc doc-contents "> <p>Relative proportions of different elements in the structure.</p> <ul> <li> <p><strong>Type</strong>: list of floats</p> </li> <li> <p><strong>Requirements/Conventions</strong>:</p> <ul> <li><strong>Support</strong>: SHOULD be supported by all implementations, i.e., SHOULD NOT be <code>null</code>.</li> <li><strong>Query</strong>: MUST be a queryable property with support for all mandatory filter features.</li> <li>Composed by the proportions of elements in the structure as a list of floating point numbers.</li> <li>The sum of the numbers MUST be 1.0 (within floating point accuracy)</li> </ul> </li> <li> <p><strong>Examples</strong>:</p> <ul> <li><code>[1.0]</code></li> <li><code>[0.3333333333333333, 0.2222222222222222, 0.4444444444444444]</code></li> </ul> </li> <li> <p><strong>Query examples</strong>:</p> <ul> <li>Note: Useful filters can be formulated using the set operator syntax for correlated values. However, since the values are floating point values, the use of equality comparisons is generally inadvisable.</li> <li>OPTIONAL: a filter that matches structures where approximately 1/3 of the atoms in the structure are the element Al is: <code>elements:elements_ratios HAS ALL "Al":&gt;0.3333, "Al":&lt;0.3334</code>.</li> </ul> </li> </ul> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=optimade.models.structures.StructureResourceAttributes.lattice_vectors class="doc doc-heading"> <code class="highlight language-python"><span class=n>lattice_vectors</span><span class=p>:</span> <span class=n>ConstrainedListValue</span></code> <span class="doc doc-properties"> <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small> </span> <a href=#optimade.models.structures.StructureResourceAttributes.lattice_vectors class=headerlink title="Permanent link">&para;</a></h3> <div class="doc doc-contents "> <p>The three lattice vectors in Cartesian coordinates, in ångström (Å).</p> <ul> <li> <p><strong>Type</strong>: list of list of floats or unknown values.</p> </li> <li> <p><strong>Requirements/Conventions</strong>:</p> <ul> <li><strong>Support</strong>: SHOULD be supported by all implementations, i.e., SHOULD NOT be <code>null</code>.</li> <li><strong>Query</strong>: Support for queries on this property is OPTIONAL. If supported, filters MAY support only a subset of comparison operators.</li> <li>MUST be a list of three vectors <em>a</em>, <em>b</em>, and <em>c</em>, where each of the vectors MUST BE a list of the vector's coordinates along the x, y, and z Cartesian coordinates. (Therefore, the first index runs over the three lattice vectors and the second index runs over the x, y, z Cartesian coordinates).</li> <li>For databases that do not define an absolute Cartesian system (e.g., only defining the length and angles between vectors), the first lattice vector SHOULD be set along <em>x</em> and the second on the <em>xy</em>-plane.</li> <li>MUST always contain three vectors of three coordinates each, independently of the elements of property <code>dimension_types</code>. The vectors SHOULD by convention be chosen so the determinant of the <code>lattice_vectors</code> matrix is different from zero. The vectors in the non-periodic directions have no significance beyond fulfilling these requirements.</li> <li>The coordinates of the lattice vectors of non-periodic dimensions (i.e., those dimensions for which <code>dimension_types</code> is <code>0</code>) MAY be given as a list of all <code>null</code> values. If a lattice vector contains the value <code>null</code>, all coordinates of that lattice vector MUST be <code>null</code>.</li> </ul> </li> <li> <p><strong>Examples</strong>:</p> <ul> <li><code>[[4.0,0.0,0.0],[0.0,4.0,0.0],[0.0,1.0,4.0]]</code> represents a cell, where the first vector is <code>(4, 0, 0)</code>, i.e., a vector aligned along the <code>x</code> axis of length 4 Å; the second vector is <code>(0, 4, 0)</code>; and the third vector is <code>(0, 1, 4)</code>.</li> </ul> </li> </ul> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=optimade.models.structures.StructureResourceAttributes.nelements class="doc doc-heading"> <code class="highlight language-python"><span class=n>nelements</span><span class=p>:</span> <span class=nb>int</span></code> <span class="doc doc-properties"> <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small> <small class="doc doc-property doc-property-required"><code>required</code></small> </span> <a href=#optimade.models.structures.StructureResourceAttributes.nelements class=headerlink title="Permanent link">&para;</a></h3> <div class="doc doc-contents "> <p>Number of different elements in the structure as an integer.</p> <ul> <li> <p><strong>Type</strong>: integer</p> </li> <li> <p><strong>Requirements/Conventions</strong>:</p> <ul> <li><strong>Support</strong>: SHOULD be supported by all implementations, i.e., SHOULD NOT be <code>null</code>.</li> <li><strong>Query</strong>: MUST be a queryable property with support for all mandatory filter features.</li> </ul> </li> <li> <p><strong>Examples</strong>:</p> <ul> <li><code>3</code></li> </ul> </li> <li> <p><strong>Querying</strong>:</p> <ul> <li>Note: queries on this property can equivalently be formulated using <code>elements LENGTH</code>.</li> <li>A filter that matches structures that have exactly 4 elements: <code>nelements=4</code>.</li> <li>A filter that matches structures that have between 2 and 7 elements: <code>nelements&gt;=2 AND nelements&lt;=7</code>.</li> </ul> </li> </ul> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=optimade.models.structures.StructureResourceAttributes.nperiodic_dimensions class="doc doc-heading"> <code class="highlight language-python"><span class=n>nperiodic_dimensions</span><span class=p>:</span> <span class=nb>int</span></code> <span class="doc doc-properties"> <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small> <small class="doc doc-property doc-property-required"><code>required</code></small> </span> <a href=#optimade.models.structures.StructureResourceAttributes.nperiodic_dimensions class=headerlink title="Permanent link">&para;</a></h3> <div class="doc doc-contents "> <p>An integer specifying the number of periodic dimensions in the structure, equivalent to the number of non-zero entries in <code>dimension_types</code>.</p> <ul> <li> <p><strong>Type</strong>: integer</p> </li> <li> <p><strong>Requirements/Conventions</strong>:</p> <ul> <li><strong>Support</strong>: SHOULD be supported by all implementations, i.e., SHOULD NOT be <code>null</code>.</li> <li><strong>Query</strong>: MUST be a queryable property with support for all mandatory filter features.</li> <li>The integer value MUST be between 0 and 3 inclusive and MUST be equal to the sum of the items in the <code>dimension_types</code> property.</li> <li>This property only reflects the treatment of the lattice vectors provided for the structure, and not any physical interpretation of the dimensionality of its contents.</li> </ul> </li> <li> <p><strong>Examples</strong>:</p> <ul> <li><code>2</code> should be indicated in cases where <code>dimension_types</code> is any of <code>[1, 1, 0]</code>, <code>[1, 0, 1]</code>, <code>[0, 1, 1]</code>.</li> </ul> </li> <li> <p><strong>Query examples</strong>:</p> <ul> <li>Match only structures with exactly 3 periodic dimensions: <code>nperiodic_dimensions=3</code></li> <li>Match all structures with 2 or fewer periodic dimensions: <code>nperiodic_dimensions&lt;=2</code></li> </ul> </li> </ul> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=optimade.models.structures.StructureResourceAttributes.nsites class="doc doc-heading"> <code class="highlight language-python"><span class=n>nsites</span><span class=p>:</span> <span class=nb>int</span></code> <span class="doc doc-properties"> <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small> <small class="doc doc-property doc-property-required"><code>required</code></small> </span> <a href=#optimade.models.structures.StructureResourceAttributes.nsites class=headerlink title="Permanent link">&para;</a></h3> <div class="doc doc-contents "> <p>An integer specifying the length of the <code>cartesian_site_positions</code> property.</p> <ul> <li> <p><strong>Type</strong>: integer</p> </li> <li> <p><strong>Requirements/Conventions</strong>:</p> <ul> <li><strong>Support</strong>: SHOULD be supported by all implementations, i.e., SHOULD NOT be <code>null</code>.</li> <li><strong>Query</strong>: MUST be a queryable property with support for all mandatory filter features.</li> </ul> </li> <li> <p><strong>Examples</strong>:</p> <ul> <li><code>42</code></li> </ul> </li> <li> <p><strong>Query examples</strong>:</p> <ul> <li>Match only structures with exactly 4 sites: <code>nsites=4</code></li> <li>Match structures that have between 2 and 7 sites: <code>nsites&gt;=2 AND nsites&lt;=7</code></li> </ul> </li> </ul> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=optimade.models.structures.StructureResourceAttributes.species class="doc doc-heading"> <code class="highlight language-python"><span class=n>species</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=n>optimade</span><span class=o>.</span><span class=n>models</span><span class=o>.</span><span class=n>structures</span><span class=o>.</span><span class=n>Species</span><span class=p>]</span></code> <span class="doc doc-properties"> <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small> <small class="doc doc-property doc-property-required"><code>required</code></small> </span> <a href=#optimade.models.structures.StructureResourceAttributes.species class=headerlink title="Permanent link">&para;</a></h3> <div class="doc doc-contents "> <p>A list describing the species of the sites of this structure. Species can represent pure chemical elements, virtual-crystal atoms representing a statistical occupation of a given site by multiple chemical elements, and/or a location to which there are attached atoms, i.e., atoms whose precise location are unknown beyond that they are attached to that position (frequently used to indicate hydrogen atoms attached to another element, e.g., a carbon with three attached hydrogens might represent a methyl group, -CH3).</p> <ul> <li> <p><strong>Type</strong>: list of dictionary with keys:</p> <ul> <li><code>name</code>: string (REQUIRED)</li> <li><code>chemical_symbols</code>: list of strings (REQUIRED)</li> <li><code>concentration</code>: list of float (REQUIRED)</li> <li><code>attached</code>: list of strings (REQUIRED)</li> <li><code>nattached</code>: list of integers (OPTIONAL)</li> <li><code>mass</code>: float (OPTIONAL)</li> <li><code>original_name</code>: string (OPTIONAL).</li> </ul> </li> <li> <p><strong>Requirements/Conventions</strong>:</p> <ul> <li><strong>Support</strong>: SHOULD be supported by all implementations, i.e., SHOULD NOT be <code>null</code>.</li> <li><strong>Query</strong>: Support for queries on this property is OPTIONAL. If supported, filters MAY support only a subset of comparison operators.</li> <li> <p>Each list member MUST be a dictionary with the following keys:</p> <ul> <li><strong>name</strong>: REQUIRED; gives the name of the species; the <strong>name</strong> value MUST be unique in the <code>species</code> list;</li> <li><strong>chemical_symbols</strong>: REQUIRED; MUST be a list of strings of all chemical elements composing this species. Each item of the list MUST be one of the following:<ul> <li>a valid chemical-element name, or</li> <li>the special value <code>"X"</code> to represent a non-chemical element, or</li> <li>the special value <code>"vacancy"</code> to represent that this site has a non-zero probability of having a vacancy (the respective probability is indicated in the <code>concentration</code> list, see below).</li> </ul> </li> </ul> <p>If any one entry in the <code>species</code> list has a <code>chemical_symbols</code> list that is longer than 1 element, the correct flag MUST be set in the list <code>structure_features</code>.</p> <ul> <li> <p><strong>concentration</strong>: REQUIRED; MUST be a list of floats, with same length as <code>chemical_symbols</code>. The numbers represent the relative concentration of the corresponding chemical symbol in this species. The numbers SHOULD sum to one. Cases in which the numbers do not sum to one typically fall only in the following two categories:</p> <ul> <li>Numerical errors when representing float numbers in fixed precision, e.g. for two chemical symbols with concentrations <code>1/3</code> and <code>2/3</code>, the concentration might look something like <code>[0.33333333333, 0.66666666666]</code>. If the client is aware that the sum is not one because of numerical precision, it can renormalize the values so that the sum is exactly one.</li> <li>Experimental errors in the data present in the database. In this case, it is the responsibility of the client to decide how to process the data.</li> </ul> <p>Note that concentrations are uncorrelated between different sites (even of the same species).</p> </li> <li> <p><strong>attached</strong>: OPTIONAL; if provided MUST be a list of length 1 or more of strings of chemical symbols for the elements attached to this site, or "X" for a non-chemical element.</p> </li> <li> <p><strong>nattached</strong>: OPTIONAL; if provided MUST be a list of length 1 or more of integers indicating the number of attached atoms of the kind specified in the value of the <code>attached</code> key.</p> </li> </ul> <p>The implementation MUST include either both or none of the <code>attached</code> and <code>nattached</code> keys, and if they are provided, they MUST be of the same length. Furthermore, if they are provided, the <code>structure_features</code> property MUST include the string <code>site_attachments</code>.</p> <ul> <li> <p><strong>mass</strong>: OPTIONAL. If present MUST be a float expressed in a.m.u.</p> </li> <li> <p><strong>original_name</strong>: OPTIONAL. Can be any valid Unicode string, and SHOULD contain (if specified) the name of the species that is used internally in the source database.</p> </li> </ul> <p>Note: With regards to "source database", we refer to the immediate source being queried via the OPTIMADE API implementation.</p> <p>The main use of this field is for source databases that use species names, containing characters that are not allowed (see description of the list property <code>species_at_sites</code>).</p> </li> <li> <p>For systems that have only species formed by a single chemical symbol, and that have at most one species per chemical symbol, SHOULD use the chemical symbol as species name (e.g., <code>"Ti"</code> for titanium, <code>"O"</code> for oxygen, etc.) However, note that this is OPTIONAL, and client implementations MUST NOT assume that the key corresponds to a chemical symbol, nor assume that if the species name is a valid chemical symbol, that it represents a species with that chemical symbol. This means that a species <code>{"name": "C", "chemical_symbols": ["Ti"], "concentration": [1.0]}</code> is valid and represents a titanium species (and <em>not</em> a carbon species).</p> </li> <li>It is NOT RECOMMENDED that a structure includes species that do not have at least one corresponding site.</li> </ul> </li> <li> <p><strong>Examples</strong>:</p> <ul> <li><code>[ {"name": "Ti", "chemical_symbols": ["Ti"], "concentration": [1.0]} ]</code>: any site with this species is occupied by a Ti atom.</li> <li><code>[ {"name": "Ti", "chemical_symbols": ["Ti", "vacancy"], "concentration": [0.9, 0.1]} ]</code>: any site with this species is occupied by a Ti atom with 90 % probability, and has a vacancy with 10 % probability.</li> <li><code>[ {"name": "BaCa", "chemical_symbols": ["vacancy", "Ba", "Ca"], "concentration": [0.05, 0.45, 0.5], "mass": 88.5} ]</code>: any site with this species is occupied by a Ba atom with 45 % probability, a Ca atom with 50 % probability, and by a vacancy with 5 % probability. The mass of this site is (on average) 88.5 a.m.u.</li> <li><code>[ {"name": "C12", "chemical_symbols": ["C"], "concentration": [1.0], "mass": 12.0} ]</code>: any site with this species is occupied by a carbon isotope with mass 12.</li> <li><code>[ {"name": "C13", "chemical_symbols": ["C"], "concentration": [1.0], "mass": 13.0} ]</code>: any site with this species is occupied by a carbon isotope with mass 13.</li> <li><code>[ {"name": "CH3", "chemical_symbols": ["C"], "concentration": [1.0], "attached": ["H"], "nattached": [3]} ]</code>: any site with this species is occupied by a methyl group, -CH3, which is represented without specifying precise positions of the hydrogen atoms.</li> </ul> </li> </ul> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=optimade.models.structures.StructureResourceAttributes.species_at_sites class="doc doc-heading"> <code class="highlight language-python"><span class=n>species_at_sites</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span></code> <span class="doc doc-properties"> <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small> <small class="doc doc-property doc-property-required"><code>required</code></small> </span> <a href=#optimade.models.structures.StructureResourceAttributes.species_at_sites class=headerlink title="Permanent link">&para;</a></h3> <div class="doc doc-contents "> <p>Name of the species at each site (where values for sites are specified with the same order of the property <code>cartesian_site_positions</code>). The properties of the species are found in the property <code>species</code>.</p> <ul> <li> <p><strong>Type</strong>: list of strings.</p> </li> <li> <p><strong>Requirements/Conventions</strong>:</p> <ul> <li><strong>Support</strong>: SHOULD be supported by all implementations, i.e., SHOULD NOT be <code>null</code>.</li> <li><strong>Query</strong>: Support for queries on this property is OPTIONAL. If supported, filters MAY support only a subset of comparison operators.</li> <li>MUST have length equal to the number of sites in the structure (first dimension of the list property <code>cartesian_site_positions</code>).</li> <li>Each species name mentioned in the <code>species_at_sites</code> list MUST be described in the list property <code>species</code> (i.e. for each value in the <code>species_at_sites</code> list there MUST exist exactly one dictionary in the <code>species</code> list with the <code>name</code> attribute equal to the corresponding <code>species_at_sites</code> value).</li> <li>Each site MUST be associated only to a single species. <strong>Note</strong>: However, species can represent mixtures of atoms, and multiple species MAY be defined for the same chemical element. This latter case is useful when different atoms of the same type need to be grouped or distinguished, for instance in simulation codes to assign different initial spin states.</li> </ul> </li> <li> <p><strong>Examples</strong>:</p> <ul> <li><code>["Ti","O2"]</code> indicates that the first site is hosting a species labeled <code>"Ti"</code> and the second a species labeled <code>"O2"</code>.</li> <li><code>["Ac", "Ac", "Ag", "Ir"]</code> indicating the first two sites contains the <code>"Ac"</code> species, while the third and fourth sites contain the <code>"Ag"</code> and <code>"Ir"</code> species, respectively.</li> </ul> </li> </ul> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=optimade.models.structures.StructureResourceAttributes.structure_features class="doc doc-heading"> <code class="highlight language-python"><span class=n>structure_features</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=n>optimade</span><span class=o>.</span><span class=n>models</span><span class=o>.</span><span class=n>structures</span><span class=o>.</span><span class=n>StructureFeatures</span><span class=p>]</span></code> <span class="doc doc-properties"> <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small> <small class="doc doc-property doc-property-required"><code>required</code></small> </span> <a href=#optimade.models.structures.StructureResourceAttributes.structure_features class=headerlink title="Permanent link">&para;</a></h3> <div class="doc doc-contents "> <p>A list of strings that flag which special features are used by the structure.</p> <ul> <li> <p><strong>Type</strong>: list of strings</p> </li> <li> <p><strong>Requirements/Conventions</strong>:</p> <ul> <li><strong>Support</strong>: MUST be supported by all implementations, MUST NOT be <code>null</code>.</li> <li><strong>Query</strong>: MUST be a queryable property. Filters on the list MUST support all mandatory HAS-type queries. Filter operators for comparisons on the string components MUST support equality, support for other comparison operators are OPTIONAL.</li> <li>MUST be an empty list if no special features are used.</li> <li>MUST be sorted alphabetically.</li> <li>If a special feature listed below is used, the list MUST contain the corresponding string.</li> <li>If a special feature listed below is not used, the list MUST NOT contain the corresponding string.</li> <li><strong>List of strings used to indicate special structure features</strong>:<ul> <li><code>disorder</code>: this flag MUST be present if any one entry in the <code>species</code> list has a <code>chemical_symbols</code> list that is longer than 1 element.</li> <li><code>implicit_atoms</code>: this flag MUST be present if the structure contains atoms that are not assigned to sites via the property <code>species_at_sites</code> (e.g., because their positions are unknown). When this flag is present, the properties related to the chemical formula will likely not match the type and count of atoms represented by the <code>species_at_sites</code>, <code>species</code> and <code>assemblies</code> properties.</li> <li><code>site_attachments</code>: this flag MUST be present if any one entry in the <code>species</code> list includes <code>attached</code> and <code>nattached</code>.</li> <li><code>assemblies</code>: this flag MUST be present if the property <code>assemblies</code> is present.</li> </ul> </li> </ul> </li> <li> <p><strong>Examples</strong>: A structure having implicit atoms and using assemblies: <code>["assemblies", "implicit_atoms"]</code></p> </li> </ul> </div> </div> <div class="doc doc-object doc-class"> <h3 id=optimade.models.structures.StructureResourceAttributes.Config class="doc doc-heading"> <code> Config </code> <a href=#optimade.models.structures.StructureResourceAttributes.Config class=headerlink title="Permanent link">&para;</a></h3> <div class="doc doc-contents "> <div class="doc doc-children"> <div class="doc doc-object doc-method"> <h4 id=optimade.models.structures.StructureResourceAttributes.Config.schema_extra class="doc doc-heading"> <code class="highlight language-python"><span class=n>schema_extra</span><span class=p>(</span><span class=n>schema</span><span class=p>,</span> <span class=n>model</span><span class=p>)</span></code> <a href=#optimade.models.structures.StructureResourceAttributes.Config.schema_extra class=headerlink title="Permanent link">&para;</a></h4> <div class="doc doc-contents "> <p>Two things need to be added to the schema:</p> <ol> <li> <p>Constrained types in pydantic do not currently play nicely with "Required Optional" fields, i.e. fields must be specified but can be null. The two contrained list fields, <code>dimension_types</code> and <code>lattice_vectors</code>, are OPTIMADE 'SHOULD' fields, which means that they are allowed to be null.</p> </li> <li> <p>All OPTIMADE 'SHOULD' fields are allowed to be null, so we manually set them to be <code>nullable</code> according to the OpenAPI definition.</p> </li> </ol> <details class=quote> <summary>Source code in <code>optimade/models/structures.py</code></summary> <div class=highlight><pre><span></span><code><span class=k>def</span> <span class=nf>schema_extra</span><span class=p>(</span><span class=n>schema</span><span class=p>,</span> <span class=n>model</span><span class=p>):</span>
    <span class=sd>&quot;&quot;&quot;Two things need to be added to the schema:</span>

<span class=sd>    1. Constrained types in pydantic do not currently play nicely with</span>
<span class=sd>    &quot;Required Optional&quot; fields, i.e. fields must be specified but can be null.</span>
<span class=sd>    The two contrained list fields, `dimension_types` and `lattice_vectors`,</span>
<span class=sd>    are OPTIMADE &#39;SHOULD&#39; fields, which means that they are allowed to be null.</span>

<span class=sd>    2. All OPTIMADE &#39;SHOULD&#39; fields are allowed to be null, so we manually set them</span>
<span class=sd>    to be `nullable` according to the OpenAPI definition.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>schema</span><span class=p>[</span><span class=s2>&quot;required&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>insert</span><span class=p>(</span><span class=mi>7</span><span class=p>,</span> <span class=s2>&quot;dimension_types&quot;</span><span class=p>)</span>
    <span class=n>schema</span><span class=p>[</span><span class=s2>&quot;required&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>insert</span><span class=p>(</span><span class=mi>9</span><span class=p>,</span> <span class=s2>&quot;lattice_vectors&quot;</span><span class=p>)</span>

    <span class=n>nullable_props</span> <span class=o>=</span> <span class=p>(</span>
        <span class=n>prop</span>
        <span class=k>for</span> <span class=n>prop</span> <span class=ow>in</span> <span class=n>schema</span><span class=p>[</span><span class=s2>&quot;required&quot;</span><span class=p>]</span>
        <span class=k>if</span> <span class=n>schema</span><span class=p>[</span><span class=s2>&quot;properties&quot;</span><span class=p>][</span><span class=n>prop</span><span class=p>]</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;support&quot;</span><span class=p>)</span> <span class=o>==</span> <span class=n>SupportLevel</span><span class=o>.</span><span class=n>SHOULD</span>
    <span class=p>)</span>
    <span class=k>for</span> <span class=n>prop</span> <span class=ow>in</span> <span class=n>nullable_props</span><span class=p>:</span>
        <span class=n>schema</span><span class=p>[</span><span class=s2>&quot;properties&quot;</span><span class=p>][</span><span class=n>prop</span><span class=p>][</span><span class=s2>&quot;nullable&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=kc>True</span>
</code></pre></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-method"> <h3 id=optimade.models.structures.StructureResourceAttributes.check_anonymous_formula class="doc doc-heading"> <code class="highlight language-python"><span class=n>check_anonymous_formula</span><span class=p>(</span><span class=n>v</span><span class=p>)</span></code> <span class="doc doc-properties"> <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small> </span> <a href=#optimade.models.structures.StructureResourceAttributes.check_anonymous_formula class=headerlink title="Permanent link">&para;</a></h3> <div class="doc doc-contents "> <details class=quote> <summary>Source code in <code>optimade/models/structures.py</code></summary> <div class=highlight><pre><span></span><code><span class=nd>@validator</span><span class=p>(</span><span class=s2>&quot;chemical_formula_anonymous&quot;</span><span class=p>)</span>
<span class=k>def</span> <span class=nf>check_anonymous_formula</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>v</span><span class=p>):</span>
    <span class=k>if</span> <span class=n>v</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>v</span>

    <span class=n>elements</span> <span class=o>=</span> <span class=nb>tuple</span><span class=p>(</span><span class=n>re</span><span class=o>.</span><span class=n>findall</span><span class=p>(</span><span class=sa>r</span><span class=s2>&quot;[A-Z][a-z]*&quot;</span><span class=p>,</span> <span class=n>v</span><span class=p>))</span>
    <span class=n>numbers</span> <span class=o>=</span> <span class=p>[</span><span class=nb>int</span><span class=p>(</span><span class=n>n</span><span class=o>.</span><span class=n>strip</span><span class=p>())</span> <span class=k>for</span> <span class=n>n</span> <span class=ow>in</span> <span class=n>re</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=sa>r</span><span class=s2>&quot;[A-Z][a-z]*&quot;</span><span class=p>,</span> <span class=n>v</span><span class=p>)</span> <span class=k>if</span> <span class=n>n</span><span class=o>.</span><span class=n>strip</span><span class=p>()]</span>

    <span class=k>if</span> <span class=nb>any</span><span class=p>(</span><span class=n>n</span> <span class=o>==</span> <span class=mi>1</span> <span class=k>for</span> <span class=n>n</span> <span class=ow>in</span> <span class=n>numbers</span><span class=p>):</span>
        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
            <span class=sa>f</span><span class=s2>&quot;&#39;chemical_formula_anonymous&#39; </span><span class=si>{</span><span class=n>v</span><span class=si>}</span><span class=s2> must omit proportion &#39;1&#39;&quot;</span>
        <span class=p>)</span>

    <span class=n>expected_labels</span> <span class=o>=</span> <span class=n>ANONYMOUS_ELEMENTS</span><span class=p>[:</span> <span class=nb>len</span><span class=p>(</span><span class=n>elements</span><span class=p>)]</span>
    <span class=n>expected_numbers</span> <span class=o>=</span> <span class=nb>sorted</span><span class=p>(</span><span class=n>numbers</span><span class=p>,</span> <span class=n>reverse</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>

    <span class=k>if</span> <span class=n>expected_numbers</span> <span class=o>!=</span> <span class=n>numbers</span><span class=p>:</span>
        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
            <span class=sa>f</span><span class=s2>&quot;&#39;chemical_formula_anonymous&#39; </span><span class=si>{</span><span class=n>v</span><span class=si>}</span><span class=s2> has wrong order: elements with highest proportion should appear first: </span><span class=si>{</span><span class=n>numbers</span><span class=si>}</span><span class=s2> vs expected </span><span class=si>{</span><span class=n>expected_numbers</span><span class=si>}</span><span class=s2>&quot;</span>
        <span class=p>)</span>
    <span class=k>if</span> <span class=n>elements</span> <span class=o>!=</span> <span class=n>expected_labels</span><span class=p>:</span>
        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
            <span class=sa>f</span><span class=s2>&quot;&#39;chemical_formula_anonymous&#39; </span><span class=si>{</span><span class=n>v</span><span class=si>}</span><span class=s2> has wrong labels: </span><span class=si>{</span><span class=n>elements</span><span class=si>}</span><span class=s2> vs expected </span><span class=si>{</span><span class=n>expected_labels</span><span class=si>}</span><span class=s2>.&quot;</span>
        <span class=p>)</span>

    <span class=k>return</span> <span class=n>v</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-method"> <h3 id=optimade.models.structures.StructureResourceAttributes.check_ordered_formula class="doc doc-heading"> <code class="highlight language-python"><span class=n>check_ordered_formula</span><span class=p>(</span><span class=n>v</span><span class=p>,</span> <span class=n>field</span><span class=p>)</span></code> <span class="doc doc-properties"> <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small> </span> <a href=#optimade.models.structures.StructureResourceAttributes.check_ordered_formula class=headerlink title="Permanent link">&para;</a></h3> <div class="doc doc-contents "> <details class=quote> <summary>Source code in <code>optimade/models/structures.py</code></summary> <div class=highlight><pre><span></span><code><span class=nd>@validator</span><span class=p>(</span><span class=s2>&quot;chemical_formula_reduced&quot;</span><span class=p>,</span> <span class=s2>&quot;chemical_formula_hill&quot;</span><span class=p>)</span>
<span class=k>def</span> <span class=nf>check_ordered_formula</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>v</span><span class=p>,</span> <span class=n>field</span><span class=p>):</span>
    <span class=k>if</span> <span class=n>v</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>v</span>

    <span class=n>numbers</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>findall</span><span class=p>(</span><span class=sa>r</span><span class=s2>&quot;(\d+\.?)+&quot;</span><span class=p>,</span> <span class=n>v</span><span class=p>)</span>
    <span class=n>elements</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>findall</span><span class=p>(</span><span class=sa>r</span><span class=s2>&quot;[A-Z][a-z]?&quot;</span><span class=p>,</span> <span class=n>v</span><span class=p>)</span>
    <span class=n>expected_elements</span> <span class=o>=</span> <span class=nb>sorted</span><span class=p>(</span><span class=n>elements</span><span class=p>)</span>

    <span class=k>if</span> <span class=n>field</span><span class=o>.</span><span class=n>name</span> <span class=o>==</span> <span class=s2>&quot;chemical_formula_hill&quot;</span><span class=p>:</span>
        <span class=c1># Make sure C is first (and H is second, if present along with C).</span>
        <span class=k>if</span> <span class=s2>&quot;C&quot;</span> <span class=ow>in</span> <span class=n>expected_elements</span><span class=p>:</span>
            <span class=n>expected_elements</span> <span class=o>=</span> <span class=nb>sorted</span><span class=p>(</span>
                <span class=n>expected_elements</span><span class=p>,</span>
                <span class=n>key</span><span class=o>=</span><span class=k>lambda</span> <span class=n>elem</span><span class=p>:</span> <span class=p>{</span><span class=s2>&quot;C&quot;</span><span class=p>:</span> <span class=s2>&quot;0&quot;</span><span class=p>,</span> <span class=s2>&quot;H&quot;</span><span class=p>:</span> <span class=s2>&quot;1&quot;</span><span class=p>}</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>elem</span><span class=p>,</span> <span class=n>elem</span><span class=p>),</span>
            <span class=p>)</span>

    <span class=k>if</span> <span class=nb>any</span><span class=p>(</span><span class=n>elem</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>CHEMICAL_SYMBOLS</span> <span class=k>for</span> <span class=n>elem</span> <span class=ow>in</span> <span class=n>elements</span><span class=p>):</span>
        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
            <span class=sa>f</span><span class=s2>&quot;Cannot use unknown chemical symbols </span><span class=si>{</span><span class=p>[</span><span class=n>elem</span> <span class=k>for</span> <span class=n>elem</span> <span class=ow>in</span> <span class=n>elements</span> <span class=k>if</span> <span class=n>elem</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>CHEMICAL_SYMBOLS</span><span class=p>]</span><span class=si>}</span><span class=s2> in </span><span class=si>{</span><span class=n>field</span><span class=o>.</span><span class=n>name</span><span class=si>!r}</span><span class=s2>&quot;</span>
        <span class=p>)</span>

    <span class=k>if</span> <span class=s2>&quot;1&quot;</span> <span class=ow>in</span> <span class=n>numbers</span><span class=p>:</span>
        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
            <span class=sa>f</span><span class=s2>&quot;Must omit proportion &#39;1&#39; from formula </span><span class=si>{</span><span class=n>v</span><span class=si>}</span><span class=s2> in </span><span class=si>{</span><span class=n>field</span><span class=o>.</span><span class=n>name</span><span class=si>!r}</span><span class=s2>&quot;</span>
        <span class=p>)</span>
    <span class=k>if</span> <span class=n>expected_elements</span> <span class=o>!=</span> <span class=n>elements</span><span class=p>:</span>
        <span class=n>order</span> <span class=o>=</span> <span class=s2>&quot;Hill&quot;</span> <span class=k>if</span> <span class=n>field</span><span class=o>.</span><span class=n>name</span> <span class=o>==</span> <span class=s2>&quot;chemical_formula_hill&quot;</span> <span class=k>else</span> <span class=s2>&quot;alphabetical&quot;</span>
        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
            <span class=sa>f</span><span class=s2>&quot;Elements in </span><span class=si>{</span><span class=n>field</span><span class=o>.</span><span class=n>name</span><span class=si>!r}</span><span class=s2> must appear in </span><span class=si>{</span><span class=n>order</span><span class=si>}</span><span class=s2> order: </span><span class=si>{</span><span class=n>expected_elements</span><span class=si>}</span><span class=s2> not </span><span class=si>{</span><span class=n>elements</span><span class=si>}</span><span class=s2>.&quot;</span>
        <span class=p>)</span>

    <span class=k>return</span> <span class=n>v</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-method"> <h3 id=optimade.models.structures.StructureResourceAttributes.check_periodic_dimensions class="doc doc-heading"> <code class="highlight language-python"><span class=n>check_periodic_dimensions</span><span class=p>(</span><span class=n>v</span><span class=p>,</span> <span class=n>values</span><span class=p>)</span></code> <span class="doc doc-properties"> <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small> </span> <a href=#optimade.models.structures.StructureResourceAttributes.check_periodic_dimensions class=headerlink title="Permanent link">&para;</a></h3> <div class="doc doc-contents "> <details class=quote> <summary>Source code in <code>optimade/models/structures.py</code></summary> <div class=highlight><pre><span></span><code><span class=nd>@validator</span><span class=p>(</span><span class=s2>&quot;nperiodic_dimensions&quot;</span><span class=p>)</span>
<span class=k>def</span> <span class=nf>check_periodic_dimensions</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>v</span><span class=p>,</span> <span class=n>values</span><span class=p>):</span>
    <span class=k>if</span> <span class=n>v</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>v</span>

    <span class=k>if</span> <span class=n>values</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;dimension_types&quot;</span><span class=p>)</span> <span class=ow>and</span> <span class=n>v</span> <span class=o>!=</span> <span class=nb>sum</span><span class=p>(</span><span class=n>values</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;dimension_types&quot;</span><span class=p>)):</span>
        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
            <span class=sa>f</span><span class=s2>&quot;nperiodic_dimensions (</span><span class=si>{</span><span class=n>v</span><span class=si>}</span><span class=s2>) does not match expected value of </span><span class=si>{</span><span class=nb>sum</span><span class=p>(</span><span class=n>values</span><span class=p>[</span><span class=s1>&#39;dimension_types&#39;</span><span class=p>])</span><span class=si>}</span><span class=s2> &quot;</span>
            <span class=sa>f</span><span class=s2>&quot;from dimension_types (</span><span class=si>{</span><span class=n>values</span><span class=p>[</span><span class=s1>&#39;dimension_types&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>)&quot;</span>
        <span class=p>)</span>

    <span class=k>return</span> <span class=n>v</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-method"> <h3 id=optimade.models.structures.StructureResourceAttributes.element_must_be_chemical_symbol class="doc doc-heading"> <code class="highlight language-python"><span class=n>element_must_be_chemical_symbol</span><span class=p>(</span><span class=n>v</span><span class=p>)</span></code> <span class="doc doc-properties"> <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small> </span> <a href=#optimade.models.structures.StructureResourceAttributes.element_must_be_chemical_symbol class=headerlink title="Permanent link">&para;</a></h3> <div class="doc doc-contents "> <details class=quote> <summary>Source code in <code>optimade/models/structures.py</code></summary> <div class=highlight><pre><span></span><code><span class=nd>@validator</span><span class=p>(</span><span class=s2>&quot;elements&quot;</span><span class=p>,</span> <span class=n>each_item</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<span class=k>def</span> <span class=nf>element_must_be_chemical_symbol</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>v</span><span class=p>):</span>
    <span class=k>if</span> <span class=n>v</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>CHEMICAL_SYMBOLS</span><span class=p>:</span>
        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Only chemical symbols are allowed, you passed: </span><span class=si>{</span><span class=n>v</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>v</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-method"> <h3 id=optimade.models.structures.StructureResourceAttributes.elements_must_be_alphabetical class="doc doc-heading"> <code class="highlight language-python"><span class=n>elements_must_be_alphabetical</span><span class=p>(</span><span class=n>v</span><span class=p>)</span></code> <span class="doc doc-properties"> <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small> </span> <a href=#optimade.models.structures.StructureResourceAttributes.elements_must_be_alphabetical class=headerlink title="Permanent link">&para;</a></h3> <div class="doc doc-contents "> <details class=quote> <summary>Source code in <code>optimade/models/structures.py</code></summary> <div class=highlight><pre><span></span><code><span class=nd>@validator</span><span class=p>(</span><span class=s2>&quot;elements&quot;</span><span class=p>)</span>
<span class=k>def</span> <span class=nf>elements_must_be_alphabetical</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>v</span><span class=p>):</span>
    <span class=k>if</span> <span class=n>v</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>v</span>

    <span class=k>if</span> <span class=nb>sorted</span><span class=p>(</span><span class=n>v</span><span class=p>)</span> <span class=o>!=</span> <span class=n>v</span><span class=p>:</span>
        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;elements must be sorted alphabetically, but is: </span><span class=si>{</span><span class=n>v</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>v</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-method"> <h3 id=optimade.models.structures.StructureResourceAttributes.null_values_for_whole_vector class="doc doc-heading"> <code class="highlight language-python"><span class=n>null_values_for_whole_vector</span><span class=p>(</span><span class=n>v</span><span class=p>)</span></code> <span class="doc doc-properties"> <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small> </span> <a href=#optimade.models.structures.StructureResourceAttributes.null_values_for_whole_vector class=headerlink title="Permanent link">&para;</a></h3> <div class="doc doc-contents "> <details class=quote> <summary>Source code in <code>optimade/models/structures.py</code></summary> <div class=highlight><pre><span></span><code><span class=nd>@validator</span><span class=p>(</span><span class=s2>&quot;lattice_vectors&quot;</span><span class=p>)</span>
<span class=k>def</span> <span class=nf>null_values_for_whole_vector</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>v</span><span class=p>):</span>
    <span class=k>if</span> <span class=n>v</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>v</span>

    <span class=k>for</span> <span class=n>vector</span> <span class=ow>in</span> <span class=n>v</span><span class=p>:</span>
        <span class=k>if</span> <span class=kc>None</span> <span class=ow>in</span> <span class=n>vector</span> <span class=ow>and</span> <span class=nb>any</span><span class=p>((</span><span class=nb>isinstance</span><span class=p>(</span><span class=n>_</span><span class=p>,</span> <span class=nb>float</span><span class=p>)</span> <span class=k>for</span> <span class=n>_</span> <span class=ow>in</span> <span class=n>vector</span><span class=p>)):</span>
            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
                <span class=sa>f</span><span class=s2>&quot;A lattice vector MUST be either all `null` or all numbers (vector: </span><span class=si>{</span><span class=n>vector</span><span class=si>}</span><span class=s2>, all vectors: </span><span class=si>{</span><span class=n>v</span><span class=si>}</span><span class=s2>)&quot;</span>
            <span class=p>)</span>
    <span class=k>return</span> <span class=n>v</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-method"> <h3 id=optimade.models.structures.StructureResourceAttributes.ratios_must_sum_to_one class="doc doc-heading"> <code class="highlight language-python"><span class=n>ratios_must_sum_to_one</span><span class=p>(</span><span class=n>v</span><span class=p>)</span></code> <span class="doc doc-properties"> <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small> </span> <a href=#optimade.models.structures.StructureResourceAttributes.ratios_must_sum_to_one class=headerlink title="Permanent link">&para;</a></h3> <div class="doc doc-contents "> <details class=quote> <summary>Source code in <code>optimade/models/structures.py</code></summary> <div class=highlight><pre><span></span><code><span class=nd>@validator</span><span class=p>(</span><span class=s2>&quot;elements_ratios&quot;</span><span class=p>)</span>
<span class=k>def</span> <span class=nf>ratios_must_sum_to_one</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>v</span><span class=p>):</span>
    <span class=k>if</span> <span class=n>v</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>v</span>

    <span class=k>if</span> <span class=nb>abs</span><span class=p>(</span><span class=nb>sum</span><span class=p>(</span><span class=n>v</span><span class=p>)</span> <span class=o>-</span> <span class=mi>1</span><span class=p>)</span> <span class=o>&gt;</span> <span class=n>EPS</span><span class=p>:</span>
        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
            <span class=sa>f</span><span class=s2>&quot;elements_ratios MUST sum to 1 within floating point accuracy. It sums to: </span><span class=si>{</span><span class=nb>sum</span><span class=p>(</span><span class=n>v</span><span class=p>)</span><span class=si>}</span><span class=s2>&quot;</span>
        <span class=p>)</span>
    <span class=k>return</span> <span class=n>v</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-method"> <h3 id=optimade.models.structures.StructureResourceAttributes.required_if_dimension_types_has_one class="doc doc-heading"> <code class="highlight language-python"><span class=n>required_if_dimension_types_has_one</span><span class=p>(</span><span class=n>v</span><span class=p>,</span> <span class=n>values</span><span class=p>)</span></code> <span class="doc doc-properties"> <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small> </span> <a href=#optimade.models.structures.StructureResourceAttributes.required_if_dimension_types_has_one class=headerlink title="Permanent link">&para;</a></h3> <div class="doc doc-contents "> <details class=quote> <summary>Source code in <code>optimade/models/structures.py</code></summary> <div class=highlight><pre><span></span><code><span class=nd>@validator</span><span class=p>(</span><span class=s2>&quot;lattice_vectors&quot;</span><span class=p>,</span> <span class=n>always</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<span class=k>def</span> <span class=nf>required_if_dimension_types_has_one</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>v</span><span class=p>,</span> <span class=n>values</span><span class=p>):</span>
    <span class=k>if</span> <span class=n>v</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>v</span>

    <span class=k>if</span> <span class=n>values</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;dimension_types&quot;</span><span class=p>):</span>
        <span class=k>for</span> <span class=n>dim_type</span><span class=p>,</span> <span class=n>vector</span> <span class=ow>in</span> <span class=nb>zip</span><span class=p>(</span><span class=n>values</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;dimension_types&quot;</span><span class=p>,</span> <span class=p>(</span><span class=kc>None</span><span class=p>,)</span> <span class=o>*</span> <span class=mi>3</span><span class=p>),</span> <span class=n>v</span><span class=p>):</span>
            <span class=k>if</span> <span class=kc>None</span> <span class=ow>in</span> <span class=n>vector</span> <span class=ow>and</span> <span class=n>dim_type</span> <span class=o>==</span> <span class=n>Periodicity</span><span class=o>.</span><span class=n>PERIODIC</span><span class=o>.</span><span class=n>value</span><span class=p>:</span>
                <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
                    <span class=sa>f</span><span class=s2>&quot;Null entries in lattice vectors are only permitted when the corresponding dimension type is </span><span class=si>{</span><span class=n>Periodicity</span><span class=o>.</span><span class=n>APERIODIC</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2>. &quot;</span>
                    <span class=sa>f</span><span class=s2>&quot;Here: dimension_types = </span><span class=si>{</span><span class=nb>tuple</span><span class=p>(</span><span class=nb>getattr</span><span class=p>(</span><span class=n>_</span><span class=p>,</span> <span class=s1>&#39;value&#39;</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span> <span class=k>for</span> <span class=n>_</span> <span class=ow>in</span> <span class=n>values</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;dimension_types&#39;</span><span class=p>,</span> <span class=p>[]))</span><span class=si>}</span><span class=s2>, lattice_vectors = </span><span class=si>{</span><span class=n>v</span><span class=si>}</span><span class=s2>&quot;</span>
                <span class=p>)</span>

    <span class=k>return</span> <span class=n>v</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-method"> <h3 id=optimade.models.structures.StructureResourceAttributes.validate_nsites class="doc doc-heading"> <code class="highlight language-python"><span class=n>validate_nsites</span><span class=p>(</span><span class=n>v</span><span class=p>,</span> <span class=n>values</span><span class=p>)</span></code> <span class="doc doc-properties"> <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small> </span> <a href=#optimade.models.structures.StructureResourceAttributes.validate_nsites class=headerlink title="Permanent link">&para;</a></h3> <div class="doc doc-contents "> <details class=quote> <summary>Source code in <code>optimade/models/structures.py</code></summary> <div class=highlight><pre><span></span><code><span class=nd>@validator</span><span class=p>(</span><span class=s2>&quot;nsites&quot;</span><span class=p>)</span>
<span class=k>def</span> <span class=nf>validate_nsites</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>v</span><span class=p>,</span> <span class=n>values</span><span class=p>):</span>
    <span class=k>if</span> <span class=n>v</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>v</span>

    <span class=k>if</span> <span class=n>values</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;cartesian_site_positions&quot;</span><span class=p>)</span> <span class=ow>and</span> <span class=n>v</span> <span class=o>!=</span> <span class=nb>len</span><span class=p>(</span>
        <span class=n>values</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;cartesian_site_positions&quot;</span><span class=p>,</span> <span class=p>[])</span>
    <span class=p>):</span>
        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
            <span class=sa>f</span><span class=s2>&quot;nsites (value: </span><span class=si>{</span><span class=n>v</span><span class=si>}</span><span class=s2>) MUST equal length of cartesian_site_positions &quot;</span>
            <span class=sa>f</span><span class=s2>&quot;(value: </span><span class=si>{</span><span class=nb>len</span><span class=p>(</span><span class=n>values</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;cartesian_site_positions&#39;</span><span class=p>,</span> <span class=p>[]))</span><span class=si>}</span><span class=s2>)&quot;</span>
        <span class=p>)</span>
    <span class=k>return</span> <span class=n>v</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-method"> <h3 id=optimade.models.structures.StructureResourceAttributes.validate_species class="doc doc-heading"> <code class="highlight language-python"><span class=n>validate_species</span><span class=p>(</span><span class=n>v</span><span class=p>)</span></code> <span class="doc doc-properties"> <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small> </span> <a href=#optimade.models.structures.StructureResourceAttributes.validate_species class=headerlink title="Permanent link">&para;</a></h3> <div class="doc doc-contents "> <details class=quote> <summary>Source code in <code>optimade/models/structures.py</code></summary> <div class=highlight><pre><span></span><code><span class=nd>@validator</span><span class=p>(</span><span class=s2>&quot;species&quot;</span><span class=p>)</span>
<span class=k>def</span> <span class=nf>validate_species</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>v</span><span class=p>):</span>
    <span class=k>if</span> <span class=n>v</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>v</span>

    <span class=n>all_species</span> <span class=o>=</span> <span class=p>[</span><span class=n>_</span><span class=o>.</span><span class=n>name</span> <span class=k>for</span> <span class=n>_</span> <span class=ow>in</span> <span class=n>v</span><span class=p>]</span>
    <span class=n>unique_species</span> <span class=o>=</span> <span class=nb>set</span><span class=p>(</span><span class=n>all_species</span><span class=p>)</span>
    <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>all_species</span><span class=p>)</span> <span class=o>!=</span> <span class=nb>len</span><span class=p>(</span><span class=n>unique_species</span><span class=p>):</span>
        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
            <span class=sa>f</span><span class=s2>&quot;Species MUST be unique based on their &#39;name&#39;. Found species names: </span><span class=si>{</span><span class=n>all_species</span><span class=si>}</span><span class=s2>&quot;</span>
        <span class=p>)</span>

    <span class=k>return</span> <span class=n>v</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-method"> <h3 id=optimade.models.structures.StructureResourceAttributes.validate_species_at_sites class="doc doc-heading"> <code class="highlight language-python"><span class=n>validate_species_at_sites</span><span class=p>(</span><span class=n>v</span><span class=p>,</span> <span class=n>values</span><span class=p>)</span></code> <span class="doc doc-properties"> <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small> </span> <a href=#optimade.models.structures.StructureResourceAttributes.validate_species_at_sites class=headerlink title="Permanent link">&para;</a></h3> <div class="doc doc-contents "> <details class=quote> <summary>Source code in <code>optimade/models/structures.py</code></summary> <div class=highlight><pre><span></span><code><span class=nd>@validator</span><span class=p>(</span><span class=s2>&quot;species_at_sites&quot;</span><span class=p>)</span>
<span class=k>def</span> <span class=nf>validate_species_at_sites</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>v</span><span class=p>,</span> <span class=n>values</span><span class=p>):</span>
    <span class=k>if</span> <span class=n>v</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>v</span>

    <span class=k>if</span> <span class=n>values</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;nsites&quot;</span><span class=p>)</span> <span class=ow>and</span> <span class=nb>len</span><span class=p>(</span><span class=n>v</span><span class=p>)</span> <span class=o>!=</span> <span class=n>values</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;nsites&quot;</span><span class=p>):</span>
        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
            <span class=sa>f</span><span class=s2>&quot;Number of species_at_sites (value: </span><span class=si>{</span><span class=nb>len</span><span class=p>(</span><span class=n>v</span><span class=p>)</span><span class=si>}</span><span class=s2>) MUST equal number of sites &quot;</span>
            <span class=sa>f</span><span class=s2>&quot;(value: </span><span class=si>{</span><span class=n>values</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;nsites&#39;</span><span class=p>,</span> <span class=s1>&#39;Not specified&#39;</span><span class=p>)</span><span class=si>}</span><span class=s2>)&quot;</span>
        <span class=p>)</span>
    <span class=k>if</span> <span class=n>values</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;species&quot;</span><span class=p>):</span>
        <span class=n>all_species_names</span> <span class=o>=</span> <span class=p>{</span>
            <span class=nb>getattr</span><span class=p>(</span><span class=n>_</span><span class=p>,</span> <span class=s2>&quot;name&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span> <span class=k>for</span> <span class=n>_</span> <span class=ow>in</span> <span class=n>values</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;species&quot;</span><span class=p>,</span> <span class=p>[{}])</span>
        <span class=p>}</span>
        <span class=n>all_species_names</span> <span class=o>-=</span> <span class=p>{</span><span class=kc>None</span><span class=p>}</span>
        <span class=k>for</span> <span class=n>value</span> <span class=ow>in</span> <span class=n>v</span><span class=p>:</span>
            <span class=k>if</span> <span class=n>value</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>all_species_names</span><span class=p>:</span>
                <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
                    <span class=s2>&quot;species_at_sites MUST be represented by a species&#39; name, &quot;</span>
                    <span class=sa>f</span><span class=s2>&quot;but </span><span class=si>{</span><span class=n>value</span><span class=si>}</span><span class=s2> was not found in the list of species names: </span><span class=si>{</span><span class=n>all_species_names</span><span class=si>}</span><span class=s2>&quot;</span>
                <span class=p>)</span>
    <span class=k>return</span> <span class=n>v</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-method"> <h3 id=optimade.models.structures.StructureResourceAttributes.validate_structure_features class="doc doc-heading"> <code class="highlight language-python"><span class=n>validate_structure_features</span><span class=p>(</span><span class=n>v</span><span class=p>,</span> <span class=n>values</span><span class=p>)</span></code> <span class="doc doc-properties"> <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small> </span> <a href=#optimade.models.structures.StructureResourceAttributes.validate_structure_features class=headerlink title="Permanent link">&para;</a></h3> <div class="doc doc-contents "> <details class=quote> <summary>Source code in <code>optimade/models/structures.py</code></summary> <div class=highlight><pre><span></span><code><span class=nd>@validator</span><span class=p>(</span><span class=s2>&quot;structure_features&quot;</span><span class=p>,</span> <span class=n>always</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<span class=k>def</span> <span class=nf>validate_structure_features</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>v</span><span class=p>,</span> <span class=n>values</span><span class=p>):</span>
    <span class=k>if</span> <span class=p>[</span><span class=n>StructureFeatures</span><span class=p>(</span><span class=n>value</span><span class=p>)</span> <span class=k>for</span> <span class=n>value</span> <span class=ow>in</span> <span class=nb>sorted</span><span class=p>((</span><span class=n>_</span><span class=o>.</span><span class=n>value</span> <span class=k>for</span> <span class=n>_</span> <span class=ow>in</span> <span class=n>v</span><span class=p>))]</span> <span class=o>!=</span> <span class=n>v</span><span class=p>:</span>
        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
            <span class=sa>f</span><span class=s2>&quot;structure_features MUST be sorted alphabetically, given value: </span><span class=si>{</span><span class=n>v</span><span class=si>}</span><span class=s2>&quot;</span>
        <span class=p>)</span>

    <span class=c1># assemblies</span>
    <span class=k>if</span> <span class=n>values</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;assemblies&quot;</span><span class=p>)</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
        <span class=k>if</span> <span class=n>StructureFeatures</span><span class=o>.</span><span class=n>ASSEMBLIES</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>v</span><span class=p>:</span>
            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
                <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>StructureFeatures</span><span class=o>.</span><span class=n>ASSEMBLIES</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2> MUST be present, since the property of the same name is present&quot;</span>
            <span class=p>)</span>
    <span class=k>elif</span> <span class=n>StructureFeatures</span><span class=o>.</span><span class=n>ASSEMBLIES</span> <span class=ow>in</span> <span class=n>v</span><span class=p>:</span>
        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
            <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>StructureFeatures</span><span class=o>.</span><span class=n>ASSEMBLIES</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2> MUST NOT be present, &quot;</span>
            <span class=s2>&quot;since the property of the same name is not present&quot;</span>
        <span class=p>)</span>

    <span class=k>if</span> <span class=n>values</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;species&quot;</span><span class=p>):</span>
        <span class=c1># disorder</span>
        <span class=k>for</span> <span class=n>species</span> <span class=ow>in</span> <span class=n>values</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;species&quot;</span><span class=p>,</span> <span class=p>[]):</span>
            <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>species</span><span class=o>.</span><span class=n>chemical_symbols</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>1</span><span class=p>:</span>
                <span class=k>if</span> <span class=n>StructureFeatures</span><span class=o>.</span><span class=n>DISORDER</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>v</span><span class=p>:</span>
                    <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
                        <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>StructureFeatures</span><span class=o>.</span><span class=n>DISORDER</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2> MUST be present when any one entry in species &quot;</span>
                        <span class=s2>&quot;has a chemical_symbols list greater than one element&quot;</span>
                    <span class=p>)</span>
                <span class=k>break</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=k>if</span> <span class=n>StructureFeatures</span><span class=o>.</span><span class=n>DISORDER</span> <span class=ow>in</span> <span class=n>v</span><span class=p>:</span>
                <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
                    <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>StructureFeatures</span><span class=o>.</span><span class=n>DISORDER</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2> MUST NOT be present, since all species&#39; chemical_symbols &quot;</span>
                    <span class=s2>&quot;lists are equal to or less than one element&quot;</span>
                <span class=p>)</span>
        <span class=c1># site_attachments</span>
        <span class=k>for</span> <span class=n>species</span> <span class=ow>in</span> <span class=n>values</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;species&quot;</span><span class=p>,</span> <span class=p>[]):</span>
            <span class=c1># There is no need to also test &quot;nattached&quot;,</span>
            <span class=c1># since a Species validator makes sure either both are present or both are None.</span>
            <span class=k>if</span> <span class=nb>getattr</span><span class=p>(</span><span class=n>species</span><span class=p>,</span> <span class=s2>&quot;attached&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
                <span class=k>if</span> <span class=n>StructureFeatures</span><span class=o>.</span><span class=n>SITE_ATTACHMENTS</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>v</span><span class=p>:</span>
                    <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
                        <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>StructureFeatures</span><span class=o>.</span><span class=n>SITE_ATTACHMENTS</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2> MUST be present when any one entry &quot;</span>
                        <span class=s2>&quot;in species includes attached and nattached&quot;</span>
                    <span class=p>)</span>
                <span class=k>break</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=k>if</span> <span class=n>StructureFeatures</span><span class=o>.</span><span class=n>SITE_ATTACHMENTS</span> <span class=ow>in</span> <span class=n>v</span><span class=p>:</span>
                <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
                    <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>StructureFeatures</span><span class=o>.</span><span class=n>SITE_ATTACHMENTS</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2> MUST NOT be present, since no species includes &quot;</span>
                    <span class=s2>&quot;the attached and nattached fields&quot;</span>
                <span class=p>)</span>
        <span class=c1># implicit_atoms</span>
        <span class=n>species_names</span> <span class=o>=</span> <span class=p>[</span><span class=n>_</span><span class=o>.</span><span class=n>name</span> <span class=k>for</span> <span class=n>_</span> <span class=ow>in</span> <span class=n>values</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;species&quot;</span><span class=p>,</span> <span class=p>[])]</span>
        <span class=k>for</span> <span class=n>name</span> <span class=ow>in</span> <span class=n>species_names</span><span class=p>:</span>
            <span class=k>if</span> <span class=n>values</span><span class=o>.</span><span class=n>get</span><span class=p>(</span>
                <span class=s2>&quot;species_at_sites&quot;</span>
            <span class=p>)</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span> <span class=ow>and</span> <span class=n>name</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>values</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;species_at_sites&quot;</span><span class=p>,</span> <span class=p>[]):</span>
                <span class=k>if</span> <span class=n>StructureFeatures</span><span class=o>.</span><span class=n>IMPLICIT_ATOMS</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>v</span><span class=p>:</span>
                    <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
                        <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>StructureFeatures</span><span class=o>.</span><span class=n>IMPLICIT_ATOMS</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2> MUST be present when any one entry in species &quot;</span>
                        <span class=s2>&quot;is not represented in species_at_sites&quot;</span>
                    <span class=p>)</span>
                <span class=k>break</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=k>if</span> <span class=n>StructureFeatures</span><span class=o>.</span><span class=n>IMPLICIT_ATOMS</span> <span class=ow>in</span> <span class=n>v</span><span class=p>:</span>
                <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
                    <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>StructureFeatures</span><span class=o>.</span><span class=n>IMPLICIT_ATOMS</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2> MUST NOT be present, since all species are &quot;</span>
                    <span class=s2>&quot;represented in species_at_sites&quot;</span>
                <span class=p>)</span>

    <span class=k>return</span> <span class=n>v</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-method"> <h3 id=optimade.models.structures.StructureResourceAttributes.warn_on_missing_correlated_fields class="doc doc-heading"> <code class="highlight language-python"><span class=n>warn_on_missing_correlated_fields</span><span class=p>(</span><span class=n>values</span><span class=p>)</span></code> <span class="doc doc-properties"> <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small> </span> <a href=#optimade.models.structures.StructureResourceAttributes.warn_on_missing_correlated_fields class=headerlink title="Permanent link">&para;</a></h3> <div class="doc doc-contents "> <p>Emit warnings if a field takes a null value when a value was expected based on the value/nullity of another field.</p> <details class=quote> <summary>Source code in <code>optimade/models/structures.py</code></summary> <div class=highlight><pre><span></span><code><span class=nd>@root_validator</span><span class=p>(</span><span class=n>pre</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<span class=k>def</span> <span class=nf>warn_on_missing_correlated_fields</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>values</span><span class=p>):</span>
    <span class=sd>&quot;&quot;&quot;Emit warnings if a field takes a null value when a value</span>
<span class=sd>    was expected based on the value/nullity of another field.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>accumulated_warnings</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=k>for</span> <span class=n>field_set</span> <span class=ow>in</span> <span class=n>CORRELATED_STRUCTURE_FIELDS</span><span class=p>:</span>
        <span class=n>missing_fields</span> <span class=o>=</span> <span class=p>{</span><span class=n>f</span> <span class=k>for</span> <span class=n>f</span> <span class=ow>in</span> <span class=n>field_set</span> <span class=k>if</span> <span class=n>values</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>f</span><span class=p>)</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>}</span>
        <span class=k>if</span> <span class=n>missing_fields</span> <span class=ow>and</span> <span class=nb>len</span><span class=p>(</span><span class=n>missing_fields</span><span class=p>)</span> <span class=o>!=</span> <span class=nb>len</span><span class=p>(</span><span class=n>field_set</span><span class=p>):</span>
            <span class=n>accumulated_warnings</span> <span class=o>+=</span> <span class=p>[</span>
                <span class=sa>f</span><span class=s2>&quot;Structure with values </span><span class=si>{</span><span class=n>values</span><span class=si>}</span><span class=s2> is missing fields </span><span class=si>{</span><span class=n>missing_fields</span><span class=si>}</span><span class=s2> which are required if </span><span class=si>{</span><span class=n>field_set</span> <span class=o>-</span> <span class=n>missing_fields</span><span class=si>}</span><span class=s2> are present.&quot;</span>
            <span class=p>]</span>

    <span class=k>for</span> <span class=n>warn</span> <span class=ow>in</span> <span class=n>accumulated_warnings</span><span class=p>:</span>
        <span class=n>warnings</span><span class=o>.</span><span class=n>warn</span><span class=p>(</span><span class=n>warn</span><span class=p>,</span> <span class=n>MissingExpectedField</span><span class=p>)</span>

    <span class=k>return</span> <span class=n>values</span>
</code></pre></div> </details> </div> </div> </div> </div> </div> </div> </div> </div> </article> </div> </div> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../responses/ class="md-footer__link md-footer__link--prev" aria-label="Previous: responses" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> responses </div> </div> </a> <a href=../utils/ class="md-footer__link md-footer__link--next" aria-label="Next: utils" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> utils </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Built by the Materials-Consortia </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-footer-social> <a href=https://github.com/Materials-Consortia target=_blank rel=noopener title=github.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../../assets/javascripts/workers/search.8397ff9e.min.js", "version": null}</script> <script src=../../../assets/javascripts/bundle.f89c2efe.min.js></script> </body> </html>