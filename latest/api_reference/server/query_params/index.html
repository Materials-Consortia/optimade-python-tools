
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for the OPTIMADE Python tools">
      
      
      
        <link rel="canonical" href="https://www.optimade.org/optimade-python-tools/latest/api_reference/server/query_params/">
      
      
        <link rel="prev" href="../middleware/">
      
      
        <link rel="next" href="../schemas/">
      
      
      <link rel="icon" href="../../../images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.8">
    
    
      
        <title>query_params - OPTIMADE Python tools</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.4b4a2bd9.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.356b1318.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Karla:300,300i,400,400i,700,700i%7CShare+Tech+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Karla";--md-code-font:"Share Tech Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../../css/reference.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="red">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#query_params" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="OPTIMADE Python tools" class="md-header__button md-logo" aria-label="OPTIMADE Python tools" data-md-component="logo">
      
  <img src="https://matsci.org/uploads/default/original/2X/b/bd2f59b3bf14fb046b74538750699d7da4c19ac1.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            OPTIMADE Python tools
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              query_params
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="red"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="red"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
</form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/Materials-Consortia/optimade-python-tools" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    optimade-python-tools
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="OPTIMADE Python tools" class="md-nav__button md-logo" aria-label="OPTIMADE Python tools" data-md-component="logo">
      
  <img src="https://matsci.org/uploads/default/original/2X/b/bd2f59b3bf14fb046b74538750699d7da4c19ac1.svg" alt="logo">

    </a>
    OPTIMADE Python tools
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Materials-Consortia/optimade-python-tools" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    optimade-python-tools
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../../INSTALL/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../../configuration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Getting started
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Getting started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../getting_started/client/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Using the OPTIMADE client
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../getting_started/setting_up_an_api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Setting up an OPTIMADE API
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../getting_started/use_cases/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Example use cases
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Deployment
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Deployment
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../deployment/integrated/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Integrate OPTIMADE with an existing web application
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../deployment/container/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Run in a container (Docker)
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Concepts
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Concepts
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../concepts/validation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Validation of OPTIMADE APIs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../concepts/filtering/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Filter parsing and transforming
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../../CONTRIBUTING/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributing and getting help
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../../CHANGELOG/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Changelog
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../../all_models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OPTIMADE Data Models
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" checked>
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    API Reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../exceptions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    exceptions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    utils
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../warnings/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    warnings
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10_4" >
        
          
          <label class="md-nav__link" for="__nav_10_4" id="__nav_10_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    adapters
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_10_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10_4">
            <span class="md-nav__icon md-icon"></span>
            adapters
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../adapters/base/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    base
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../adapters/exceptions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    exceptions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../adapters/logger/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    logger
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../adapters/warnings/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    warnings
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10_4_5" >
        
          
          <label class="md-nav__link" for="__nav_10_4_5" id="__nav_10_4_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    references
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_10_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10_4_5">
            <span class="md-nav__icon md-icon"></span>
            references
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../adapters/references/adapter/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    adapter
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10_4_6" >
        
          
          <label class="md-nav__link" for="__nav_10_4_6" id="__nav_10_4_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    structures
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_10_4_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10_4_6">
            <span class="md-nav__icon md-icon"></span>
            structures
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../adapters/structures/adapter/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    adapter
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../adapters/structures/aiida/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    aiida
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../adapters/structures/ase/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ase
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../adapters/structures/cif/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    cif
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../adapters/structures/jarvis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    jarvis
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../adapters/structures/proteindatabank/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    proteindatabank
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../adapters/structures/pymatgen/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    pymatgen
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../adapters/structures/utils/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    utils
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10_5" >
        
          
          <label class="md-nav__link" for="__nav_10_5" id="__nav_10_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    client
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_10_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10_5">
            <span class="md-nav__icon md-icon"></span>
            client
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../client/cli/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    cli
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../client/client/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    client
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../client/utils/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    utils
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10_6" >
        
          
          <label class="md-nav__link" for="__nav_10_6" id="__nav_10_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    filterparser
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_10_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10_6">
            <span class="md-nav__icon md-icon"></span>
            filterparser
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../filterparser/lark_parser/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    lark_parser
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10_7" >
        
          
          <label class="md-nav__link" for="__nav_10_7" id="__nav_10_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    filtertransformers
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_10_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10_7">
            <span class="md-nav__icon md-icon"></span>
            filtertransformers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../filtertransformers/base_transformer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    base_transformer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../filtertransformers/elasticsearch/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    elasticsearch
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../filtertransformers/mongo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mongo
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10_8" >
        
          
          <label class="md-nav__link" for="__nav_10_8" id="__nav_10_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    models
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_10_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10_8">
            <span class="md-nav__icon md-icon"></span>
            models
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../models/baseinfo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    baseinfo
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../models/entries/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    entries
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../models/index_metadb/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    index_metadb
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../models/jsonapi/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    jsonapi
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../models/links/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    links
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../models/optimade_json/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    optimade_json
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../models/references/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    references
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../models/responses/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    responses
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../models/structures/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    structures
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../models/types/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    types
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../models/utils/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    utils
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10_9" checked>
        
          
          <label class="md-nav__link" for="__nav_10_9" id="__nav_10_9_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    server
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_10_9_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_10_9">
            <span class="md-nav__icon md-icon"></span>
            server
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    config
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../exception_handlers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    exception_handlers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../exceptions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    exceptions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../logger/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    logger
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../main/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    main
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../main_index/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    main_index
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../middleware/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    middleware
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    query_params
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    query_params
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#optimade.server.query_params" class="md-nav__link">
    query_params
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#optimade.server.query_params.CONFIG" class="md-nav__link">
    CONFIG
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#optimade.server.query_params.BadRequest" class="md-nav__link">
    BadRequest
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#optimade.server.query_params.BaseQueryParams" class="md-nav__link">
    BaseQueryParams
  </a>
  
    <nav class="md-nav" aria-label="BaseQueryParams">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#optimade.server.query_params.BaseQueryParams.check_params" class="md-nav__link">
    check_params()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#optimade.server.query_params.BaseResourceMapper" class="md-nav__link">
    BaseResourceMapper
  </a>
  
    <nav class="md-nav" aria-label="BaseResourceMapper">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#optimade.server.query_params.BaseResourceMapper.ALL_ATTRIBUTES" class="md-nav__link">
    ALL_ATTRIBUTES()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optimade.server.query_params.BaseResourceMapper.ENDPOINT" class="md-nav__link">
    ENDPOINT()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optimade.server.query_params.BaseResourceMapper.ENTRY_RESOURCE_ATTRIBUTES" class="md-nav__link">
    ENTRY_RESOURCE_ATTRIBUTES()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optimade.server.query_params.BaseResourceMapper.SUPPORTED_PREFIXES" class="md-nav__link">
    SUPPORTED_PREFIXES()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optimade.server.query_params.BaseResourceMapper.alias_for" class="md-nav__link">
    alias_for()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optimade.server.query_params.BaseResourceMapper.alias_of" class="md-nav__link">
    alias_of()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optimade.server.query_params.BaseResourceMapper.all_aliases" class="md-nav__link">
    all_aliases()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optimade.server.query_params.BaseResourceMapper.all_length_aliases" class="md-nav__link">
    all_length_aliases()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optimade.server.query_params.BaseResourceMapper.deserialize" class="md-nav__link">
    deserialize()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optimade.server.query_params.BaseResourceMapper.get_backend_field" class="md-nav__link">
    get_backend_field()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optimade.server.query_params.BaseResourceMapper.get_optimade_field" class="md-nav__link">
    get_optimade_field()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optimade.server.query_params.BaseResourceMapper.get_required_fields" class="md-nav__link">
    get_required_fields()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optimade.server.query_params.BaseResourceMapper.length_alias_for" class="md-nav__link">
    length_alias_for()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optimade.server.query_params.BaseResourceMapper.map_back" class="md-nav__link">
    map_back()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#optimade.server.query_params.EntryListingQueryParams" class="md-nav__link">
    EntryListingQueryParams
  </a>
  
    <nav class="md-nav" aria-label="EntryListingQueryParams">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#optimade.server.query_params.EntryListingQueryParams.check_params" class="md-nav__link">
    check_params()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#optimade.server.query_params.QueryParamNotUsed" class="md-nav__link">
    QueryParamNotUsed
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#optimade.server.query_params.SingleEntryQueryParams" class="md-nav__link">
    SingleEntryQueryParams
  </a>
  
    <nav class="md-nav" aria-label="SingleEntryQueryParams">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#optimade.server.query_params.SingleEntryQueryParams.check_params" class="md-nav__link">
    check_params()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#optimade.server.query_params.UnknownProviderQueryParameter" class="md-nav__link">
    UnknownProviderQueryParameter
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../schemas/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    schemas
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../warnings/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    warnings
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10_9_11" >
        
          
          <label class="md-nav__link" for="__nav_10_9_11" id="__nav_10_9_11_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    entry_collections
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_10_9_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10_9_11">
            <span class="md-nav__icon md-icon"></span>
            entry_collections
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../entry_collections/elasticsearch/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    elasticsearch
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../entry_collections/entry_collections/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    entry_collections
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../entry_collections/mongo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mongo
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10_9_12" >
        
          
          <label class="md-nav__link" for="__nav_10_9_12" id="__nav_10_9_12_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    mappers
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_10_9_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10_9_12">
            <span class="md-nav__icon md-icon"></span>
            mappers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../mappers/entries/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    entries
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../mappers/links/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    links
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../mappers/references/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    references
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../mappers/structures/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    structures
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10_9_13" >
        
          
          <label class="md-nav__link" for="__nav_10_9_13" id="__nav_10_9_13_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    routers
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_10_9_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10_9_13">
            <span class="md-nav__icon md-icon"></span>
            routers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../routers/index_info/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    index_info
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../routers/info/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    info
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../routers/landing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    landing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../routers/links/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    links
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../routers/references/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    references
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../routers/structures/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    structures
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../routers/utils/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    utils
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../routers/versions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    versions
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10_10" >
        
          
          <label class="md-nav__link" for="__nav_10_10" id="__nav_10_10_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    validator
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_10_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10_10">
            <span class="md-nav__icon md-icon"></span>
            validator
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../validator/config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    config
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../validator/utils/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    utils
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../validator/validator/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    validator
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#optimade.server.query_params" class="md-nav__link">
    query_params
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#optimade.server.query_params.CONFIG" class="md-nav__link">
    CONFIG
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#optimade.server.query_params.BadRequest" class="md-nav__link">
    BadRequest
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#optimade.server.query_params.BaseQueryParams" class="md-nav__link">
    BaseQueryParams
  </a>
  
    <nav class="md-nav" aria-label="BaseQueryParams">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#optimade.server.query_params.BaseQueryParams.check_params" class="md-nav__link">
    check_params()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#optimade.server.query_params.BaseResourceMapper" class="md-nav__link">
    BaseResourceMapper
  </a>
  
    <nav class="md-nav" aria-label="BaseResourceMapper">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#optimade.server.query_params.BaseResourceMapper.ALL_ATTRIBUTES" class="md-nav__link">
    ALL_ATTRIBUTES()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optimade.server.query_params.BaseResourceMapper.ENDPOINT" class="md-nav__link">
    ENDPOINT()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optimade.server.query_params.BaseResourceMapper.ENTRY_RESOURCE_ATTRIBUTES" class="md-nav__link">
    ENTRY_RESOURCE_ATTRIBUTES()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optimade.server.query_params.BaseResourceMapper.SUPPORTED_PREFIXES" class="md-nav__link">
    SUPPORTED_PREFIXES()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optimade.server.query_params.BaseResourceMapper.alias_for" class="md-nav__link">
    alias_for()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optimade.server.query_params.BaseResourceMapper.alias_of" class="md-nav__link">
    alias_of()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optimade.server.query_params.BaseResourceMapper.all_aliases" class="md-nav__link">
    all_aliases()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optimade.server.query_params.BaseResourceMapper.all_length_aliases" class="md-nav__link">
    all_length_aliases()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optimade.server.query_params.BaseResourceMapper.deserialize" class="md-nav__link">
    deserialize()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optimade.server.query_params.BaseResourceMapper.get_backend_field" class="md-nav__link">
    get_backend_field()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optimade.server.query_params.BaseResourceMapper.get_optimade_field" class="md-nav__link">
    get_optimade_field()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optimade.server.query_params.BaseResourceMapper.get_required_fields" class="md-nav__link">
    get_required_fields()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optimade.server.query_params.BaseResourceMapper.length_alias_for" class="md-nav__link">
    length_alias_for()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optimade.server.query_params.BaseResourceMapper.map_back" class="md-nav__link">
    map_back()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#optimade.server.query_params.EntryListingQueryParams" class="md-nav__link">
    EntryListingQueryParams
  </a>
  
    <nav class="md-nav" aria-label="EntryListingQueryParams">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#optimade.server.query_params.EntryListingQueryParams.check_params" class="md-nav__link">
    check_params()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#optimade.server.query_params.QueryParamNotUsed" class="md-nav__link">
    QueryParamNotUsed
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#optimade.server.query_params.SingleEntryQueryParams" class="md-nav__link">
    SingleEntryQueryParams
  </a>
  
    <nav class="md-nav" aria-label="SingleEntryQueryParams">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#optimade.server.query_params.SingleEntryQueryParams.check_params" class="md-nav__link">
    check_params()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#optimade.server.query_params.UnknownProviderQueryParameter" class="md-nav__link">
    UnknownProviderQueryParameter
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="query_params">query_params<a class="headerlink" href="#query_params" title="Permanent link">&para;</a></h1>


<div class="doc doc-object doc-module">



<a id="optimade.server.query_params"></a>
  <div class="doc doc-contents first">

  

  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">




<h2 id="optimade.server.query_params.CONFIG" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">CONFIG</span><span class="p">:</span> <span class="n">ServerConfig</span> <span class="o">=</span> <span class="n">ServerConfig</span><span class="p">()</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

<a href="#optimade.server.query_params.CONFIG" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>This singleton loads the config from a hierarchy of sources (see
<a class="autorefs autorefs-internal" href="../config/#optimade.server.config.ServerConfig.settings_customise_sources"><code>customise_sources</code></a>)
and makes it importable in the server code.</p>
  </div>

</div>


<div class="doc doc-object doc-class">




<h2 id="optimade.server.query_params.BadRequest" class="doc doc-heading">
          <code>BadRequest</code>


<a href="#optimade.server.query_params.BadRequest" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="optimade.exceptions.OptimadeHTTPException" href="../../exceptions/#optimade.exceptions.OptimadeHTTPException">OptimadeHTTPException</a></code></p>

  
      <p>400 Bad Request</p>

            <details class="quote">
              <summary>Source code in <code>optimade/exceptions.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">BadRequest</span><span class="p">(</span><span class="n">OptimadeHTTPException</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;400 Bad Request&quot;&quot;&quot;</span>

    <span class="n">status_code</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">400</span>
    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Bad Request&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div>

<div class="doc doc-object doc-class">




<h2 id="optimade.server.query_params.BaseQueryParams" class="doc doc-heading">
          <code>BaseQueryParams</code>


<a href="#optimade.server.query_params.BaseQueryParams" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><span title="abc.ABC">ABC</span></code></p>

  
      <p>A base class for query parameters that provides validation via the <code>check_params</code> method.</p>



  <p><strong>Attributes:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>unsupported_params</code></td>
          <td>
                <code>list[str]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Any string parameter listed here will raise a warning when passed to
the check_params methods. Useful for disabling optional OPTIMADE query parameters that
are not implemented by the server, e.g., cursor-based pagination.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

            <details class="quote">
              <summary>Source code in <code>optimade/server/query_params.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">BaseQueryParams</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A base class for query parameters that provides validation via the `check_params` method.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        unsupported_params: Any string parameter listed here will raise a warning when passed to</span>
<span class="sd">            the check_params methods. Useful for disabling optional OPTIMADE query parameters that</span>
<span class="sd">            are not implemented by the server, e.g., cursor-based pagination.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">unsupported_params</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="nf">check_params</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query_params</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This method checks whether all the query parameters that are specified</span>
<span class="sd">        in the URL string are implemented in the relevant `*QueryParams` class.</span>

<span class="sd">        This method handles four cases:</span>

<span class="sd">        * If a query parameter is passed that is not defined in the relevant `*QueryParams` class,</span>
<span class="sd">          and it is not prefixed with a known provider prefix, then a `BadRequest` is raised.</span>
<span class="sd">        * If a query parameter is passed that is not defined in the relevant `*QueryParams` class,</span>
<span class="sd">          that is prefixed with a known provider prefix, then the parameter is silently ignored</span>
<span class="sd">        * If a query parameter is passed that is not defined in the relevant `*QueryParams` class,</span>
<span class="sd">          that is prefixed with an unknown provider prefix, then a `UnknownProviderQueryParameter`</span>
<span class="sd">          warning is emitted.</span>
<span class="sd">        * If a query parameter is passed that is on the `unsupported_params` list for the inherited</span>
<span class="sd">          class, then a `QueryParamNotUsed` warning is emitted.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            query_params: An iterable of the request&#39;s string query parameters.</span>

<span class="sd">        Raises:</span>
<span class="sd">            `BadRequest`: if the query parameter was not found in the relevant class, or if it</span>
<span class="sd">                does not have a valid prefix.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">CONFIG</span><span class="p">,</span> <span class="s2">&quot;validate_query_parameters&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
            <span class="k">return</span>
        <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">warnings</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">unsupported_warnings</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">param</span> <span class="ow">in</span> <span class="n">query_params</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">param</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">unsupported_params</span><span class="p">:</span>
                <span class="n">unsupported_warnings</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">param</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">param</span><span class="p">):</span>
                <span class="n">split_param</span> <span class="o">=</span> <span class="n">param</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">param</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">split_param</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
                    <span class="n">prefix</span> <span class="o">=</span> <span class="n">split_param</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">prefix</span> <span class="ow">in</span> <span class="n">BaseResourceMapper</span><span class="o">.</span><span class="n">SUPPORTED_PREFIXES</span><span class="p">:</span>
                        <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">param</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="n">prefix</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">BaseResourceMapper</span><span class="o">.</span><span class="n">KNOWN_PROVIDER_PREFIXES</span><span class="p">:</span>
                        <span class="n">warnings</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">param</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">param</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">warnings</span><span class="p">:</span>
            <span class="n">warn</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;The query parameter(s) &#39;</span><span class="si">{</span><span class="n">warnings</span><span class="si">}</span><span class="s2">&#39; are unrecognised and have been ignored.&quot;</span><span class="p">,</span>
                <span class="n">UnknownProviderQueryParameter</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">unsupported_warnings</span><span class="p">:</span>
            <span class="n">warn</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;The query parameter(s) &#39;</span><span class="si">{</span><span class="n">unsupported_warnings</span><span class="si">}</span><span class="s2">&#39; are not supported by this server and have been ignored.&quot;</span><span class="p">,</span>
                <span class="n">QueryParamNotUsed</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">errors</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">BadRequest</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;The query parameter(s) &#39;</span><span class="si">{</span><span class="n">errors</span><span class="si">}</span><span class="s2">&#39; are not recognised by this endpoint.&quot;</span>
            <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">




<h3 id="optimade.server.query_params.BaseQueryParams.check_params" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">check_params</span><span class="p">(</span><span class="n">query_params</span><span class="p">)</span></code>

<a href="#optimade.server.query_params.BaseQueryParams.check_params" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>This method checks whether all the query parameters that are specified
in the URL string are implemented in the relevant <code>*QueryParams</code> class.</p>
<p>This method handles four cases:</p>
<ul>
<li>If a query parameter is passed that is not defined in the relevant <code>*QueryParams</code> class,
  and it is not prefixed with a known provider prefix, then a <code>BadRequest</code> is raised.</li>
<li>If a query parameter is passed that is not defined in the relevant <code>*QueryParams</code> class,
  that is prefixed with a known provider prefix, then the parameter is silently ignored</li>
<li>If a query parameter is passed that is not defined in the relevant <code>*QueryParams</code> class,
  that is prefixed with an unknown provider prefix, then a <code>UnknownProviderQueryParameter</code>
  warning is emitted.</li>
<li>If a query parameter is passed that is on the <code>unsupported_params</code> list for the inherited
  class, then a <code>QueryParamNotUsed</code> warning is emitted.</li>
</ul>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>query_params</code></td>
          <td>
                <code><span title="collections.abc.Iterable">Iterable</span>[str]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>An iterable of the request's string query parameters.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Raises:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>`BadRequest`</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>if the query parameter was not found in the relevant class, or if it
does not have a valid prefix.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>optimade/server/query_params.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">check_params</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query_params</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;This method checks whether all the query parameters that are specified</span>
<span class="sd">    in the URL string are implemented in the relevant `*QueryParams` class.</span>

<span class="sd">    This method handles four cases:</span>

<span class="sd">    * If a query parameter is passed that is not defined in the relevant `*QueryParams` class,</span>
<span class="sd">      and it is not prefixed with a known provider prefix, then a `BadRequest` is raised.</span>
<span class="sd">    * If a query parameter is passed that is not defined in the relevant `*QueryParams` class,</span>
<span class="sd">      that is prefixed with a known provider prefix, then the parameter is silently ignored</span>
<span class="sd">    * If a query parameter is passed that is not defined in the relevant `*QueryParams` class,</span>
<span class="sd">      that is prefixed with an unknown provider prefix, then a `UnknownProviderQueryParameter`</span>
<span class="sd">      warning is emitted.</span>
<span class="sd">    * If a query parameter is passed that is on the `unsupported_params` list for the inherited</span>
<span class="sd">      class, then a `QueryParamNotUsed` warning is emitted.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        query_params: An iterable of the request&#39;s string query parameters.</span>

<span class="sd">    Raises:</span>
<span class="sd">        `BadRequest`: if the query parameter was not found in the relevant class, or if it</span>
<span class="sd">            does not have a valid prefix.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">CONFIG</span><span class="p">,</span> <span class="s2">&quot;validate_query_parameters&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
        <span class="k">return</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">warnings</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">unsupported_warnings</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">param</span> <span class="ow">in</span> <span class="n">query_params</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">param</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">unsupported_params</span><span class="p">:</span>
            <span class="n">unsupported_warnings</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">param</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">param</span><span class="p">):</span>
            <span class="n">split_param</span> <span class="o">=</span> <span class="n">param</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">param</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">split_param</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">prefix</span> <span class="o">=</span> <span class="n">split_param</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">prefix</span> <span class="ow">in</span> <span class="n">BaseResourceMapper</span><span class="o">.</span><span class="n">SUPPORTED_PREFIXES</span><span class="p">:</span>
                    <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">param</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">prefix</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">BaseResourceMapper</span><span class="o">.</span><span class="n">KNOWN_PROVIDER_PREFIXES</span><span class="p">:</span>
                    <span class="n">warnings</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">param</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">param</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">warnings</span><span class="p">:</span>
        <span class="n">warn</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;The query parameter(s) &#39;</span><span class="si">{</span><span class="n">warnings</span><span class="si">}</span><span class="s2">&#39; are unrecognised and have been ignored.&quot;</span><span class="p">,</span>
            <span class="n">UnknownProviderQueryParameter</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="n">unsupported_warnings</span><span class="p">:</span>
        <span class="n">warn</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;The query parameter(s) &#39;</span><span class="si">{</span><span class="n">unsupported_warnings</span><span class="si">}</span><span class="s2">&#39; are not supported by this server and have been ignored.&quot;</span><span class="p">,</span>
            <span class="n">QueryParamNotUsed</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="n">errors</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">BadRequest</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;The query parameter(s) &#39;</span><span class="si">{</span><span class="n">errors</span><span class="si">}</span><span class="s2">&#39; are not recognised by this endpoint.&quot;</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">




<h2 id="optimade.server.query_params.BaseResourceMapper" class="doc doc-heading">
          <code>BaseResourceMapper</code>


<a href="#optimade.server.query_params.BaseResourceMapper" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">

  
      <p>Generic Resource Mapper that defines and performs the mapping
between objects in the database and the resource objects defined by
the specification.</p>



  <p><strong>Attributes:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>ALIASES</code></td>
          <td>
                <code>tuple[tuple[str, str], ...]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a tuple of aliases between
OPTIMADE field names and the field names in the database ,
e.g. <code>(("elements", "custom_elements_field"))</code>.</p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code>LENGTH_ALIASES</code></td>
          <td>
                <code>tuple[tuple[str, str], ...]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a tuple of aliases between
a field name and another field that defines its length, to be used
when querying, e.g. <code>(("elements", "nelements"))</code>.
e.g. <code>(("elements", "custom_elements_field"))</code>.</p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code>ENTRY_RESOURCE_CLASS</code></td>
          <td>
                <code>type[<a class="autorefs autorefs-internal" title="optimade.models.entries.EntryResource" href="../../models/entries/#optimade.models.entries.EntryResource">EntryResource</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The entry type that this mapper corresponds to.</p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code>PROVIDER_FIELDS</code></td>
          <td>
                <code>tuple[str, ...]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a tuple of extra field names that this
mapper should support when querying with the database prefix.</p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code>TOP_LEVEL_NON_ATTRIBUTES_FIELDS</code></td>
          <td>
                <code>set[str]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the set of top-level
field names common to all endpoints.</p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code>SUPPORTED_PREFIXES</code></td>
          <td>
                <code>set[str]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The set of prefixes registered by this mapper.</p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code>ALL_ATTRIBUTES</code></td>
          <td>
                <code>set[str]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The set of attributes defined across the entry
resource class and the server configuration.</p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code>ENTRY_RESOURCE_ATTRIBUTES</code></td>
          <td>
                <code>dict[str, <span title="typing.Any">Any</span>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A dictionary of attributes and their definitions
defined by the schema of the entry resource class.</p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code>ENDPOINT</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The expected endpoint name for this resource, as defined by
the <code>type</code> in the schema of the entry resource class.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

            <details class="quote">
              <summary>Source code in <code>optimade/server/mappers/entries.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">BaseResourceMapper</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generic Resource Mapper that defines and performs the mapping</span>
<span class="sd">    between objects in the database and the resource objects defined by</span>
<span class="sd">    the specification.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        ALIASES: a tuple of aliases between</span>
<span class="sd">            OPTIMADE field names and the field names in the database ,</span>
<span class="sd">            e.g. `((&quot;elements&quot;, &quot;custom_elements_field&quot;))`.</span>
<span class="sd">        LENGTH_ALIASES: a tuple of aliases between</span>
<span class="sd">            a field name and another field that defines its length, to be used</span>
<span class="sd">            when querying, e.g. `((&quot;elements&quot;, &quot;nelements&quot;))`.</span>
<span class="sd">            e.g. `((&quot;elements&quot;, &quot;custom_elements_field&quot;))`.</span>
<span class="sd">        ENTRY_RESOURCE_CLASS: The entry type that this mapper corresponds to.</span>
<span class="sd">        PROVIDER_FIELDS: a tuple of extra field names that this</span>
<span class="sd">            mapper should support when querying with the database prefix.</span>
<span class="sd">        TOP_LEVEL_NON_ATTRIBUTES_FIELDS: the set of top-level</span>
<span class="sd">            field names common to all endpoints.</span>
<span class="sd">        SUPPORTED_PREFIXES: The set of prefixes registered by this mapper.</span>
<span class="sd">        ALL_ATTRIBUTES: The set of attributes defined across the entry</span>
<span class="sd">            resource class and the server configuration.</span>
<span class="sd">        ENTRY_RESOURCE_ATTRIBUTES: A dictionary of attributes and their definitions</span>
<span class="sd">            defined by the schema of the entry resource class.</span>
<span class="sd">        ENDPOINT: The expected endpoint name for this resource, as defined by</span>
<span class="sd">            the `type` in the schema of the entry resource class.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="kn">from</span> <span class="nn">optimade.server.data</span> <span class="kn">import</span> <span class="n">providers</span> <span class="k">as</span> <span class="n">PROVIDERS</span>  <span class="c1"># type: ignore</span>
    <span class="k">except</span> <span class="p">(</span><span class="ne">ImportError</span><span class="p">,</span> <span class="ne">ModuleNotFoundError</span><span class="p">):</span>
        <span class="n">PROVIDERS</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="n">KNOWN_PROVIDER_PREFIXES</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">prov</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">prov</span> <span class="ow">in</span> <span class="n">PROVIDERS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="p">[])</span>
    <span class="p">}</span>
    <span class="n">ALIASES</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="o">...</span><span class="p">]</span> <span class="o">=</span> <span class="p">()</span>
    <span class="n">LENGTH_ALIASES</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="o">...</span><span class="p">]</span> <span class="o">=</span> <span class="p">()</span>
    <span class="n">PROVIDER_FIELDS</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span> <span class="o">=</span> <span class="p">()</span>
    <span class="n">ENTRY_RESOURCE_CLASS</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="n">EntryResource</span><span class="p">]</span> <span class="o">=</span> <span class="n">EntryResource</span>
    <span class="n">RELATIONSHIP_ENTRY_TYPES</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;references&quot;</span><span class="p">,</span> <span class="s2">&quot;structures&quot;</span><span class="p">}</span>
    <span class="n">TOP_LEVEL_NON_ATTRIBUTES_FIELDS</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="s2">&quot;relationships&quot;</span><span class="p">,</span> <span class="s2">&quot;links&quot;</span><span class="p">}</span>

    <span class="nd">@classmethod</span>
    <span class="nd">@lru_cache</span><span class="p">(</span><span class="n">maxsize</span><span class="o">=</span><span class="n">NUM_ENTRY_TYPES</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">all_aliases</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns all of the associated aliases for this entry type,</span>
<span class="sd">        including those defined by the server config. The first member</span>
<span class="sd">        of each tuple is the OPTIMADE-compliant field name, the second</span>
<span class="sd">        is the backend-specific field name.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A tuple of alias tuples.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">optimade.server.config</span> <span class="kn">import</span> <span class="n">CONFIG</span>

        <span class="k">return</span> <span class="p">(</span>
            <span class="nb">tuple</span><span class="p">(</span>
                <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;_</span><span class="si">{</span><span class="n">CONFIG</span><span class="o">.</span><span class="n">provider</span><span class="o">.</span><span class="n">prefix</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">field</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">field</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">field</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)</span>
                <span class="k">else</span> <span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="n">field</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">CONFIG</span><span class="o">.</span><span class="n">provider_fields</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">ENDPOINT</span><span class="p">,</span> <span class="p">[])</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="o">+</span> <span class="nb">tuple</span><span class="p">(</span>
                <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;_</span><span class="si">{</span><span class="n">CONFIG</span><span class="o">.</span><span class="n">provider</span><span class="o">.</span><span class="n">prefix</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">field</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">field</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">])</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">field</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)</span>
                <span class="k">else</span> <span class="p">(</span><span class="n">field</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">],</span> <span class="n">field</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">])</span>
                <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">CONFIG</span><span class="o">.</span><span class="n">provider_fields</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">ENDPOINT</span><span class="p">,</span> <span class="p">[])</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="o">+</span> <span class="nb">tuple</span><span class="p">(</span>
                <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;_</span><span class="si">{</span><span class="n">CONFIG</span><span class="o">.</span><span class="n">provider</span><span class="o">.</span><span class="n">prefix</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">field</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">field</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">field</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)</span>
                <span class="k">else</span> <span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="n">field</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">PROVIDER_FIELDS</span>
            <span class="p">)</span>
            <span class="o">+</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">CONFIG</span><span class="o">.</span><span class="n">aliases</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">ENDPOINT</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
            <span class="o">+</span> <span class="bp">cls</span><span class="o">.</span><span class="n">ALIASES</span>
        <span class="p">)</span>

    <span class="nd">@classproperty</span>
    <span class="nd">@lru_cache</span><span class="p">(</span><span class="n">maxsize</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">SUPPORTED_PREFIXES</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A set of prefixes handled by this entry type.</span>

<span class="sd">        !!! note</span>
<span class="sd">            This implementation only includes the provider prefix,</span>
<span class="sd">            but in the future this property may be extended to include other</span>
<span class="sd">            namespaces (for serving fields from, e.g., other providers or</span>
<span class="sd">            domain-specific terms).</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">optimade.server.config</span> <span class="kn">import</span> <span class="n">CONFIG</span>

        <span class="k">return</span> <span class="p">{</span><span class="n">CONFIG</span><span class="o">.</span><span class="n">provider</span><span class="o">.</span><span class="n">prefix</span><span class="p">}</span>

    <span class="nd">@classproperty</span>
    <span class="k">def</span> <span class="nf">ALL_ATTRIBUTES</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns all attributes served by this entry.&quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">optimade.server.config</span> <span class="kn">import</span> <span class="n">CONFIG</span>

        <span class="k">return</span> <span class="p">(</span>
            <span class="nb">set</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">ENTRY_RESOURCE_ATTRIBUTES</span><span class="p">)</span>
            <span class="o">.</span><span class="n">union</span><span class="p">(</span>
                <span class="bp">cls</span><span class="o">.</span><span class="n">get_optimade_field</span><span class="p">(</span><span class="n">field</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">CONFIG</span><span class="o">.</span><span class="n">provider_fields</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">ENDPOINT</span><span class="p">,</span> <span class="p">())</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="o">.</span><span class="n">union</span><span class="p">(</span>
                <span class="bp">cls</span><span class="o">.</span><span class="n">get_optimade_field</span><span class="p">(</span><span class="n">field</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">])</span>
                <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">CONFIG</span><span class="o">.</span><span class="n">provider_fields</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">ENDPOINT</span><span class="p">,</span> <span class="p">())</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="o">.</span><span class="n">union</span><span class="p">({</span><span class="bp">cls</span><span class="o">.</span><span class="n">get_optimade_field</span><span class="p">(</span><span class="n">field</span><span class="p">)</span> <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">PROVIDER_FIELDS</span><span class="p">})</span>
        <span class="p">)</span>

    <span class="nd">@classproperty</span>
    <span class="k">def</span> <span class="nf">ENTRY_RESOURCE_ATTRIBUTES</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the dictionary of attributes defined by the underlying entry resource class.&quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">optimade.server.schemas</span> <span class="kn">import</span> <span class="n">retrieve_queryable_properties</span>

        <span class="k">return</span> <span class="n">retrieve_queryable_properties</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">ENTRY_RESOURCE_CLASS</span><span class="p">)</span>

    <span class="nd">@classproperty</span>
    <span class="nd">@lru_cache</span><span class="p">(</span><span class="n">maxsize</span><span class="o">=</span><span class="n">NUM_ENTRY_TYPES</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">ENDPOINT</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the expected endpoint for this mapper, corresponding</span>
<span class="sd">        to the `type` property of the resource class.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">endpoint</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">ENTRY_RESOURCE_CLASS</span><span class="o">.</span><span class="n">model_fields</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">default</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">endpoint</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">endpoint</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Type not set for this entry type!&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">endpoint</span>

    <span class="nd">@classmethod</span>
    <span class="nd">@lru_cache</span><span class="p">(</span><span class="n">maxsize</span><span class="o">=</span><span class="n">NUM_ENTRY_TYPES</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">all_length_aliases</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="o">...</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns all of the associated length aliases for this class,</span>
<span class="sd">        including those defined by the server config.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A tuple of length alias tuples.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">optimade.server.config</span> <span class="kn">import</span> <span class="n">CONFIG</span>

        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">LENGTH_ALIASES</span> <span class="o">+</span> <span class="nb">tuple</span><span class="p">(</span>
            <span class="n">CONFIG</span><span class="o">.</span><span class="n">length_aliases</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">ENDPOINT</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
        <span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="nd">@lru_cache</span><span class="p">(</span><span class="n">maxsize</span><span class="o">=</span><span class="mi">128</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">length_alias_for</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">field</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the length alias for the particular field,</span>
<span class="sd">        or `None` if no such alias is found.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            field: OPTIMADE field name.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Aliased field as found in [`all_length_aliases()`][optimade.server.mappers.entries.BaseResourceMapper.all_length_aliases].</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">all_length_aliases</span><span class="p">())</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="nd">@lru_cache</span><span class="p">(</span><span class="n">maxsize</span><span class="o">=</span><span class="mi">128</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">get_backend_field</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">optimade_field</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the field name configured for the particular</span>
<span class="sd">        underlying database for the passed OPTIMADE field name, that would</span>
<span class="sd">        be used in an API filter.</span>

<span class="sd">        Aliases are read from</span>
<span class="sd">        [`all_aliases()`][optimade.server.mappers.entries.BaseResourceMapper.all_aliases].</span>

<span class="sd">        If a dot-separated OPTIMADE field is provided, e.g., `species.mass`, only the first part will be mapped.</span>
<span class="sd">        This means for an (OPTIMADE, DB) alias of (`species`, `kinds`), `get_backend_fields(&quot;species.mass&quot;)`</span>
<span class="sd">        will return `kinds.mass`.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            optimade_field: The OPTIMADE field to attempt to map to the backend-specific field.</span>

<span class="sd">        Examples:</span>
<span class="sd">            &gt;&gt;&gt; get_backend_field(&quot;chemical_formula_anonymous&quot;)</span>
<span class="sd">            &#39;formula_anon&#39;</span>
<span class="sd">            &gt;&gt;&gt; get_backend_field(&quot;formula_anon&quot;)</span>
<span class="sd">            &#39;formula_anon&#39;</span>
<span class="sd">            &gt;&gt;&gt; get_backend_field(&quot;_exmpl_custom_provider_field&quot;)</span>
<span class="sd">            &#39;custom_provider_field&#39;</span>

<span class="sd">        Returns:</span>
<span class="sd">            The mapped field name to be used in the query to the backend.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">split</span> <span class="o">=</span> <span class="n">optimade_field</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
        <span class="n">alias</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">all_aliases</span><span class="p">())</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">split</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">alias</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">alias</span> <span class="o">+</span> <span class="p">(</span><span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="s2">&quot;.&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">split</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">split</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">optimade_field</span>

    <span class="nd">@classmethod</span>
    <span class="nd">@lru_cache</span><span class="p">(</span><span class="n">maxsize</span><span class="o">=</span><span class="mi">128</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">alias_for</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">field</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return aliased field name.</span>

<span class="sd">        !!! warning &quot;Deprecated&quot;</span>
<span class="sd">            This method is deprecated could be removed without further warning. Please use</span>
<span class="sd">            [`get_backend_field()`][optimade.server.mappers.entries.BaseResourceMapper.get_backend_field].</span>

<span class="sd">        Parameters:</span>
<span class="sd">            field: OPTIMADE field name.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Aliased field as found in [`all_aliases()`][optimade.server.mappers.entries.BaseResourceMapper.all_aliases].</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
            <span class="s2">&quot;The `.alias_for(...)` method is deprecated, please use `.get_backend_field(...)`.&quot;</span><span class="p">,</span>
            <span class="ne">DeprecationWarning</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_backend_field</span><span class="p">(</span><span class="n">field</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="nd">@lru_cache</span><span class="p">(</span><span class="n">maxsize</span><span class="o">=</span><span class="mi">128</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">get_optimade_field</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">backend_field</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the corresponding OPTIMADE field name for the underlying database field,</span>
<span class="sd">        ready to be used to construct the OPTIMADE-compliant JSON response.</span>

<span class="sd">        Aliases are read from</span>
<span class="sd">        [`all_aliases()`][optimade.server.mappers.entries.BaseResourceMapper.all_aliases].</span>

<span class="sd">        Arguments:</span>
<span class="sd">            backend_field: The backend field to attempt to map to an OPTIMADE field.</span>

<span class="sd">        Examples:</span>
<span class="sd">            &gt;&gt;&gt; get_optimade_field(&quot;chemical_formula_anonymous&quot;)</span>
<span class="sd">            &#39;chemical_formula_anonymous&#39;</span>
<span class="sd">            &gt;&gt;&gt; get_optimade_field(&quot;formula_anon&quot;)</span>
<span class="sd">            &#39;chemical_formula_anonymous&#39;</span>
<span class="sd">            &gt;&gt;&gt; get_optimade_field(&quot;custom_provider_field&quot;)</span>
<span class="sd">            &#39;_exmpl_custom_provider_field&#39;</span>

<span class="sd">        Returns:</span>
<span class="sd">            The mapped field name to be used in an OPTIMADE-compliant response.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span><span class="n">alias</span><span class="p">:</span> <span class="n">real</span> <span class="k">for</span> <span class="n">real</span><span class="p">,</span> <span class="n">alias</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">all_aliases</span><span class="p">()}</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="n">backend_field</span><span class="p">,</span> <span class="n">backend_field</span>
        <span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="nd">@lru_cache</span><span class="p">(</span><span class="n">maxsize</span><span class="o">=</span><span class="mi">128</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">alias_of</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">field</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return de-aliased field name, if it exists,</span>
<span class="sd">        otherwise return the input field name.</span>

<span class="sd">        !!! warning &quot;Deprecated&quot;</span>
<span class="sd">            This method is deprecated could be removed without further warning. Please use</span>
<span class="sd">            [`get_optimade_field()`][optimade.server.mappers.entries.BaseResourceMapper.get_optimade_field].</span>

<span class="sd">        Parameters:</span>
<span class="sd">            field: Field name to be de-aliased.</span>

<span class="sd">        Returns:</span>
<span class="sd">            De-aliased field name, falling back to returning `field`.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
            <span class="s2">&quot;The `.alias_of(...)` method is deprecated, please use `.get_optimade_field(...)`.&quot;</span><span class="p">,</span>
            <span class="ne">DeprecationWarning</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_optimade_field</span><span class="p">(</span><span class="n">field</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="nd">@lru_cache</span><span class="p">(</span><span class="n">maxsize</span><span class="o">=</span><span class="n">NUM_ENTRY_TYPES</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">get_required_fields</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">set</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get REQUIRED response fields.</span>

<span class="sd">        Returns:</span>
<span class="sd">            REQUIRED response fields.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">TOP_LEVEL_NON_ATTRIBUTES_FIELDS</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">map_back</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">doc</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Map properties from MongoDB to OPTIMADE.</span>

<span class="sd">        Starting from a MongoDB document `doc`, map the DB fields to the corresponding OPTIMADE fields.</span>
<span class="sd">        Then, the fields are all added to the top-level field &quot;attributes&quot;,</span>
<span class="sd">        with the exception of other top-level fields, defined in `cls.TOP_LEVEL_NON_ATTRIBUTES_FIELDS`.</span>
<span class="sd">        All fields not in `cls.TOP_LEVEL_NON_ATTRIBUTES_FIELDS` + &quot;attributes&quot; will be removed.</span>
<span class="sd">        Finally, the `type` is given the value of the specified `cls.ENDPOINT`.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            doc: A resource object in MongoDB format.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A resource object in OPTIMADE format.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">mapping</span> <span class="o">=</span> <span class="p">((</span><span class="n">real</span><span class="p">,</span> <span class="n">alias</span><span class="p">)</span> <span class="k">for</span> <span class="n">alias</span><span class="p">,</span> <span class="n">real</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">all_aliases</span><span class="p">())</span>
        <span class="n">newdoc</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">reals</span> <span class="o">=</span> <span class="p">{</span><span class="n">real</span> <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">real</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">all_aliases</span><span class="p">()}</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">reals</span><span class="p">:</span>
                <span class="n">newdoc</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">doc</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">real</span><span class="p">,</span> <span class="n">alias</span> <span class="ow">in</span> <span class="n">mapping</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">real</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">:</span>
                <span class="n">newdoc</span><span class="p">[</span><span class="n">alias</span><span class="p">]</span> <span class="o">=</span> <span class="n">doc</span><span class="p">[</span><span class="n">real</span><span class="p">]</span>

        <span class="k">if</span> <span class="s2">&quot;attributes&quot;</span> <span class="ow">in</span> <span class="n">newdoc</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Will overwrite doc field!&quot;</span><span class="p">)</span>
        <span class="n">attributes</span> <span class="o">=</span> <span class="n">newdoc</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">TOP_LEVEL_NON_ATTRIBUTES_FIELDS</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">attributes</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">newdoc</span><span class="p">[</span><span class="n">field</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">newdoc</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
            <span class="k">if</span> <span class="n">field</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">TOP_LEVEL_NON_ATTRIBUTES_FIELDS</span><span class="p">:</span>
                <span class="k">del</span> <span class="n">newdoc</span><span class="p">[</span><span class="n">field</span><span class="p">]</span>

        <span class="n">newdoc</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">ENDPOINT</span>
        <span class="n">newdoc</span><span class="p">[</span><span class="s2">&quot;attributes&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">attributes</span>

        <span class="k">return</span> <span class="n">newdoc</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">deserialize</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span> <span class="n">results</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">dict</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">dict</span><span class="p">]]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n">EntryResource</span><span class="p">],</span> <span class="n">EntryResource</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Converts the raw database entries for this class into serialized models,</span>
<span class="sd">        mapping the data along the way.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">ENTRY_RESOURCE_CLASS</span><span class="p">(</span><span class="o">**</span><span class="bp">cls</span><span class="o">.</span><span class="n">map_back</span><span class="p">(</span><span class="n">results</span><span class="p">))</span>

        <span class="k">return</span> <span class="p">[</span><span class="bp">cls</span><span class="o">.</span><span class="n">ENTRY_RESOURCE_CLASS</span><span class="p">(</span><span class="o">**</span><span class="bp">cls</span><span class="o">.</span><span class="n">map_back</span><span class="p">(</span><span class="n">doc</span><span class="p">))</span> <span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="n">results</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">




<h3 id="optimade.server.query_params.BaseResourceMapper.ALL_ATTRIBUTES" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">ALL_ATTRIBUTES</span><span class="p">()</span></code>

<a href="#optimade.server.query_params.BaseResourceMapper.ALL_ATTRIBUTES" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Returns all attributes served by this entry.</p>

          <details class="quote">
            <summary>Source code in <code>optimade/server/mappers/entries.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classproperty</span>
<span class="k">def</span> <span class="nf">ALL_ATTRIBUTES</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns all attributes served by this entry.&quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">optimade.server.config</span> <span class="kn">import</span> <span class="n">CONFIG</span>

    <span class="k">return</span> <span class="p">(</span>
        <span class="nb">set</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">ENTRY_RESOURCE_ATTRIBUTES</span><span class="p">)</span>
        <span class="o">.</span><span class="n">union</span><span class="p">(</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">get_optimade_field</span><span class="p">(</span><span class="n">field</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">CONFIG</span><span class="o">.</span><span class="n">provider_fields</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">ENDPOINT</span><span class="p">,</span> <span class="p">())</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="o">.</span><span class="n">union</span><span class="p">(</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">get_optimade_field</span><span class="p">(</span><span class="n">field</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">])</span>
            <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">CONFIG</span><span class="o">.</span><span class="n">provider_fields</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">ENDPOINT</span><span class="p">,</span> <span class="p">())</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="o">.</span><span class="n">union</span><span class="p">({</span><span class="bp">cls</span><span class="o">.</span><span class="n">get_optimade_field</span><span class="p">(</span><span class="n">field</span><span class="p">)</span> <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">PROVIDER_FIELDS</span><span class="p">})</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="optimade.server.query_params.BaseResourceMapper.ENDPOINT" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">ENDPOINT</span><span class="p">()</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-cached"><code>cached</code></small>
  </span>

<a href="#optimade.server.query_params.BaseResourceMapper.ENDPOINT" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Returns the expected endpoint for this mapper, corresponding
to the <code>type</code> property of the resource class.</p>

          <details class="quote">
            <summary>Source code in <code>optimade/server/mappers/entries.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classproperty</span>
<span class="nd">@lru_cache</span><span class="p">(</span><span class="n">maxsize</span><span class="o">=</span><span class="n">NUM_ENTRY_TYPES</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">ENDPOINT</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the expected endpoint for this mapper, corresponding</span>
<span class="sd">    to the `type` property of the resource class.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">endpoint</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">ENTRY_RESOURCE_CLASS</span><span class="o">.</span><span class="n">model_fields</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">default</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">endpoint</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">endpoint</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Type not set for this entry type!&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">endpoint</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="optimade.server.query_params.BaseResourceMapper.ENTRY_RESOURCE_ATTRIBUTES" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">ENTRY_RESOURCE_ATTRIBUTES</span><span class="p">()</span></code>

<a href="#optimade.server.query_params.BaseResourceMapper.ENTRY_RESOURCE_ATTRIBUTES" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Returns the dictionary of attributes defined by the underlying entry resource class.</p>

          <details class="quote">
            <summary>Source code in <code>optimade/server/mappers/entries.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classproperty</span>
<span class="k">def</span> <span class="nf">ENTRY_RESOURCE_ATTRIBUTES</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the dictionary of attributes defined by the underlying entry resource class.&quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">optimade.server.schemas</span> <span class="kn">import</span> <span class="n">retrieve_queryable_properties</span>

    <span class="k">return</span> <span class="n">retrieve_queryable_properties</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">ENTRY_RESOURCE_CLASS</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="optimade.server.query_params.BaseResourceMapper.SUPPORTED_PREFIXES" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">SUPPORTED_PREFIXES</span><span class="p">()</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-cached"><code>cached</code></small>
  </span>

<a href="#optimade.server.query_params.BaseResourceMapper.SUPPORTED_PREFIXES" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>A set of prefixes handled by this entry type.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This implementation only includes the provider prefix,
but in the future this property may be extended to include other
namespaces (for serving fields from, e.g., other providers or
domain-specific terms).</p>
</div>

          <details class="quote">
            <summary>Source code in <code>optimade/server/mappers/entries.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classproperty</span>
<span class="nd">@lru_cache</span><span class="p">(</span><span class="n">maxsize</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">SUPPORTED_PREFIXES</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A set of prefixes handled by this entry type.</span>

<span class="sd">    !!! note</span>
<span class="sd">        This implementation only includes the provider prefix,</span>
<span class="sd">        but in the future this property may be extended to include other</span>
<span class="sd">        namespaces (for serving fields from, e.g., other providers or</span>
<span class="sd">        domain-specific terms).</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">optimade.server.config</span> <span class="kn">import</span> <span class="n">CONFIG</span>

    <span class="k">return</span> <span class="p">{</span><span class="n">CONFIG</span><span class="o">.</span><span class="n">provider</span><span class="o">.</span><span class="n">prefix</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="optimade.server.query_params.BaseResourceMapper.alias_for" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">alias_for</span><span class="p">(</span><span class="n">field</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-cached"><code>cached</code></small>
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#optimade.server.query_params.BaseResourceMapper.alias_for" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Return aliased field name.</p>
<div class="admonition warning">
<p class="admonition-title">Deprecated</p>
<p>This method is deprecated could be removed without further warning. Please use
<a class="autorefs autorefs-internal" href="../mappers/entries/#optimade.server.mappers.entries.BaseResourceMapper.get_backend_field"><code>get_backend_field()</code></a>.</p>
</div>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>field</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>OPTIMADE field name.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Aliased field as found in <a class="autorefs autorefs-internal" href="../mappers/entries/#optimade.server.mappers.entries.BaseResourceMapper.all_aliases"><code>all_aliases()</code></a>.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>optimade/server/mappers/entries.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="nd">@lru_cache</span><span class="p">(</span><span class="n">maxsize</span><span class="o">=</span><span class="mi">128</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">alias_for</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">field</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return aliased field name.</span>

<span class="sd">    !!! warning &quot;Deprecated&quot;</span>
<span class="sd">        This method is deprecated could be removed without further warning. Please use</span>
<span class="sd">        [`get_backend_field()`][optimade.server.mappers.entries.BaseResourceMapper.get_backend_field].</span>

<span class="sd">    Parameters:</span>
<span class="sd">        field: OPTIMADE field name.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Aliased field as found in [`all_aliases()`][optimade.server.mappers.entries.BaseResourceMapper.all_aliases].</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
        <span class="s2">&quot;The `.alias_for(...)` method is deprecated, please use `.get_backend_field(...)`.&quot;</span><span class="p">,</span>
        <span class="ne">DeprecationWarning</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_backend_field</span><span class="p">(</span><span class="n">field</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="optimade.server.query_params.BaseResourceMapper.alias_of" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">alias_of</span><span class="p">(</span><span class="n">field</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-cached"><code>cached</code></small>
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#optimade.server.query_params.BaseResourceMapper.alias_of" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Return de-aliased field name, if it exists,
otherwise return the input field name.</p>
<div class="admonition warning">
<p class="admonition-title">Deprecated</p>
<p>This method is deprecated could be removed without further warning. Please use
<a class="autorefs autorefs-internal" href="../mappers/entries/#optimade.server.mappers.entries.BaseResourceMapper.get_optimade_field"><code>get_optimade_field()</code></a>.</p>
</div>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>field</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Field name to be de-aliased.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>De-aliased field name, falling back to returning <code>field</code>.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>optimade/server/mappers/entries.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="nd">@lru_cache</span><span class="p">(</span><span class="n">maxsize</span><span class="o">=</span><span class="mi">128</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">alias_of</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">field</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return de-aliased field name, if it exists,</span>
<span class="sd">    otherwise return the input field name.</span>

<span class="sd">    !!! warning &quot;Deprecated&quot;</span>
<span class="sd">        This method is deprecated could be removed without further warning. Please use</span>
<span class="sd">        [`get_optimade_field()`][optimade.server.mappers.entries.BaseResourceMapper.get_optimade_field].</span>

<span class="sd">    Parameters:</span>
<span class="sd">        field: Field name to be de-aliased.</span>

<span class="sd">    Returns:</span>
<span class="sd">        De-aliased field name, falling back to returning `field`.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
        <span class="s2">&quot;The `.alias_of(...)` method is deprecated, please use `.get_optimade_field(...)`.&quot;</span><span class="p">,</span>
        <span class="ne">DeprecationWarning</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_optimade_field</span><span class="p">(</span><span class="n">field</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="optimade.server.query_params.BaseResourceMapper.all_aliases" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">all_aliases</span><span class="p">()</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-cached"><code>cached</code></small>
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#optimade.server.query_params.BaseResourceMapper.all_aliases" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Returns all of the associated aliases for this entry type,
including those defined by the server config. The first member
of each tuple is the OPTIMADE-compliant field name, the second
is the backend-specific field name.</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="collections.abc.Iterable">Iterable</span>[tuple[str, str]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A tuple of alias tuples.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>optimade/server/mappers/entries.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="nd">@lru_cache</span><span class="p">(</span><span class="n">maxsize</span><span class="o">=</span><span class="n">NUM_ENTRY_TYPES</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">all_aliases</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns all of the associated aliases for this entry type,</span>
<span class="sd">    including those defined by the server config. The first member</span>
<span class="sd">    of each tuple is the OPTIMADE-compliant field name, the second</span>
<span class="sd">    is the backend-specific field name.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A tuple of alias tuples.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">optimade.server.config</span> <span class="kn">import</span> <span class="n">CONFIG</span>

    <span class="k">return</span> <span class="p">(</span>
        <span class="nb">tuple</span><span class="p">(</span>
            <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;_</span><span class="si">{</span><span class="n">CONFIG</span><span class="o">.</span><span class="n">provider</span><span class="o">.</span><span class="n">prefix</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">field</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">field</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">field</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)</span>
            <span class="k">else</span> <span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="n">field</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">CONFIG</span><span class="o">.</span><span class="n">provider_fields</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">ENDPOINT</span><span class="p">,</span> <span class="p">[])</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="o">+</span> <span class="nb">tuple</span><span class="p">(</span>
            <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;_</span><span class="si">{</span><span class="n">CONFIG</span><span class="o">.</span><span class="n">provider</span><span class="o">.</span><span class="n">prefix</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">field</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">field</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">])</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">field</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)</span>
            <span class="k">else</span> <span class="p">(</span><span class="n">field</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">],</span> <span class="n">field</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">])</span>
            <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">CONFIG</span><span class="o">.</span><span class="n">provider_fields</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">ENDPOINT</span><span class="p">,</span> <span class="p">[])</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="o">+</span> <span class="nb">tuple</span><span class="p">(</span>
            <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;_</span><span class="si">{</span><span class="n">CONFIG</span><span class="o">.</span><span class="n">provider</span><span class="o">.</span><span class="n">prefix</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">field</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">field</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">field</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)</span>
            <span class="k">else</span> <span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="n">field</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">PROVIDER_FIELDS</span>
        <span class="p">)</span>
        <span class="o">+</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">CONFIG</span><span class="o">.</span><span class="n">aliases</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">ENDPOINT</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
        <span class="o">+</span> <span class="bp">cls</span><span class="o">.</span><span class="n">ALIASES</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="optimade.server.query_params.BaseResourceMapper.all_length_aliases" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">all_length_aliases</span><span class="p">()</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-cached"><code>cached</code></small>
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#optimade.server.query_params.BaseResourceMapper.all_length_aliases" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Returns all of the associated length aliases for this class,
including those defined by the server config.</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>tuple[tuple[str, str], ...]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A tuple of length alias tuples.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>optimade/server/mappers/entries.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="nd">@lru_cache</span><span class="p">(</span><span class="n">maxsize</span><span class="o">=</span><span class="n">NUM_ENTRY_TYPES</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">all_length_aliases</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="o">...</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns all of the associated length aliases for this class,</span>
<span class="sd">    including those defined by the server config.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A tuple of length alias tuples.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">optimade.server.config</span> <span class="kn">import</span> <span class="n">CONFIG</span>

    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">LENGTH_ALIASES</span> <span class="o">+</span> <span class="nb">tuple</span><span class="p">(</span>
        <span class="n">CONFIG</span><span class="o">.</span><span class="n">length_aliases</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">ENDPOINT</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="optimade.server.query_params.BaseResourceMapper.deserialize" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">deserialize</span><span class="p">(</span><span class="n">results</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#optimade.server.query_params.BaseResourceMapper.deserialize" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Converts the raw database entries for this class into serialized models,
mapping the data along the way.</p>

          <details class="quote">
            <summary>Source code in <code>optimade/server/mappers/entries.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">deserialize</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span> <span class="n">results</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">dict</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">dict</span><span class="p">]]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n">EntryResource</span><span class="p">],</span> <span class="n">EntryResource</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Converts the raw database entries for this class into serialized models,</span>
<span class="sd">    mapping the data along the way.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">ENTRY_RESOURCE_CLASS</span><span class="p">(</span><span class="o">**</span><span class="bp">cls</span><span class="o">.</span><span class="n">map_back</span><span class="p">(</span><span class="n">results</span><span class="p">))</span>

    <span class="k">return</span> <span class="p">[</span><span class="bp">cls</span><span class="o">.</span><span class="n">ENTRY_RESOURCE_CLASS</span><span class="p">(</span><span class="o">**</span><span class="bp">cls</span><span class="o">.</span><span class="n">map_back</span><span class="p">(</span><span class="n">doc</span><span class="p">))</span> <span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="n">results</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="optimade.server.query_params.BaseResourceMapper.get_backend_field" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">get_backend_field</span><span class="p">(</span><span class="n">optimade_field</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-cached"><code>cached</code></small>
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#optimade.server.query_params.BaseResourceMapper.get_backend_field" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Return the field name configured for the particular
underlying database for the passed OPTIMADE field name, that would
be used in an API filter.</p>
<p>Aliases are read from
<a class="autorefs autorefs-internal" href="../mappers/entries/#optimade.server.mappers.entries.BaseResourceMapper.all_aliases"><code>all_aliases()</code></a>.</p>
<p>If a dot-separated OPTIMADE field is provided, e.g., <code>species.mass</code>, only the first part will be mapped.
This means for an (OPTIMADE, DB) alias of (<code>species</code>, <code>kinds</code>), <code>get_backend_fields("species.mass")</code>
will return <code>kinds.mass</code>.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>optimade_field</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The OPTIMADE field to attempt to map to the backend-specific field.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



<p><strong>Examples:</strong></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">get_backend_field</span><span class="p">(</span><span class="s2">&quot;chemical_formula_anonymous&quot;</span><span class="p">)</span>
<span class="go">&#39;formula_anon&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">get_backend_field</span><span class="p">(</span><span class="s2">&quot;formula_anon&quot;</span><span class="p">)</span>
<span class="go">&#39;formula_anon&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">get_backend_field</span><span class="p">(</span><span class="s2">&quot;_exmpl_custom_provider_field&quot;</span><span class="p">)</span>
<span class="go">&#39;custom_provider_field&#39;</span>
</code></pre></div>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The mapped field name to be used in the query to the backend.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>optimade/server/mappers/entries.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="nd">@lru_cache</span><span class="p">(</span><span class="n">maxsize</span><span class="o">=</span><span class="mi">128</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">get_backend_field</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">optimade_field</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the field name configured for the particular</span>
<span class="sd">    underlying database for the passed OPTIMADE field name, that would</span>
<span class="sd">    be used in an API filter.</span>

<span class="sd">    Aliases are read from</span>
<span class="sd">    [`all_aliases()`][optimade.server.mappers.entries.BaseResourceMapper.all_aliases].</span>

<span class="sd">    If a dot-separated OPTIMADE field is provided, e.g., `species.mass`, only the first part will be mapped.</span>
<span class="sd">    This means for an (OPTIMADE, DB) alias of (`species`, `kinds`), `get_backend_fields(&quot;species.mass&quot;)`</span>
<span class="sd">    will return `kinds.mass`.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        optimade_field: The OPTIMADE field to attempt to map to the backend-specific field.</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt; get_backend_field(&quot;chemical_formula_anonymous&quot;)</span>
<span class="sd">        &#39;formula_anon&#39;</span>
<span class="sd">        &gt;&gt;&gt; get_backend_field(&quot;formula_anon&quot;)</span>
<span class="sd">        &#39;formula_anon&#39;</span>
<span class="sd">        &gt;&gt;&gt; get_backend_field(&quot;_exmpl_custom_provider_field&quot;)</span>
<span class="sd">        &#39;custom_provider_field&#39;</span>

<span class="sd">    Returns:</span>
<span class="sd">        The mapped field name to be used in the query to the backend.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">split</span> <span class="o">=</span> <span class="n">optimade_field</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
    <span class="n">alias</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">all_aliases</span><span class="p">())</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">split</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="kc">None</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">alias</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">alias</span> <span class="o">+</span> <span class="p">(</span><span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="s2">&quot;.&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">split</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">split</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">optimade_field</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="optimade.server.query_params.BaseResourceMapper.get_optimade_field" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">get_optimade_field</span><span class="p">(</span><span class="n">backend_field</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-cached"><code>cached</code></small>
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#optimade.server.query_params.BaseResourceMapper.get_optimade_field" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Return the corresponding OPTIMADE field name for the underlying database field,
ready to be used to construct the OPTIMADE-compliant JSON response.</p>
<p>Aliases are read from
<a class="autorefs autorefs-internal" href="../mappers/entries/#optimade.server.mappers.entries.BaseResourceMapper.all_aliases"><code>all_aliases()</code></a>.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>backend_field</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The backend field to attempt to map to an OPTIMADE field.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



<p><strong>Examples:</strong></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">get_optimade_field</span><span class="p">(</span><span class="s2">&quot;chemical_formula_anonymous&quot;</span><span class="p">)</span>
<span class="go">&#39;chemical_formula_anonymous&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">get_optimade_field</span><span class="p">(</span><span class="s2">&quot;formula_anon&quot;</span><span class="p">)</span>
<span class="go">&#39;chemical_formula_anonymous&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">get_optimade_field</span><span class="p">(</span><span class="s2">&quot;custom_provider_field&quot;</span><span class="p">)</span>
<span class="go">&#39;_exmpl_custom_provider_field&#39;</span>
</code></pre></div>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The mapped field name to be used in an OPTIMADE-compliant response.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>optimade/server/mappers/entries.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="nd">@lru_cache</span><span class="p">(</span><span class="n">maxsize</span><span class="o">=</span><span class="mi">128</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">get_optimade_field</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">backend_field</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the corresponding OPTIMADE field name for the underlying database field,</span>
<span class="sd">    ready to be used to construct the OPTIMADE-compliant JSON response.</span>

<span class="sd">    Aliases are read from</span>
<span class="sd">    [`all_aliases()`][optimade.server.mappers.entries.BaseResourceMapper.all_aliases].</span>

<span class="sd">    Arguments:</span>
<span class="sd">        backend_field: The backend field to attempt to map to an OPTIMADE field.</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt; get_optimade_field(&quot;chemical_formula_anonymous&quot;)</span>
<span class="sd">        &#39;chemical_formula_anonymous&#39;</span>
<span class="sd">        &gt;&gt;&gt; get_optimade_field(&quot;formula_anon&quot;)</span>
<span class="sd">        &#39;chemical_formula_anonymous&#39;</span>
<span class="sd">        &gt;&gt;&gt; get_optimade_field(&quot;custom_provider_field&quot;)</span>
<span class="sd">        &#39;_exmpl_custom_provider_field&#39;</span>

<span class="sd">    Returns:</span>
<span class="sd">        The mapped field name to be used in an OPTIMADE-compliant response.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span><span class="n">alias</span><span class="p">:</span> <span class="n">real</span> <span class="k">for</span> <span class="n">real</span><span class="p">,</span> <span class="n">alias</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">all_aliases</span><span class="p">()}</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
        <span class="n">backend_field</span><span class="p">,</span> <span class="n">backend_field</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="optimade.server.query_params.BaseResourceMapper.get_required_fields" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">get_required_fields</span><span class="p">()</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-cached"><code>cached</code></small>
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#optimade.server.query_params.BaseResourceMapper.get_required_fields" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Get REQUIRED response fields.</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>set</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>REQUIRED response fields.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>optimade/server/mappers/entries.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="nd">@lru_cache</span><span class="p">(</span><span class="n">maxsize</span><span class="o">=</span><span class="n">NUM_ENTRY_TYPES</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">get_required_fields</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">set</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get REQUIRED response fields.</span>

<span class="sd">    Returns:</span>
<span class="sd">        REQUIRED response fields.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">TOP_LEVEL_NON_ATTRIBUTES_FIELDS</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="optimade.server.query_params.BaseResourceMapper.length_alias_for" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">length_alias_for</span><span class="p">(</span><span class="n">field</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-cached"><code>cached</code></small>
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#optimade.server.query_params.BaseResourceMapper.length_alias_for" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Returns the length alias for the particular field,
or <code>None</code> if no such alias is found.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>field</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>OPTIMADE field name.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="typing.Optional">Optional</span>[str]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Aliased field as found in <a class="autorefs autorefs-internal" href="../mappers/entries/#optimade.server.mappers.entries.BaseResourceMapper.all_length_aliases"><code>all_length_aliases()</code></a>.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>optimade/server/mappers/entries.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="nd">@lru_cache</span><span class="p">(</span><span class="n">maxsize</span><span class="o">=</span><span class="mi">128</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">length_alias_for</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">field</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the length alias for the particular field,</span>
<span class="sd">    or `None` if no such alias is found.</span>

<span class="sd">    Parameters:</span>
<span class="sd">        field: OPTIMADE field name.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Aliased field as found in [`all_length_aliases()`][optimade.server.mappers.entries.BaseResourceMapper.all_length_aliases].</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">all_length_aliases</span><span class="p">())</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="optimade.server.query_params.BaseResourceMapper.map_back" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">map_back</span><span class="p">(</span><span class="n">doc</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#optimade.server.query_params.BaseResourceMapper.map_back" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Map properties from MongoDB to OPTIMADE.</p>
<p>Starting from a MongoDB document <code>doc</code>, map the DB fields to the corresponding OPTIMADE fields.
Then, the fields are all added to the top-level field "attributes",
with the exception of other top-level fields, defined in <code>cls.TOP_LEVEL_NON_ATTRIBUTES_FIELDS</code>.
All fields not in <code>cls.TOP_LEVEL_NON_ATTRIBUTES_FIELDS</code> + "attributes" will be removed.
Finally, the <code>type</code> is given the value of the specified <code>cls.ENDPOINT</code>.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>doc</code></td>
          <td>
                <code>dict</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A resource object in MongoDB format.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>dict</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A resource object in OPTIMADE format.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>optimade/server/mappers/entries.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">map_back</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">doc</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Map properties from MongoDB to OPTIMADE.</span>

<span class="sd">    Starting from a MongoDB document `doc`, map the DB fields to the corresponding OPTIMADE fields.</span>
<span class="sd">    Then, the fields are all added to the top-level field &quot;attributes&quot;,</span>
<span class="sd">    with the exception of other top-level fields, defined in `cls.TOP_LEVEL_NON_ATTRIBUTES_FIELDS`.</span>
<span class="sd">    All fields not in `cls.TOP_LEVEL_NON_ATTRIBUTES_FIELDS` + &quot;attributes&quot; will be removed.</span>
<span class="sd">    Finally, the `type` is given the value of the specified `cls.ENDPOINT`.</span>

<span class="sd">    Parameters:</span>
<span class="sd">        doc: A resource object in MongoDB format.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A resource object in OPTIMADE format.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">mapping</span> <span class="o">=</span> <span class="p">((</span><span class="n">real</span><span class="p">,</span> <span class="n">alias</span><span class="p">)</span> <span class="k">for</span> <span class="n">alias</span><span class="p">,</span> <span class="n">real</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">all_aliases</span><span class="p">())</span>
    <span class="n">newdoc</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">reals</span> <span class="o">=</span> <span class="p">{</span><span class="n">real</span> <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">real</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">all_aliases</span><span class="p">()}</span>
    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">reals</span><span class="p">:</span>
            <span class="n">newdoc</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">doc</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">real</span><span class="p">,</span> <span class="n">alias</span> <span class="ow">in</span> <span class="n">mapping</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">real</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">:</span>
            <span class="n">newdoc</span><span class="p">[</span><span class="n">alias</span><span class="p">]</span> <span class="o">=</span> <span class="n">doc</span><span class="p">[</span><span class="n">real</span><span class="p">]</span>

    <span class="k">if</span> <span class="s2">&quot;attributes&quot;</span> <span class="ow">in</span> <span class="n">newdoc</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Will overwrite doc field!&quot;</span><span class="p">)</span>
    <span class="n">attributes</span> <span class="o">=</span> <span class="n">newdoc</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">TOP_LEVEL_NON_ATTRIBUTES_FIELDS</span><span class="p">:</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">attributes</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">newdoc</span><span class="p">[</span><span class="n">field</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">newdoc</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
        <span class="k">if</span> <span class="n">field</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">TOP_LEVEL_NON_ATTRIBUTES_FIELDS</span><span class="p">:</span>
            <span class="k">del</span> <span class="n">newdoc</span><span class="p">[</span><span class="n">field</span><span class="p">]</span>

    <span class="n">newdoc</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">ENDPOINT</span>
    <span class="n">newdoc</span><span class="p">[</span><span class="s2">&quot;attributes&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">attributes</span>

    <span class="k">return</span> <span class="n">newdoc</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">




<h2 id="optimade.server.query_params.EntryListingQueryParams" class="doc doc-heading">
          <code>EntryListingQueryParams</code>


<a href="#optimade.server.query_params.EntryListingQueryParams" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="optimade.server.query_params.BaseQueryParams" href="#optimade.server.query_params.BaseQueryParams">BaseQueryParams</a></code></p>

  
      <p>Common query params for all Entry listing endpoints.</p>



  <p><strong>Attributes:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>filter</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A filter string, in the format described in section API Filtering Format Specification of the specification.</p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code>response_format</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The output format requested (see section Response Format).
Defaults to the format string 'json', which specifies the standard output format described in this specification.</p>
<p><strong>Example</strong>: <code>http://example.com/v1/structures?response_format=xml</code></p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code>email_address</code></td>
          <td>
                <code><span title="pydantic.EmailStr">EmailStr</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>An email address of the user making the request.
The email SHOULD be that of a person and not an automatic system.</p>
<p><strong>Example</strong>: <code>http://example.com/v1/structures?email_address=user@example.com</code></p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code>response_fields</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A comma-delimited set of fields to be provided in the output.
If provided, these fields MUST be returned along with the REQUIRED fields.
Other OPTIONAL fields MUST NOT be returned when this parameter is present.</p>
<p><strong>Example</strong>: <code>http://example.com/v1/structures?response_fields=last_modified,nsites</code></p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code>sort</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If supporting sortable queries, an implementation MUST use the <code>sort</code> query parameter with format as specified
by <a href="https://jsonapi.org/format/1.0/#fetching-sorting">JSON API 1.0</a>.</p>
<p>An implementation MAY support multiple sort fields for a single query.
If it does, it again MUST conform to the JSON API 1.0 specification.</p>
<p>If an implementation supports sorting for an entry listing endpoint, then the <code>/info/&lt;entries&gt;</code> endpoint MUST include,
for each field name <code>&lt;fieldname&gt;</code> in its <code>data.properties.&lt;fieldname&gt;</code> response value that can be used for sorting,
the key <code>sortable</code> with value <code>true</code>.
If a field name under an entry listing endpoint supporting sorting cannot be used for sorting, the server MUST either
leave out the <code>sortable</code> key or set it equal to <code>false</code> for the specific field name.
The set of field names, with <code>sortable</code> equal to <code>true</code> are allowed to be used in the "sort fields" list according to
its definition in the JSON API 1.0 specification.
The field <code>sortable</code> is in addition to each property description and other OPTIONAL fields.
An example is shown in the section Entry Listing Info Endpoints.</p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code>page_limit</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Sets a numerical limit on the number of entries returned.
See <a href="https://jsonapi.org/format/1.0/#fetching-pagination">JSON API 1.0</a>.
The API implementation MUST return no more than the number specified.
It MAY return fewer. The database MAY have a maximum limit and not accept larger numbers
(in which case an error code -- <code>403 Forbidden</code> -- MUST be returned).
The default limit value is up to the API implementation to decide.</p>
<p><strong>Example</strong>: <code>http://example.com/optimade/v1/structures?page_limit=100</code></p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code>page_offset</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>RECOMMENDED for use with <em>offset-based</em> pagination: using <code>page_offset</code> and <code>page_limit</code> is RECOMMENDED.</p>
<p><strong>Example</strong>: Skip 50 structures and fetch up to 100: <code>/structures?page_offset=50&amp;page_limit=100</code>.</p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code>page_number</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>RECOMMENDED for use with <em>page-based</em> pagination: using <code>page_number</code> and <code>page_limit</code> is RECOMMENDED.
It is RECOMMENDED that the first page has number 1, i.e., that <code>page_number</code> is 1-based.</p>
<p><strong>Example</strong>: Fetch page 2 of up to 50 structures per page: <code>/structures?page_number=2&amp;page_limit=50</code>.</p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code>page_cursor</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>RECOMMENDED for use with <em>cursor-based</em> pagination: using <code>page_cursor</code> and <code>page_limit</code> is RECOMMENDED.</p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code>page_above</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>RECOMMENDED for use with <em>value-based</em> pagination: using <code>page_above</code>/<code>page_below</code> and <code>page_limit</code> is RECOMMENDED.</p>
<p><strong>Example</strong>: Fetch up to 100 structures above sort-field value 4000 (in this example, server chooses to fetch results sorted by
increasing <code>id</code>, so <code>page_above</code> value refers to an <code>id</code> value): <code>/structures?page_above=4000&amp;page_limit=100</code>.</p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code>page_below</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>RECOMMENDED for use with <em>value-based</em> pagination: using <code>page_above</code>/<code>page_below</code> and <code>page_limit</code> is RECOMMENDED.</p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code>include</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A server MAY implement the JSON API concept of returning <a href="https://jsonapi.org/format/1.0/#document-compound-documents">compound documents</a>
by utilizing the <code>include</code> query parameter as specified by <a href="https://jsonapi.org/format/1.0/#fetching-includes">JSON API 1.0</a>.</p>
<p>All related resource objects MUST be returned as part of an array value for the top-level <code>included</code> field,
see the section JSON Response Schema: Common Fields.</p>
<p>The value of <code>include</code> MUST be a comma-separated list of "relationship paths", as defined in the <a href="https://jsonapi.org/format/1.0/#fetching-includes">JSON API</a>.
If relationship paths are not supported, or a server is unable to identify a relationship path a <code>400 Bad Request</code> response MUST be made.</p>
<p>The <strong>default value</strong> for <code>include</code> is <code>references</code>. This means <code>references</code> entries MUST always be included under the top-level field
<code>included</code> as default, since a server assumes if <code>include</code> is not specified by a client in the request, it is still specified as <code>include=references</code>.
Note, if a client explicitly specifies <code>include</code> and leaves out <code>references</code>, <code>references</code> resource objects MUST NOT be included under the top-level
field <code>included</code>, as per the definition of <code>included</code>, see section JSON Response Schema: Common Fields.</p>
<p><strong>Note</strong>: A query with the parameter <code>include</code> set to the empty string means no related resource objects are to be returned under the top-level field <code>included</code>.</p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code>api_hint</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If the client provides the parameter, the value SHOULD have the format <code>vMAJOR</code> or <code>vMAJOR.MINOR</code>,
where MAJOR is a major version and MINOR is a minor version of the API.
For example, if a client appends <code>api_hint=v1.0</code> to the query string, the hint provided is for major version 1 and minor version 0.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

            <details class="quote">
              <summary>Source code in <code>optimade/server/query_params.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">EntryListingQueryParams</span><span class="p">(</span><span class="n">BaseQueryParams</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Common query params for all Entry listing endpoints.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        filter (str): A filter string, in the format described in section API Filtering Format Specification of the specification.</span>

<span class="sd">        response_format (str): The output format requested (see section Response Format).</span>
<span class="sd">            Defaults to the format string &#39;json&#39;, which specifies the standard output format described in this specification.</span>

<span class="sd">            **Example**: `http://example.com/v1/structures?response_format=xml`</span>

<span class="sd">        email_address (EmailStr): An email address of the user making the request.</span>
<span class="sd">            The email SHOULD be that of a person and not an automatic system.</span>

<span class="sd">            **Example**: `http://example.com/v1/structures?email_address=user@example.com`</span>

<span class="sd">        response_fields (str): A comma-delimited set of fields to be provided in the output.</span>
<span class="sd">            If provided, these fields MUST be returned along with the REQUIRED fields.</span>
<span class="sd">            Other OPTIONAL fields MUST NOT be returned when this parameter is present.</span>

<span class="sd">            **Example**: `http://example.com/v1/structures?response_fields=last_modified,nsites`</span>

<span class="sd">        sort (str): If supporting sortable queries, an implementation MUST use the `sort` query parameter with format as specified</span>
<span class="sd">            by [JSON API 1.0](https://jsonapi.org/format/1.0/#fetching-sorting).</span>

<span class="sd">            An implementation MAY support multiple sort fields for a single query.</span>
<span class="sd">            If it does, it again MUST conform to the JSON API 1.0 specification.</span>

<span class="sd">            If an implementation supports sorting for an entry listing endpoint, then the `/info/&lt;entries&gt;` endpoint MUST include,</span>
<span class="sd">            for each field name `&lt;fieldname&gt;` in its `data.properties.&lt;fieldname&gt;` response value that can be used for sorting,</span>
<span class="sd">            the key `sortable` with value `true`.</span>
<span class="sd">            If a field name under an entry listing endpoint supporting sorting cannot be used for sorting, the server MUST either</span>
<span class="sd">            leave out the `sortable` key or set it equal to `false` for the specific field name.</span>
<span class="sd">            The set of field names, with `sortable` equal to `true` are allowed to be used in the &quot;sort fields&quot; list according to</span>
<span class="sd">            its definition in the JSON API 1.0 specification.</span>
<span class="sd">            The field `sortable` is in addition to each property description and other OPTIONAL fields.</span>
<span class="sd">            An example is shown in the section Entry Listing Info Endpoints.</span>

<span class="sd">        page_limit (int): Sets a numerical limit on the number of entries returned.</span>
<span class="sd">            See [JSON API 1.0](https://jsonapi.org/format/1.0/#fetching-pagination).</span>
<span class="sd">            The API implementation MUST return no more than the number specified.</span>
<span class="sd">            It MAY return fewer. The database MAY have a maximum limit and not accept larger numbers</span>
<span class="sd">            (in which case an error code -- `403 Forbidden` -- MUST be returned).</span>
<span class="sd">            The default limit value is up to the API implementation to decide.</span>

<span class="sd">            **Example**: `http://example.com/optimade/v1/structures?page_limit=100`</span>

<span class="sd">        page_offset (int): RECOMMENDED for use with _offset-based_ pagination: using `page_offset` and `page_limit` is RECOMMENDED.</span>

<span class="sd">            **Example**: Skip 50 structures and fetch up to 100: `/structures?page_offset=50&amp;page_limit=100`.</span>

<span class="sd">        page_number (int): RECOMMENDED for use with _page-based_ pagination: using `page_number` and `page_limit` is RECOMMENDED.</span>
<span class="sd">            It is RECOMMENDED that the first page has number 1, i.e., that `page_number` is 1-based.</span>

<span class="sd">            **Example**: Fetch page 2 of up to 50 structures per page: `/structures?page_number=2&amp;page_limit=50`.</span>

<span class="sd">        page_cursor (int): RECOMMENDED for use with _cursor-based_ pagination: using `page_cursor` and `page_limit` is RECOMMENDED.</span>

<span class="sd">        page_above (str): RECOMMENDED for use with _value-based_ pagination: using `page_above`/`page_below` and `page_limit` is RECOMMENDED.</span>

<span class="sd">            **Example**: Fetch up to 100 structures above sort-field value 4000 (in this example, server chooses to fetch results sorted by</span>
<span class="sd">            increasing `id`, so `page_above` value refers to an `id` value): `/structures?page_above=4000&amp;page_limit=100`.</span>

<span class="sd">        page_below (str): RECOMMENDED for use with _value-based_ pagination: using `page_above`/`page_below` and `page_limit` is RECOMMENDED.</span>

<span class="sd">        include (str): A server MAY implement the JSON API concept of returning [compound documents](https://jsonapi.org/format/1.0/#document-compound-documents)</span>
<span class="sd">            by utilizing the `include` query parameter as specified by [JSON API 1.0](https://jsonapi.org/format/1.0/#fetching-includes).</span>

<span class="sd">            All related resource objects MUST be returned as part of an array value for the top-level `included` field,</span>
<span class="sd">            see the section JSON Response Schema: Common Fields.</span>

<span class="sd">            The value of `include` MUST be a comma-separated list of &quot;relationship paths&quot;, as defined in the [JSON API](https://jsonapi.org/format/1.0/#fetching-includes).</span>
<span class="sd">            If relationship paths are not supported, or a server is unable to identify a relationship path a `400 Bad Request` response MUST be made.</span>

<span class="sd">            The **default value** for `include` is `references`. This means `references` entries MUST always be included under the top-level field</span>
<span class="sd">            `included` as default, since a server assumes if `include` is not specified by a client in the request, it is still specified as `include=references`.</span>
<span class="sd">            Note, if a client explicitly specifies `include` and leaves out `references`, `references` resource objects MUST NOT be included under the top-level</span>
<span class="sd">            field `included`, as per the definition of `included`, see section JSON Response Schema: Common Fields.</span>

<span class="sd">            **Note**: A query with the parameter `include` set to the empty string means no related resource objects are to be returned under the top-level field `included`.</span>

<span class="sd">        api_hint (str): If the client provides the parameter, the value SHOULD have the format `vMAJOR` or `vMAJOR.MINOR`,</span>
<span class="sd">            where MAJOR is a major version and MINOR is a minor version of the API.</span>
<span class="sd">            For example, if a client appends `api_hint=v1.0` to the query string, the hint provided is for major version 1 and minor version 0.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># The reference server implementation only supports offset/number-based pagination</span>
    <span class="n">unsupported_params</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s2">&quot;page_cursor&quot;</span><span class="p">,</span>
        <span class="s2">&quot;page_below&quot;</span><span class="p">,</span>
    <span class="p">]</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="nb">filter</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="nb">str</span><span class="p">,</span>
            <span class="n">Query</span><span class="p">(</span>  <span class="c1"># pylint: disable=redefined-builtin</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;A filter string, in the format described in section API Filtering Format Specification of the specification.&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">response_format</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="nb">str</span><span class="p">,</span>
            <span class="n">Query</span><span class="p">(</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The output format requested (see section Response Format).</span><span class="se">\n</span><span class="s2">Defaults to the format string &#39;json&#39;, which specifies the standard output format described in this specification.</span><span class="se">\n</span><span class="s2">Example: `http://example.com/v1/structures?response_format=xml`&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span>
        <span class="n">email_address</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">EmailStr</span><span class="p">,</span>
            <span class="n">Query</span><span class="p">(</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;An email address of the user making the request.</span><span class="se">\n</span><span class="s2">The email SHOULD be that of a person and not an automatic system.</span><span class="se">\n</span><span class="s2">Example: `http://example.com/v1/structures?email_address=user@example.com`&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">response_fields</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="nb">str</span><span class="p">,</span>
            <span class="n">Query</span><span class="p">(</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;A comma-delimited set of fields to be provided in the output.</span><span class="se">\n</span><span class="s2">If provided, these fields MUST be returned along with the REQUIRED fields.</span><span class="se">\n</span><span class="s2">Other OPTIONAL fields MUST NOT be returned when this parameter is present.</span><span class="se">\n</span><span class="s2">Example: `http://example.com/v1/structures?response_fields=last_modified,nsites`&quot;</span><span class="p">,</span>
                <span class="n">pattern</span><span class="o">=</span><span class="sa">r</span><span class="s2">&quot;([a-z_][a-z_0-9]*(,[a-z_][a-z_0-9]*)*)?&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">sort</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="nb">str</span><span class="p">,</span>
            <span class="n">Query</span><span class="p">(</span>
                <span class="n">description</span><span class="o">=</span><span class="s1">&#39;If supporting sortable queries, an implementation MUST use the `sort` query parameter with format as specified by [JSON API 1.0](https://jsonapi.org/format/1.0/#fetching-sorting).</span><span class="se">\n\n</span><span class="s1">An implementation MAY support multiple sort fields for a single query.</span><span class="se">\n</span><span class="s1">If it does, it again MUST conform to the JSON API 1.0 specification.</span><span class="se">\n\n</span><span class="s1">If an implementation supports sorting for an entry listing endpoint, then the `/info/&lt;entries&gt;` endpoint MUST include, for each field name `&lt;fieldname&gt;` in its `data.properties.&lt;fieldname&gt;` response value that can be used for sorting, the key `sortable` with value `true`.</span><span class="se">\n</span><span class="s1">If a field name under an entry listing endpoint supporting sorting cannot be used for sorting, the server MUST either leave out the `sortable` key or set it equal to `false` for the specific field name.</span><span class="se">\n</span><span class="s1">The set of field names, with `sortable` equal to `true` are allowed to be used in the &quot;sort fields&quot; list according to its definition in the JSON API 1.0 specification.</span><span class="se">\n</span><span class="s1">The field `sortable` is in addition to each property description and other OPTIONAL fields.</span><span class="se">\n</span><span class="s1">An example is shown in the section Entry Listing Info Endpoints.&#39;</span><span class="p">,</span>
                <span class="n">pattern</span><span class="o">=</span><span class="sa">r</span><span class="s2">&quot;([a-z_][a-z_0-9]*(,[a-z_][a-z_0-9]*)*)?&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">page_limit</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="nb">int</span><span class="p">,</span>
            <span class="n">Query</span><span class="p">(</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Sets a numerical limit on the number of entries returned.</span><span class="se">\n</span><span class="s2">See [JSON API 1.0](https://jsonapi.org/format/1.0/#fetching-pagination).</span><span class="se">\n</span><span class="s2">The API implementation MUST return no more than the number specified.</span><span class="se">\n</span><span class="s2">It MAY return fewer.</span><span class="se">\n</span><span class="s2">The database MAY have a maximum limit and not accept larger numbers (in which case an error code -- 403 Forbidden -- MUST be returned).</span><span class="se">\n</span><span class="s2">The default limit value is up to the API implementation to decide.</span><span class="se">\n</span><span class="s2">Example: `http://example.com/optimade/v1/structures?page_limit=100`&quot;</span><span class="p">,</span>
                <span class="n">ge</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">CONFIG</span><span class="o">.</span><span class="n">page_limit</span><span class="p">,</span>
        <span class="n">page_offset</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="nb">int</span><span class="p">,</span>
            <span class="n">Query</span><span class="p">(</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;RECOMMENDED for use with _offset-based_ pagination: using `page_offset` and `page_limit` is RECOMMENDED.</span><span class="se">\n</span><span class="s2">Example: Skip 50 structures and fetch up to 100: `/structures?page_offset=50&amp;page_limit=100`.&quot;</span><span class="p">,</span>
                <span class="n">ge</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">page_number</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="nb">int</span><span class="p">,</span>
            <span class="n">Query</span><span class="p">(</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;RECOMMENDED for use with _page-based_ pagination: using `page_number` and `page_limit` is RECOMMENDED.</span><span class="se">\n</span><span class="s2">It is RECOMMENDED that the first page has number 1, i.e., that `page_number` is 1-based.</span><span class="se">\n</span><span class="s2">Example: Fetch page 2 of up to 50 structures per page: `/structures?page_number=2&amp;page_limit=50`.&quot;</span><span class="p">,</span>
                <span class="c1"># ge=1,  # This constraint is only &#39;RECOMMENDED&#39; in the specification, so should not be included here or in the OpenAPI schema</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>  <span class="c1"># type: ignore[assignment]</span>
        <span class="n">page_cursor</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="nb">int</span><span class="p">,</span>
            <span class="n">Query</span><span class="p">(</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;RECOMMENDED for use with _cursor-based_ pagination: using `page_cursor` and `page_limit` is RECOMMENDED.&quot;</span><span class="p">,</span>
                <span class="n">ge</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">page_above</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="nb">str</span><span class="p">,</span>
            <span class="n">Query</span><span class="p">(</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;RECOMMENDED for use with _value-based_ pagination: using `page_above`/`page_below` and `page_limit` is RECOMMENDED.</span><span class="se">\n</span><span class="s2">Example: Fetch up to 100 structures above sort-field value 4000 (in this example, server chooses to fetch results sorted by increasing `id`, so `page_above` value refers to an `id` value): `/structures?page_above=4000&amp;page_limit=100`.&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>  <span class="c1"># type: ignore[assignment]</span>
        <span class="n">page_below</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="nb">str</span><span class="p">,</span>
            <span class="n">Query</span><span class="p">(</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;RECOMMENDED for use with _value-based_ pagination: using `page_above`/`page_below` and `page_limit` is RECOMMENDED.&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>  <span class="c1"># type: ignore[assignment]</span>
        <span class="n">include</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="nb">str</span><span class="p">,</span>
            <span class="n">Query</span><span class="p">(</span>
                <span class="n">description</span><span class="o">=</span><span class="s1">&#39;A server MAY implement the JSON API concept of returning [compound documents](https://jsonapi.org/format/1.0/#document-compound-documents) by utilizing the `include` query parameter as specified by [JSON API 1.0](https://jsonapi.org/format/1.0/#fetching-includes).</span><span class="se">\n\n</span><span class="s1">All related resource objects MUST be returned as part of an array value for the top-level `included` field, see the section JSON Response Schema: Common Fields.</span><span class="se">\n\n</span><span class="s1">The value of `include` MUST be a comma-separated list of &quot;relationship paths&quot;, as defined in the [JSON API](https://jsonapi.org/format/1.0/#fetching-includes).</span><span class="se">\n</span><span class="s1">If relationship paths are not supported, or a server is unable to identify a relationship path a `400 Bad Request` response MUST be made.</span><span class="se">\n\n</span><span class="s1">The **default value** for `include` is `references`.</span><span class="se">\n</span><span class="s1">This means `references` entries MUST always be included under the top-level field `included` as default, since a server assumes if `include` is not specified by a client in the request, it is still specified as `include=references`.</span><span class="se">\n</span><span class="s1">Note, if a client explicitly specifies `include` and leaves out `references`, `references` resource objects MUST NOT be included under the top-level field `included`, as per the definition of `included`, see section JSON Response Schema: Common Fields.</span><span class="se">\n\n</span><span class="s1">&gt; **Note**: A query with the parameter `include` set to the empty string means no related resource objects are to be returned under the top-level field `included`.&#39;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;references&quot;</span><span class="p">,</span>
        <span class="n">api_hint</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="nb">str</span><span class="p">,</span>
            <span class="n">Query</span><span class="p">(</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;If the client provides the parameter, the value SHOULD have the format `vMAJOR` or `vMAJOR.MINOR`, where MAJOR is a major version and MINOR is a minor version of the API. For example, if a client appends `api_hint=v1.0` to the query string, the hint provided is for major version 1 and minor version 0.&quot;</span><span class="p">,</span>
                <span class="n">pattern</span><span class="o">=</span><span class="sa">r</span><span class="s2">&quot;(v[0-9]+(\.[0-9]+)?)?&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">filter</span> <span class="o">=</span> <span class="nb">filter</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">response_format</span> <span class="o">=</span> <span class="n">response_format</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">email_address</span> <span class="o">=</span> <span class="n">email_address</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">response_fields</span> <span class="o">=</span> <span class="n">response_fields</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sort</span> <span class="o">=</span> <span class="n">sort</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">page_limit</span> <span class="o">=</span> <span class="n">page_limit</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">page_offset</span> <span class="o">=</span> <span class="n">page_offset</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">page_number</span> <span class="o">=</span> <span class="n">page_number</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">page_cursor</span> <span class="o">=</span> <span class="n">page_cursor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">page_above</span> <span class="o">=</span> <span class="n">page_above</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">page_below</span> <span class="o">=</span> <span class="n">page_below</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">include</span> <span class="o">=</span> <span class="n">include</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">api_hint</span> <span class="o">=</span> <span class="n">api_hint</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">




<h3 id="optimade.server.query_params.EntryListingQueryParams.check_params" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">check_params</span><span class="p">(</span><span class="n">query_params</span><span class="p">)</span></code>

<a href="#optimade.server.query_params.EntryListingQueryParams.check_params" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>This method checks whether all the query parameters that are specified
in the URL string are implemented in the relevant <code>*QueryParams</code> class.</p>
<p>This method handles four cases:</p>
<ul>
<li>If a query parameter is passed that is not defined in the relevant <code>*QueryParams</code> class,
  and it is not prefixed with a known provider prefix, then a <code>BadRequest</code> is raised.</li>
<li>If a query parameter is passed that is not defined in the relevant <code>*QueryParams</code> class,
  that is prefixed with a known provider prefix, then the parameter is silently ignored</li>
<li>If a query parameter is passed that is not defined in the relevant <code>*QueryParams</code> class,
  that is prefixed with an unknown provider prefix, then a <code>UnknownProviderQueryParameter</code>
  warning is emitted.</li>
<li>If a query parameter is passed that is on the <code>unsupported_params</code> list for the inherited
  class, then a <code>QueryParamNotUsed</code> warning is emitted.</li>
</ul>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>query_params</code></td>
          <td>
                <code><span title="collections.abc.Iterable">Iterable</span>[str]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>An iterable of the request's string query parameters.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Raises:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>`BadRequest`</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>if the query parameter was not found in the relevant class, or if it
does not have a valid prefix.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>optimade/server/query_params.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">check_params</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query_params</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;This method checks whether all the query parameters that are specified</span>
<span class="sd">    in the URL string are implemented in the relevant `*QueryParams` class.</span>

<span class="sd">    This method handles four cases:</span>

<span class="sd">    * If a query parameter is passed that is not defined in the relevant `*QueryParams` class,</span>
<span class="sd">      and it is not prefixed with a known provider prefix, then a `BadRequest` is raised.</span>
<span class="sd">    * If a query parameter is passed that is not defined in the relevant `*QueryParams` class,</span>
<span class="sd">      that is prefixed with a known provider prefix, then the parameter is silently ignored</span>
<span class="sd">    * If a query parameter is passed that is not defined in the relevant `*QueryParams` class,</span>
<span class="sd">      that is prefixed with an unknown provider prefix, then a `UnknownProviderQueryParameter`</span>
<span class="sd">      warning is emitted.</span>
<span class="sd">    * If a query parameter is passed that is on the `unsupported_params` list for the inherited</span>
<span class="sd">      class, then a `QueryParamNotUsed` warning is emitted.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        query_params: An iterable of the request&#39;s string query parameters.</span>

<span class="sd">    Raises:</span>
<span class="sd">        `BadRequest`: if the query parameter was not found in the relevant class, or if it</span>
<span class="sd">            does not have a valid prefix.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">CONFIG</span><span class="p">,</span> <span class="s2">&quot;validate_query_parameters&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
        <span class="k">return</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">warnings</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">unsupported_warnings</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">param</span> <span class="ow">in</span> <span class="n">query_params</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">param</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">unsupported_params</span><span class="p">:</span>
            <span class="n">unsupported_warnings</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">param</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">param</span><span class="p">):</span>
            <span class="n">split_param</span> <span class="o">=</span> <span class="n">param</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">param</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">split_param</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">prefix</span> <span class="o">=</span> <span class="n">split_param</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">prefix</span> <span class="ow">in</span> <span class="n">BaseResourceMapper</span><span class="o">.</span><span class="n">SUPPORTED_PREFIXES</span><span class="p">:</span>
                    <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">param</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">prefix</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">BaseResourceMapper</span><span class="o">.</span><span class="n">KNOWN_PROVIDER_PREFIXES</span><span class="p">:</span>
                    <span class="n">warnings</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">param</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">param</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">warnings</span><span class="p">:</span>
        <span class="n">warn</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;The query parameter(s) &#39;</span><span class="si">{</span><span class="n">warnings</span><span class="si">}</span><span class="s2">&#39; are unrecognised and have been ignored.&quot;</span><span class="p">,</span>
            <span class="n">UnknownProviderQueryParameter</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="n">unsupported_warnings</span><span class="p">:</span>
        <span class="n">warn</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;The query parameter(s) &#39;</span><span class="si">{</span><span class="n">unsupported_warnings</span><span class="si">}</span><span class="s2">&#39; are not supported by this server and have been ignored.&quot;</span><span class="p">,</span>
            <span class="n">QueryParamNotUsed</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="n">errors</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">BadRequest</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;The query parameter(s) &#39;</span><span class="si">{</span><span class="n">errors</span><span class="si">}</span><span class="s2">&#39; are not recognised by this endpoint.&quot;</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">




<h2 id="optimade.server.query_params.QueryParamNotUsed" class="doc doc-heading">
          <code>QueryParamNotUsed</code>


<a href="#optimade.server.query_params.QueryParamNotUsed" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="optimade.warnings.OptimadeWarning" href="../../warnings/#optimade.warnings.OptimadeWarning">OptimadeWarning</a></code></p>

  
      <p>A query parameter is not used in this request.</p>

            <details class="quote">
              <summary>Source code in <code>optimade/warnings.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">62</span>
<span class="normal">63</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">QueryParamNotUsed</span><span class="p">(</span><span class="n">OptimadeWarning</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A query parameter is not used in this request.&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>

  </div>

</div>

<div class="doc doc-object doc-class">




<h2 id="optimade.server.query_params.SingleEntryQueryParams" class="doc doc-heading">
          <code>SingleEntryQueryParams</code>


<a href="#optimade.server.query_params.SingleEntryQueryParams" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="optimade.server.query_params.BaseQueryParams" href="#optimade.server.query_params.BaseQueryParams">BaseQueryParams</a></code></p>

  
      <p>Common query params for single entry endpoints.</p>



  <p><strong>Attributes:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>response_format</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The output format requested (see section Response Format).
Defaults to the format string 'json', which specifies the standard output format described in this specification.</p>
<p><strong>Example</strong>: <code>http://example.com/v1/structures?response_format=xml</code></p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code>email_address</code></td>
          <td>
                <code><span title="pydantic.EmailStr">EmailStr</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>An email address of the user making the request.
The email SHOULD be that of a person and not an automatic system.</p>
<p><strong>Example</strong>: <code>http://example.com/v1/structures?email_address=user@example.com</code></p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code>response_fields</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A comma-delimited set of fields to be provided in the output.
If provided, these fields MUST be returned along with the REQUIRED fields.
Other OPTIONAL fields MUST NOT be returned when this parameter is present.</p>
<p><strong>Example</strong>: <code>http://example.com/v1/structures?response_fields=last_modified,nsites</code></p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code>include</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A server MAY implement the JSON API concept of returning <a href="https://jsonapi.org/format/1.0/#document-compound-documents">compound documents</a>
by utilizing the <code>include</code> query parameter as specified by <a href="https://jsonapi.org/format/1.0/#fetching-includes">JSON API 1.0</a>.</p>
<p>All related resource objects MUST be returned as part of an array value for the top-level <code>included</code> field,
see the section JSON Response Schema: Common Fields.</p>
<p>The value of <code>include</code> MUST be a comma-separated list of "relationship paths", as defined in the <a href="https://jsonapi.org/format/1.0/#fetching-includes">JSON API</a>.
If relationship paths are not supported, or a server is unable to identify a relationship path a <code>400 Bad Request</code> response MUST be made.</p>
<p>The <strong>default value</strong> for <code>include</code> is <code>references</code>. This means <code>references</code> entries MUST always be included under the top-level field
<code>included</code> as default, since a server assumes if <code>include</code> is not specified by a client in the request, it is still specified as <code>include=references</code>.
Note, if a client explicitly specifies <code>include</code> and leaves out <code>references</code>, <code>references</code> resource objects MUST NOT be included under the top-level
field <code>included</code>, as per the definition of <code>included</code>, see section JSON Response Schema: Common Fields.</p>
<p><strong>Note</strong>: A query with the parameter <code>include</code> set to the empty string means no related resource objects are to be returned under the top-level field <code>included</code>.</p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code>api_hint</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If the client provides the parameter, the value SHOULD have the format <code>vMAJOR</code> or <code>vMAJOR.MINOR</code>,
where MAJOR is a major version and MINOR is a minor version of the API.
For example, if a client appends <code>api_hint=v1.0</code> to the query string, the hint provided is for major version 1 and minor version 0.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

            <details class="quote">
              <summary>Source code in <code>optimade/server/query_params.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">SingleEntryQueryParams</span><span class="p">(</span><span class="n">BaseQueryParams</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Common query params for single entry endpoints.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        response_format (str): The output format requested (see section Response Format).</span>
<span class="sd">            Defaults to the format string &#39;json&#39;, which specifies the standard output format described in this specification.</span>

<span class="sd">            **Example**: `http://example.com/v1/structures?response_format=xml`</span>

<span class="sd">        email_address (EmailStr): An email address of the user making the request.</span>
<span class="sd">            The email SHOULD be that of a person and not an automatic system.</span>

<span class="sd">            **Example**: `http://example.com/v1/structures?email_address=user@example.com`</span>

<span class="sd">        response_fields (str): A comma-delimited set of fields to be provided in the output.</span>
<span class="sd">            If provided, these fields MUST be returned along with the REQUIRED fields.</span>
<span class="sd">            Other OPTIONAL fields MUST NOT be returned when this parameter is present.</span>

<span class="sd">            **Example**: `http://example.com/v1/structures?response_fields=last_modified,nsites`</span>

<span class="sd">        include (str): A server MAY implement the JSON API concept of returning [compound documents](https://jsonapi.org/format/1.0/#document-compound-documents)</span>
<span class="sd">            by utilizing the `include` query parameter as specified by [JSON API 1.0](https://jsonapi.org/format/1.0/#fetching-includes).</span>

<span class="sd">            All related resource objects MUST be returned as part of an array value for the top-level `included` field,</span>
<span class="sd">            see the section JSON Response Schema: Common Fields.</span>

<span class="sd">            The value of `include` MUST be a comma-separated list of &quot;relationship paths&quot;, as defined in the [JSON API](https://jsonapi.org/format/1.0/#fetching-includes).</span>
<span class="sd">            If relationship paths are not supported, or a server is unable to identify a relationship path a `400 Bad Request` response MUST be made.</span>

<span class="sd">            The **default value** for `include` is `references`. This means `references` entries MUST always be included under the top-level field</span>
<span class="sd">            `included` as default, since a server assumes if `include` is not specified by a client in the request, it is still specified as `include=references`.</span>
<span class="sd">            Note, if a client explicitly specifies `include` and leaves out `references`, `references` resource objects MUST NOT be included under the top-level</span>
<span class="sd">            field `included`, as per the definition of `included`, see section JSON Response Schema: Common Fields.</span>

<span class="sd">            **Note**: A query with the parameter `include` set to the empty string means no related resource objects are to be returned under the top-level field `included`.</span>

<span class="sd">        api_hint (str): If the client provides the parameter, the value SHOULD have the format `vMAJOR` or `vMAJOR.MINOR`,</span>
<span class="sd">            where MAJOR is a major version and MINOR is a minor version of the API.</span>
<span class="sd">            For example, if a client appends `api_hint=v1.0` to the query string, the hint provided is for major version 1 and minor version 0.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">response_format</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="nb">str</span><span class="p">,</span>
            <span class="n">Query</span><span class="p">(</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The output format requested (see section Response Format).</span><span class="se">\n</span><span class="s2">Defaults to the format string &#39;json&#39;, which specifies the standard output format described in this specification.</span><span class="se">\n</span><span class="s2">Example: `http://example.com/v1/structures?response_format=xml`&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span>
        <span class="n">email_address</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">EmailStr</span><span class="p">,</span>
            <span class="n">Query</span><span class="p">(</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;An email address of the user making the request.</span><span class="se">\n</span><span class="s2">The email SHOULD be that of a person and not an automatic system.</span><span class="se">\n</span><span class="s2">Example: `http://example.com/v1/structures?email_address=user@example.com`&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">response_fields</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="nb">str</span><span class="p">,</span>
            <span class="n">Query</span><span class="p">(</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;A comma-delimited set of fields to be provided in the output.</span><span class="se">\n</span><span class="s2">If provided, these fields MUST be returned along with the REQUIRED fields.</span><span class="se">\n</span><span class="s2">Other OPTIONAL fields MUST NOT be returned when this parameter is present.</span><span class="se">\n</span><span class="s2">Example: `http://example.com/v1/structures?response_fields=last_modified,nsites`&quot;</span><span class="p">,</span>
                <span class="n">pattern</span><span class="o">=</span><span class="sa">r</span><span class="s2">&quot;([a-z_][a-z_0-9]*(,[a-z_][a-z_0-9]*)*)?&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">include</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="nb">str</span><span class="p">,</span>
            <span class="n">Query</span><span class="p">(</span>
                <span class="n">description</span><span class="o">=</span><span class="s1">&#39;A server MAY implement the JSON API concept of returning [compound documents](https://jsonapi.org/format/1.0/#document-compound-documents) by utilizing the `include` query parameter as specified by [JSON API 1.0](https://jsonapi.org/format/1.0/#fetching-includes).</span><span class="se">\n\n</span><span class="s1">All related resource objects MUST be returned as part of an array value for the top-level `included` field, see the section JSON Response Schema: Common Fields.</span><span class="se">\n\n</span><span class="s1">The value of `include` MUST be a comma-separated list of &quot;relationship paths&quot;, as defined in the [JSON API](https://jsonapi.org/format/1.0/#fetching-includes).</span><span class="se">\n</span><span class="s1">If relationship paths are not supported, or a server is unable to identify a relationship path a `400 Bad Request` response MUST be made.</span><span class="se">\n\n</span><span class="s1">The **default value** for `include` is `references`.</span><span class="se">\n</span><span class="s1">This means `references` entries MUST always be included under the top-level field `included` as default, since a server assumes if `include` is not specified by a client in the request, it is still specified as `include=references`.</span><span class="se">\n</span><span class="s1">Note, if a client explicitly specifies `include` and leaves out `references`, `references` resource objects MUST NOT be included under the top-level field `included`, as per the definition of `included`, see section JSON Response Schema: Common Fields.</span><span class="se">\n\n</span><span class="s1">&gt; **Note**: A query with the parameter `include` set to the empty string means no related resource objects are to be returned under the top-level field `included`.&#39;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;references&quot;</span><span class="p">,</span>
        <span class="n">api_hint</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="nb">str</span><span class="p">,</span>
            <span class="n">Query</span><span class="p">(</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;If the client provides the parameter, the value SHOULD have the format `vMAJOR` or `vMAJOR.MINOR`, where MAJOR is a major version and MINOR is a minor version of the API. For example, if a client appends `api_hint=v1.0` to the query string, the hint provided is for major version 1 and minor version 0.&quot;</span><span class="p">,</span>
                <span class="n">pattern</span><span class="o">=</span><span class="sa">r</span><span class="s2">&quot;(v[0-9]+(\.[0-9]+)?)?&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">response_format</span> <span class="o">=</span> <span class="n">response_format</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">email_address</span> <span class="o">=</span> <span class="n">email_address</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">response_fields</span> <span class="o">=</span> <span class="n">response_fields</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">include</span> <span class="o">=</span> <span class="n">include</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">api_hint</span> <span class="o">=</span> <span class="n">api_hint</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">




<h3 id="optimade.server.query_params.SingleEntryQueryParams.check_params" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">check_params</span><span class="p">(</span><span class="n">query_params</span><span class="p">)</span></code>

<a href="#optimade.server.query_params.SingleEntryQueryParams.check_params" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>This method checks whether all the query parameters that are specified
in the URL string are implemented in the relevant <code>*QueryParams</code> class.</p>
<p>This method handles four cases:</p>
<ul>
<li>If a query parameter is passed that is not defined in the relevant <code>*QueryParams</code> class,
  and it is not prefixed with a known provider prefix, then a <code>BadRequest</code> is raised.</li>
<li>If a query parameter is passed that is not defined in the relevant <code>*QueryParams</code> class,
  that is prefixed with a known provider prefix, then the parameter is silently ignored</li>
<li>If a query parameter is passed that is not defined in the relevant <code>*QueryParams</code> class,
  that is prefixed with an unknown provider prefix, then a <code>UnknownProviderQueryParameter</code>
  warning is emitted.</li>
<li>If a query parameter is passed that is on the <code>unsupported_params</code> list for the inherited
  class, then a <code>QueryParamNotUsed</code> warning is emitted.</li>
</ul>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>query_params</code></td>
          <td>
                <code><span title="collections.abc.Iterable">Iterable</span>[str]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>An iterable of the request's string query parameters.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Raises:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>`BadRequest`</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>if the query parameter was not found in the relevant class, or if it
does not have a valid prefix.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>optimade/server/query_params.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">check_params</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query_params</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;This method checks whether all the query parameters that are specified</span>
<span class="sd">    in the URL string are implemented in the relevant `*QueryParams` class.</span>

<span class="sd">    This method handles four cases:</span>

<span class="sd">    * If a query parameter is passed that is not defined in the relevant `*QueryParams` class,</span>
<span class="sd">      and it is not prefixed with a known provider prefix, then a `BadRequest` is raised.</span>
<span class="sd">    * If a query parameter is passed that is not defined in the relevant `*QueryParams` class,</span>
<span class="sd">      that is prefixed with a known provider prefix, then the parameter is silently ignored</span>
<span class="sd">    * If a query parameter is passed that is not defined in the relevant `*QueryParams` class,</span>
<span class="sd">      that is prefixed with an unknown provider prefix, then a `UnknownProviderQueryParameter`</span>
<span class="sd">      warning is emitted.</span>
<span class="sd">    * If a query parameter is passed that is on the `unsupported_params` list for the inherited</span>
<span class="sd">      class, then a `QueryParamNotUsed` warning is emitted.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        query_params: An iterable of the request&#39;s string query parameters.</span>

<span class="sd">    Raises:</span>
<span class="sd">        `BadRequest`: if the query parameter was not found in the relevant class, or if it</span>
<span class="sd">            does not have a valid prefix.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">CONFIG</span><span class="p">,</span> <span class="s2">&quot;validate_query_parameters&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
        <span class="k">return</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">warnings</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">unsupported_warnings</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">param</span> <span class="ow">in</span> <span class="n">query_params</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">param</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">unsupported_params</span><span class="p">:</span>
            <span class="n">unsupported_warnings</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">param</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">param</span><span class="p">):</span>
            <span class="n">split_param</span> <span class="o">=</span> <span class="n">param</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">param</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">split_param</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">prefix</span> <span class="o">=</span> <span class="n">split_param</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">prefix</span> <span class="ow">in</span> <span class="n">BaseResourceMapper</span><span class="o">.</span><span class="n">SUPPORTED_PREFIXES</span><span class="p">:</span>
                    <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">param</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">prefix</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">BaseResourceMapper</span><span class="o">.</span><span class="n">KNOWN_PROVIDER_PREFIXES</span><span class="p">:</span>
                    <span class="n">warnings</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">param</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">param</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">warnings</span><span class="p">:</span>
        <span class="n">warn</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;The query parameter(s) &#39;</span><span class="si">{</span><span class="n">warnings</span><span class="si">}</span><span class="s2">&#39; are unrecognised and have been ignored.&quot;</span><span class="p">,</span>
            <span class="n">UnknownProviderQueryParameter</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="n">unsupported_warnings</span><span class="p">:</span>
        <span class="n">warn</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;The query parameter(s) &#39;</span><span class="si">{</span><span class="n">unsupported_warnings</span><span class="si">}</span><span class="s2">&#39; are not supported by this server and have been ignored.&quot;</span><span class="p">,</span>
            <span class="n">QueryParamNotUsed</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="n">errors</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">BadRequest</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;The query parameter(s) &#39;</span><span class="si">{</span><span class="n">errors</span><span class="si">}</span><span class="s2">&#39; are not recognised by this endpoint.&quot;</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">




<h2 id="optimade.server.query_params.UnknownProviderQueryParameter" class="doc doc-heading">
          <code>UnknownProviderQueryParameter</code>


<a href="#optimade.server.query_params.UnknownProviderQueryParameter" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="optimade.warnings.OptimadeWarning" href="../../warnings/#optimade.warnings.OptimadeWarning">OptimadeWarning</a></code></p>

  
      <p>A provider-specific query parameter has been requested in the query with a prefix not
recognised by this implementation.</p>

            <details class="quote">
              <summary>Source code in <code>optimade/warnings.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">UnknownProviderQueryParameter</span><span class="p">(</span><span class="n">OptimadeWarning</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A provider-specific query parameter has been requested in the query with a prefix not</span>
<span class="sd">    recognised by this implementation.</span>

<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>

  </div>

</div>




  </div>

  </div>

</div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Built by the Materials-Consortia
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/Materials-Consortia" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": [], "search": "../../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": "stable", "provider": "mike"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.81fa17fe.min.js"></script>
      
    
  </body>
</html>